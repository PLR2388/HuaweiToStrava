(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?"[DEFAULT]":e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return an}),n.d(e,"b",function(){return Gc}),n.d(e,"c",function(){return Vc}),n.d(e,"d",function(){return Fc}),n.d(e,"e",function(){return Uc}),n.d(e,"f",function(){return Fl}),n.d(e,"g",function(){return xl}),n.d(e,"h",function(){return Lu}),n.d(e,"i",function(){return nl}),n.d(e,"j",function(){return su}),n.d(e,"k",function(){return Wc}),n.d(e,"l",function(){return lu}),n.d(e,"m",function(){return _r}),n.d(e,"n",function(){return yc}),n.d(e,"o",function(){return _o}),n.d(e,"p",function(){return Tn}),n.d(e,"q",function(){return j}),n.d(e,"r",function(){return sn}),n.d(e,"s",function(){return Mo}),n.d(e,"t",function(){return Au}),n.d(e,"u",function(){return ku}),n.d(e,"v",function(){return $c}),n.d(e,"w",function(){return $u}),n.d(e,"x",function(){return jl}),n.d(e,"y",function(){return Ku}),n.d(e,"z",function(){return Sl}),n.d(e,"A",function(){return ol}),n.d(e,"B",function(){return Cn}),n.d(e,"C",function(){return zc}),n.d(e,"D",function(){return Hc}),n.d(e,"E",function(){return bc}),n.d(e,"F",function(){return du}),n.d(e,"G",function(){return fu}),n.d(e,"H",function(){return Cr}),n.d(e,"I",function(){return gu}),n.d(e,"J",function(){return mr}),n.d(e,"K",function(){return xn}),n.d(e,"L",function(){return Rl}),n.d(e,"M",function(){return Bu}),n.d(e,"N",function(){return fl}),n.d(e,"O",function(){return un}),n.d(e,"P",function(){return yu}),n.d(e,"Q",function(){return mu}),n.d(e,"R",function(){return Qu}),n.d(e,"S",function(){return L}),n.d(e,"T",function(){return Ol}),n.d(e,"U",function(){return _l}),n.d(e,"V",function(){return d}),n.d(e,"W",function(){return wl}),n.d(e,"X",function(){return Ll}),n.d(e,"Y",function(){return gl}),n.d(e,"Z",function(){return Kc}),n.d(e,"ab",function(){return So}),n.d(e,"bb",function(){return ra}),n.d(e,"cb",function(){return pr}),n.d(e,"db",function(){return Zn}),n.d(e,"eb",function(){return Fn}),n.d(e,"fb",function(){return Vn}),n.d(e,"gb",function(){return zn}),n.d(e,"hb",function(){return Bn}),n.d(e,"ib",function(){return qn}),n.d(e,"jb",function(){return Hn}),n.d(e,"kb",function(){return Xs}),n.d(e,"lb",function(){return Pl}),n.d(e,"mb",function(){return ta}),n.d(e,"nb",function(){return ea}),n.d(e,"ob",function(){return Un}),n.d(e,"pb",function(){return q}),n.d(e,"qb",function(){return $o}),n.d(e,"rb",function(){return ds}),n.d(e,"sb",function(){return hs}),n.d(e,"tb",function(){return fs}),n.d(e,"ub",function(){return Ys}),n.d(e,"vb",function(){return Ot}),n.d(e,"wb",function(){return l}),n.d(e,"xb",function(){return Mn}),n.d(e,"yb",function(){return Uo}),n.d(e,"zb",function(){return vt}),n.d(e,"Ab",function(){return ru}),n.d(e,"Bb",function(){return Ei}),n.d(e,"Cb",function(){return Yo}),n.d(e,"Db",function(){return ks}),n.d(e,"Eb",function(){return $s}),n.d(e,"Fb",function(){return js}),n.d(e,"Gb",function(){return kc}),n.d(e,"Hb",function(){return X}),n.d(e,"Ib",function(){return st}),n.d(e,"Jb",function(){return _}),n.d(e,"Kb",function(){return E}),n.d(e,"Lb",function(){return rt}),n.d(e,"Mb",function(){return at}),n.d(e,"Nb",function(){return ns}),n.d(e,"Ob",function(){return as}),n.d(e,"Pb",function(){return cs}),n.d(e,"Qb",function(){return us}),n.d(e,"Rb",function(){return ss}),n.d(e,"Sb",function(){return os}),n.d(e,"Tb",function(){return ls}),n.d(e,"Ub",function(){return en}),n.d(e,"Vb",function(){return Ws}),n.d(e,"Wb",function(){return $a}),n.d(e,"Xb",function(){return Qa}),n.d(e,"Yb",function(){return Wa}),n.d(e,"Zb",function(){return Sn}),n.d(e,"ac",function(){return rn}),n.d(e,"bc",function(){return Mc}),n.d(e,"cc",function(){return ps}),n.d(e,"dc",function(){return Nc}),n.d(e,"ec",function(){return we}),n.d(e,"fc",function(){return be}),n.d(e,"gc",function(){return ys}),n.d(e,"hc",function(){return gc}),n.d(e,"ic",function(){return mc}),n.d(e,"jc",function(){return ws}),n.d(e,"kc",function(){return bs}),n.d(e,"lc",function(){return rs}),n.d(e,"mc",function(){return _s}),n.d(e,"nc",function(){return Es}),n.d(e,"oc",function(){return lc}),n.d(e,"pc",function(){return hc}),n.d(e,"qc",function(){return fc}),n.d(e,"rc",function(){return Ac}),n.d(e,"sc",function(){return es}),n.d(e,"tc",function(){return zt}),n.d(e,"uc",function(){return yr}),n.d(e,"vc",function(){return it}),n.d(e,"wc",function(){return As}),n.d(e,"xc",function(){return ts}),n.d(e,"yc",function(){return Lc}),n.d(e,"zc",function(){return Hs}),n.d(e,"Ac",function(){return zs}),n.d(e,"Bc",function(){return Gs}),n.d(e,"Cc",function(){return Ks}),n.d(e,"Dc",function(){return jc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return O(t,T)||O(t,x)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function I(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(A))?t[C]:null}const T=u({"\u0275prov":u}),C=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let k;function N(t){const e=k;return k=t,e}function R(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&j.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function D(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,q=M||V||F||U,B={},H=[],z=[],G=u({"\u0275cmp":u}),K=u({"\u0275dir":u}),$=u({"\u0275pipe":u}),W=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),Z=u({"\u0275fac":u}),J=u({__NG_ELEMENT_ID__:u});let Y=0;function X(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Y++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[K]||null}(t)}function et(t){return function(t){return t[$]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{nt[t.id]=t.type}),e}function it(t,e){return D(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[G]||null}function ct(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(Z)?t[Z]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let St;function Ot(t){St=t}function It(){return void 0!==St?St:"undefined"!=typeof document?document:void 0}function Tt(t){return!!t.listen}vt.ngInherit=!0;const Ct={createRenderer:(t,e)=>It()};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return xt(e[t])}function jt(t,e){return xt(e[t.index])}function kt(t,e){return t.data[e]}function Nt(t,e){return t[e]}function Rt(t,e){const n=e[t];return lt(n)?n:n[0]}function Dt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Ut(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qt(){return Vt.bindingsEnabled}function Bt(){return Vt.lFrame.lView}function Ht(){return Vt.lFrame.tView}function zt(t){Vt.lFrame.contextLView=t}function Gt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return Vt.lFrame.currentTNode}function $t(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Wt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Qt(){return Vt.lFrame.isParent}function Zt(){Vt.lFrame.isParent=!1}function Jt(){return Vt.isInCheckNoChangesMode}function Yt(t){Vt.isInCheckNoChangesMode=t}function Xt(){const t=Vt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return Vt.lFrame.bindingIndex}function ee(){return Vt.lFrame.bindingIndex++}function ne(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t){Vt.lFrame.inI18n=t}function ie(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,oe(e)}function oe(t){Vt.lFrame.currentDirectiveIndex=t}function se(){return Vt.lFrame.currentQueryIndex}function ae(t){Vt.lFrame.currentQueryIndex=t}function ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ce(t,e,n){if(n&j.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&j.Host||(r=ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=he();return r.currentTNode=e,r.lView=t,!0}function le(t){const e=he(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function he(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?fe(t):e}function fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function de(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pe=de;function ge(){const t=de();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function me(){return Vt.lFrame.selectedIndex}function ye(t){Vt.lFrame.selectedIndex=t}function ve(){const t=Vt.lFrame;return kt(t.tView,t.selectedIndex)}function be(){Vt.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function we(){Vt.lFrame.currentNamespace=null}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ee(t,e,n){Ie(t,e,3,n)}function Se(t,e,n,r){(3&t[2])===n&&Ie(t,e,n,r)}function Oe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ie(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Ce{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function xe(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];je(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function je(t){return 64===t.charCodeAt(0)}function ke(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Re(t){return-1!==t}function De(t){return 32767&t}function Pe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Le=!0;function Me(t){const e=Le;return Le=t,e}let Fe=0;function Ue(t,e){const n=qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=Be(t,e),o=t.injectorIndex;if(Re(i)){const t=De(i),n=Pe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Be(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function He(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Fe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ze(t,e,n){if(n&j.Optional)return t;b(e,"NodeInjector")}function Ge(t,e,n,r){if(n&j.Optional&&void 0===r&&(r=null),0==(n&(j.Self|j.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&j.Optional):R(e,r,n&j.Optional)}finally{N(o)}}return ze(r,e,n)}function Ke(t,e,n,r=j.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:We:e}(n);if("function"==typeof o){if(!ce(e,t,r))return r&j.Host?ze(i,n,r):Ge(e,n,r,i);try{const t=o();if(null!=t||r&j.Optional)return t;b(n)}finally{pe()}}else if("number"==typeof o){let i=null,s=qe(t,e),a=-1,u=r&j.Host?e[16][6]:null;for((-1===s||r&j.SkipSelf)&&(a=-1===s?Be(t,e):e[s+8],-1!==a&&Xe(r,!1)?(i=e[1],s=De(a),e=Pe(a,e)):s=-1);-1!==s;){const t=e[1];if(Ye(o,s,t.data)){const t=Qe(s,e,n,i,r,u);if(t!==$e)return t}a=e[s+8],-1!==a&&Xe(r,e[1].data[s+8]===u)&&Ye(o,s,e)?(i=t,s=De(a),e=Pe(a,e)):s=-1}}}return Ge(e,n,r,i)}const $e={};function We(){return new tn(Gt(),Bt())}function Qe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ze(a,s,n,null==r?dt(a)&&Le:r!=s&&0!=(3&a.type),i&j.Host&&o===a);return null!==u?Je(e,s,u,a):$e}function Ze(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Je(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ce){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Me(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;ce(t,r,j.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Me(a),s.resolving=!1,pe()}}return i}function Ye(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Xe(t,e){return!(t&j.Self||t&j.Host&&e)}class tn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ke(this._tNode,this._lView,t,void 0,e)}}function en(t){return D(()=>{const e=t.prototype.constructor,n=e[Z]||nn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Z]||nn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function nn(t){return g(t)?()=>{const e=nn(p(t));return e&&e()}:mt(t)}function rn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ae(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}function on(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class sn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new sn("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function gn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,bn=u({provide:String,useValue:u});let wn;function _n(t){const e=wn;return wn=t,e}function En(t,e=j.Default){if(void 0===wn)throw new Error("inject() must be called from an injection context");return null===wn?R(t,void 0,e):wn.get(t,e&j.Optional?null:void 0,e)}function Sn(t,e=j.Default){return(k||En)(p(t),e)}function On(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=j.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Sn(t,n))}else e.push(Sn(r))}return e}function In(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=In(on("Inject",t=>({token:t})),-1),Cn=In(on("Optional"),8),xn=In(on("SkipSelf"),4);let An;function jn(t){var e;return(null===(e=function(){if(void 0===An&&(An=null,q.trustedTypes))try{An=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return An}())||void 0===e?void 0:e.createHTML(t))||t}class kn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nn extends kn{getTypeName(){return"HTML"}}class Rn extends kn{getTypeName(){return"Style"}}class Dn extends kn{getTypeName(){return"Script"}}class Pn extends kn{getTypeName(){return"URL"}}class Ln extends kn{getTypeName(){return"ResourceURL"}}function Mn(t){return t instanceof kn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=Un(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Un(t){return t instanceof kn&&t.getTypeName()||null}function Vn(t){return new Nn(t)}function qn(t){return new Rn(t)}function Bn(t){return new Dn(t)}function Hn(t){return new Pn(t)}function zn(t){return new Ln(t)}function Gn(t){const e=new $n(t);return function(){try{return!!(new window.DOMParser).parseFromString(jn(""),"text/html")}catch(t){return!1}}()?new Kn(e):e}class Kn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(jn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $n{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=jn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=jn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Wn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(Wn)||t.match(Qn)?t:"unsafe:"+t}function Jn(t){return(t=String(t)).split(",").map(t=>Zn(t.trim())).join(", ")}function Yn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Xn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Yn("area,br,col,hr,img,wbr"),er=Yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Yn("rp,rt"),rr=Xn(nr,er),ir=Xn(tr,Xn(er,Yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Xn(nr,Yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Yn("srcset"),ar=Xn(or,sr,Yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Yn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!ar.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;or[i]&&(o=Zn(o)),sr[i]&&(o=Jn(o)),this.buf.push(" ",e,'="',fr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(fr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function fr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dr;function pr(t,e){let n=null;try{dr=dr||Gn(t);let r=e?String(e):"";n=dr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=dr.getInertBodyElement(r)}while(r!==o);return jn((new cr).sanitizeChildren(gr(n)||n))}finally{if(n){const t=gr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function gr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var mr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=Bt();return t&&t[12]}();return e?e.sanitize(mr.URL,t)||"":Fn(t,"URL")?Mn(t):Zn(y(t))}function vr(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function wr(t,...e){t.error(...e)}class _r{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||wr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vr(t)?vr(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}const Er=/^>|^->|<!--|-->|--!>|<!-$/g,Sr=/(<|>)/;function Or(t,e){t.__ngContext__=e}const Ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function Tr(t){return t instanceof Function?t():t}var Cr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let xr;function Ar(t,e){return xr(t,e)}function jr(t){const e=t[3];return ht(e)?e[3]:e}function kr(t){return Rr(t[13])}function Nr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Dr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Kr(e,n,a):Gr(e,n,a,i||null,!0):1===t&&null!==n?Gr(e,n,a,i||null,!0):2===t?ii(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Dr(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];si(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Pr(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}function Lr(t,e,n){Tt(t)?t.setValue(e,n):e.textContent=n}function Mr(t,e){return t.createComment(function(t){return t.replace(Er,t=>t.replace(Sr,"\u200b$1\u200b"))}(e))}function Fr(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ur(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ut(i,-1)),n.splice(r,1)}function Vr(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ur(o,r),e>0&&(t[n-1][4]=r[4]);const s=fn(t,10+e);si(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function qr(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&si(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Br(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Br(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Br(e[1],e),n=e&&e[4]}e=n}}(e)}}function Br(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ce)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Ur(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Hr(t,e,n){return zr(t,e.parent,n)}function zr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return jt(r,n)}function Gr(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Kr(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function $r(t,e,n,r,i){null!==r?Gr(t,e,n,r,i):Kr(t,e,n)}function Wr(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function Qr(t,e,n){return Yr(t,e,n)}function Zr(t,e,n){return 40&t.type?jt(t,n):null}let Jr,Yr=Zr;function Xr(t,e){Yr=t,Jr=e}function ti(t,e,n,r){const i=Hr(t,r,e),o=e[11],s=Qr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)$r(o,i,n[a],s,!1);else $r(o,i,n,s,!1);void 0!==Jr&&Jr(o,r,e,n,i)}function ei(t,e){if(null!==e){const n=e.type;if(3&n)return jt(e,t);if(4&n)return ri(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ei(t,n);{const n=t[e.index];return ht(n)?ri(-1,n):xt(n)}}if(32&n)return Ar(e,t)()||xt(t[e.index]);{const n=ni(t,e);return null!==n?Array.isArray(n)?n[0]:ei(jr(t[16]),n):ei(t,e.next)}}return null}function ni(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ri(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ei(t,r)}return e[7]}function ii(t,e,n){const r=Wr(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function oi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Or(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)oi(t,e,n.child,r,i,o,!1),Dr(e,t,i,a,o);else if(32&u){const s=Ar(n,r);let u;for(;u=s();)Dr(e,t,i,u,o);Dr(e,t,i,a,o)}else 16&u?ai(t,e,r,n,i,o):Dr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function si(t,e,n,r,i,o){oi(n,r,t.firstChild,e,i,o,!1)}function ai(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Dr(e,t,i,a[u],o);else oi(t,e,a,s[3],i,o,!0)}function ui(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ci(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function li(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function hi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==li(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function fi(t){return 4===t.type&&"ng-template"!==t.value}function di(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function pi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!di(t,u,n)||""===u&&1===e.length){if(gi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!hi(t.attrs,c,n)){if(gi(r))return!1;s=!0}continue}const l=mi(8&r?"class":u,i,fi(t),n);if(-1===l){if(gi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==li(e,c,0)||2&r&&c!==t){if(gi(r))return!1;s=!0}}}}else{if(!s&&!gi(r)&&!gi(u))return!1;if(s&&gi(u))continue;s=!1,r=u|1&r}}return gi(r)||s}function gi(t){return 0==(1&t)}function mi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function yi(t,e,n=!1){for(let r=0;r<e.length;r++)if(pi(t,e[r],n))return!0;return!1}function vi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function bi(t,e){return t?":not("+e.trim()+")":e}function wi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||gi(s)||(e+=bi(o,i),i=""),r=s,o=o||!gi(r);n++}return""!==i&&(e+=bi(o,i)),e}const _i={};function Ei(t){Si(Ht(),Bt(),me()+t,Jt())}function Si(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ee(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Se(e,r,0,n)}ye(n)}function Oi(t,e){return t<<17|e<<2}function Ii(t){return t>>17&32767}function Ti(t){return 2|t}function Ci(t){return(131068&t)>>2}function xi(t,e){return-131069&t|e<<2}function Ai(t){return 1|t}function ji(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ae(i),n.contentQueries(2,e[o],o)}}}function ki(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ni(t,e,n,r,i){let o=t.data[e];if(null===o)o=Ri(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=$t();o.injectorIndex=null===t?-1:t.injectorIndex}return Wt(o,!0),o}function Ri(t,e,n,r,i){const o=Kt(),s=Qt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Di(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Pi(t,e,n){le(e);try{const r=t.viewQuery;null!==r&&fo(1,r,n);const i=t.template;null!==i&&Fi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ji(t,e),t.staticViewQueries&&fo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ao(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ge()}}function Li(t,e,n,r){const i=e[2];if(256==(256&i))return;le(e);const o=Jt();try{Ft(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Fi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ee(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Se(e,n,0,null),Oe(e,0)}if(function(t){for(let e=kr(t);null!==e;e=Nr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ut(r,1),n[2]|=1024}}}(e),function(t){for(let e=kr(t);null!==e;e=Nr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&Li(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ji(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ee(e,n)}else{const n=t.contentHooks;null!==n&&Se(e,n,1),Oe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ye(~r);else{const i=r,o=n[++t],s=n[++t];ie(o,i),s(2,e[i])}}}finally{ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)oo(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&fo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ee(e,n)}else{const n=t.viewHooks;null!==n&&Se(e,n,2),Oe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ut(e[3],-1))}finally{ge()}}function Mi(t,e,n,r){const i=e[10],o=!Jt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&Pi(t,e,r),Li(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Fi(t,e,n,r,i){const o=me();try{ye(-1),2&r&&e.length>20&&Si(t,e,20,Jt()),n(r,i)}finally{ye(o)}}function Ui(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Vi(t,e,n){qt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Or(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&to(e,n,r);const u=Je(e,t,a,n);Or(u,e),null!==s&&no(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,jt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{ye(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];oe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Qi(r,i)}}finally{ye(-1),oe(s)}}(t,e,n))}function qi(t,e,n=jt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Bi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Hi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Hi(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:_i);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function zi(t,e,n,r){const i=go(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&mo(t).push(r,i.length-1))}function Gi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ki(t,e,n,r,i,o,s,a){const u=jt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(vo(t,n,c,r,i),dt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):je(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function $i(t,e,n,r){let i=!1;if(qt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];yi(n,s.selectors,!1)&&(i||(i=[]),He(Ue(n,e),t,s.type),gt(s)?(Zi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Yi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Di(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ke(n.mergedAttrs,c.hostAttrs),Xi(t,n,e,u,c),Ji(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||fi(e)?null:ro(n,i);o.push(c),s=Gi(n,u,s),a=Gi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=ke(n.mergedAttrs,n.attrs),i}function Wi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Qi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Zi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ji(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function Yi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new Ce(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Wi(t,e,0,r,Di(t,n,i.hostVars,_i),i)}function to(t,e,n){const r=jt(e,t),i=Bi(n),o=t[10],s=uo(t,ki(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function eo(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function no(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ro(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function io(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function oo(t,e){const n=Rt(e,t);if(Lt(n)){const t=n[1];80&n[2]?Li(t,n,t.template,n[8]):n[5]>0&&so(n)}}function so(t){for(let n=kr(t);null!==n;n=Nr(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Li(t,e,t.template,e[8])}else e[5]>0&&so(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Lt(r)&&r[5]>0&&so(r)}}function ao(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Pi(r,n,n[8])}function uo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function co(t){for(;t;){t[2]|=64;const e=jr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function lo(t,e,n){const r=e[10];r.begin&&r.begin();try{Li(t,e,t.template,n)}catch(i){throw yo(e,i),i}finally{r.end&&r.end()}}function ho(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Dt(n),i=r[1];Mi(i,r,i.template,n)}}(t[8])}function fo(t,e,n){ae(0),e(t,n)}const po=(()=>Promise.resolve(null))();function go(t){return t[7]||(t[7]=[])}function mo(t){return t.cleanup||(t.cleanup=[])}function yo(t,e){const n=t[9],r=n?n.get(_r,null):null;r&&r.handleError(e)}function vo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function bo(t,e,n){const r=At(e,t);Lr(t[11],r,n)}function wo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const _o=new sn("INJECTOR",-1);class Eo{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const So=new sn("Set Injector scope."),Oo={},Io={},To=[];let Co;function xo(){return void 0===Co&&(Co=new Eo),Co}function Ao(t,e=null,n=null,r){return new jo(t,n,e||xo(),r)}class jo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(_o,Ro(void 0,this));const o=this.records.get(So);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=j.Default){this.assertNotDestroyed();const r=_n(this);try{if(!(n&j.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof sn)&&S(t);e=n&&this.injectableDefInScope(n)?Ro(ko(t),Oo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&j.Self?xo():this.parent).get(t,e=n&j.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{_n(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=I(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=I(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||To))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,Ro(a,Oo));const u=r.providers;if(null!=u&&!s){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Po(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Do(t)?Ro(void 0,t.useValue):Ro(No(t),Oo)}(t);if(Po(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ro(void 0,Oo,!0),e.factory=()=>On(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Oo&&(e.value=Io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ko(t){const e=S(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof sn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=dn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function No(t,e,n){let r;if(Po(t)){const e=p(t);return mt(e)||ko(e)}if(Do(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...On(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Sn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||ko(e);r=()=>new e(...On(t.deps))}var i;return r}function Ro(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Do(t){return null!==t&&"object"==typeof t&&bn in t}function Po(t){return"function"==typeof t}const Lo=function(t,e,n){return function(t,e=null,n=null,r){const i=Ao(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Mo=(()=>{class t{static create(t,e){return Array.isArray(t)?Lo(t,e,""):Lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new Eo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>Sn(_o)}),t.__NG_ELEMENT_ID__=-1,t})();function Fo(t,e){_e(Dt(t)[1],Gt())}function Uo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Vo(t.inputs),e.declaredInputs=Vo(t.declaredInputs),e.outputs=Vo(t.outputs);const n=i.hostBindings;n&&Ho(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&qo(t,o),s&&Bo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Uo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ke(i.hostAttrs,n=ke(n,i.hostAttrs))}}(r)}function Vo(t){return t===B?{}:t===z?[]:t}function qo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ho(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let zo=null;function Go(){if(!zo){const t=q.Symbol;if(t&&t.iterator)zo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(zo=n)}}}return zo}class Ko{constructor(t){this.wrapped=t}static wrap(t){return new Ko(t)}static unwrap(t){return Ko.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ko}}function $o(t){return!!Wo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Go()in t)}function Wo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Qo(t,e,n){return t[e]=n}function Zo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Jo(t,e,n,r){const i=Zo(t,e,n);return Zo(t,e+1,r)||i}function Yo(t,e,n,r){const i=Bt();return Zo(i,ee(),e)&&(Ht(),function(t,e,n,r,i,o){const s=jt(t,e);eo(e[11],s,o,t.value,n,r,i)}(ve(),i,t,e,n,r)),Yo}function Xo(t,e,n,r){return Zo(t,ee(),n)?e+y(n)+r:_i}function ts(t,e,n,r,i,o,s,a){const u=Bt(),c=Ht(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Ni(e,t,4,s||null,Mt(c,a));$i(e,n,l,Mt(c,u)),_e(e,l);const h=l.tViews=Hi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Wt(h,!1);const f=u[11].createComment("");ti(c,u,f,h),Or(f,u),uo(u,u[l]=io(f,u,f,h)),pt(h)&&Vi(c,u,h),null!=s&&qi(u,h,a)}function es(t){return Nt(Vt.lFrame.contextLView,20+t)}function ns(t,e=j.Default){const n=Bt();return null===n?Sn(t,e):Ke(Gt(),n,p(t),e)}function rs(t,e,n){const r=Bt();return Zo(r,ee(),e)&&Ki(Ht(),ve(),r,t,e,r[11],n,!1),rs}function is(t,e,n,r,i){const o=i?"class":"style";vo(t,n,e.inputs[o],o,r)}function os(t,e,n,r){const i=Bt(),o=Ht(),s=20+t,a=i[11],u=i[s]=Fr(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Ni(e,t,2,i,Mt(a,o));return $i(e,n,u,Mt(a,s)),null!==u.attrs&&wo(u,u.attrs,!1),null!==u.mergedAttrs&&wo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Wt(c,!0);const l=c.mergedAttrs;null!==l&&xe(a,u,l);const h=c.classes;null!==h&&ci(a,u,h);const f=c.styles;null!==f&&ui(a,u,f),64!=(64&c.flags)&&ti(o,i,u,c),0===Vt.lFrame.elementDepthCount&&Or(u,i),Vt.lFrame.elementDepthCount++,pt(c)&&(Vi(o,i,c),Ui(o,c,i)),null!==r&&qi(i,c)}function ss(){let t=Gt();Qt()?Zt():(t=t.parent,Wt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(_e(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&is(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&is(n,e,Bt(),e.stylesWithoutHost,!1)}function as(t,e,n,r){os(t,e,n,r),ss()}function us(t,e,n){const r=Bt(),i=Ht(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Mt(o,r),a=Ni(e,t,8,"ng-container",s);return null!==s&&wo(a,s,!0),$i(e,n,a,Mt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Wt(s,!0);const a=r[o]=r[11].createComment("");ti(i,r,a,s),Or(a,r),pt(s)&&(Vi(i,r,s),Ui(i,s,r)),null!=n&&qi(r,s)}function cs(){let t=Gt();const e=Ht();Qt()?Zt():(t=t.parent,Wt(t,!1)),e.firstCreatePass&&(_e(e,t),ft(t)&&e.queries.elementEnd(t))}function ls(){return Bt()}function hs(t){return!!t&&"function"==typeof t.then}function fs(t){return!!t&&"function"==typeof t.subscribe}const ds=fs;function ps(t,e,n=!1,r){const i=Bt(),o=Ht(),s=Gt();return function(t,e,n,r,i,o,s=!1,a){const u=pt(r),c=t.firstCreatePass&&mo(t),l=go(e);let h=!0;if(3&r.type){const f=jt(r,e),d=a?a(f):B,p=d.target||f,g=l.length,m=a?t=>a(xt(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ms(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ms(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ms(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ps}function gs(t,e,n){try{return!1!==e(n)}catch(r){return yo(t,r),!1}}function ms(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&co(s);let a=gs(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=gs(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ys(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function vs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?yi(t,o,!0):vi(r,o))return i}else n=i}return n}function bs(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=dn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?vs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ws(t,e=0,n){const r=Bt(),i=Ht(),o=Ni(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),Zt(),64!=(64&o.flags)&&function(t,e,n){ai(e[11],0,e,n,Hr(t,n,e),Qr(n.parent||e[6],n,e))}(i,r,o)}function _s(t,e,n){return Es(t,"",e,"",n),_s}function Es(t,e,n,r,i){const o=Bt(),s=Xo(o,e,n,r);return s!==_i&&Ki(Ht(),ve(),o,t,s,o[11],i,!1),Es}function Ss(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ii(o):Ci(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Os(t[a],e)&&(u=!0,t[a+1]=r?Ai(n):Ti(n)),a=r?Ii(n):Ci(n)}u&&(t[n+1]=r?Ti(o):Ai(o))}function Os(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ts(t){return t.substring(Is.key,Is.keyEnd)}function Cs(t,e){const n=Is.textEnd;return n===e?-1:(e=Is.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Is.key=e,n),xs(t,e,n))}function xs(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function As(t,e,n){return Rs(t,e,n,!1),As}function js(t,e){return Rs(t,e,null,!0),js}function ks(t){Ds(pn,Ns,t,!0)}function Ns(t,e){for(let n=function(t){return function(t){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=t.length}(t),Cs(t,xs(t,0,Is.textEnd))}(e);n>=0;n=Cs(e,n))pn(t,Ts(e),!0)}function Rs(t,e,n,r){const i=Bt(),o=Ht(),s=ne(2);o.firstUpdatePass&&Ls(o,t,s,r),e!==_i&&Zo(i,s,e)&&Us(o,o.data[me()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Mn(t)))),t}(e,n),r,s)}function Ds(t,e,n,r){const i=Ht(),o=ne(2);i.firstUpdatePass&&Ls(i,null,o,r);const s=Bt();if(n!==_i&&Zo(s,o,n)){const a=i.data[me()];if(Bs(a,r)&&!Ps(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),is(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===_i&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,f!==d&&(g=h,p=d)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=d),null!==g&&Us(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Mn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ps(t,e){return e>=t.expandoStartIndex}function Ls(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[me()],s=Ps(t,n);Bs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Fs(n=Ms(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ms(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ci(r))return t[Ii(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ms(null,t,e,n[1],r),n=Fs(n,e.attrs,r),function(t,e,n,r){t[Ii(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Fs(r,t[o].hostAttrs,n);return Fs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ii(s),u=Ci(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||mn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ii(t[a+1]);t[r+1]=Oi(e,a),0!==e&&(t[e+1]=xi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Oi(a,0),0!==a&&(t[a+1]=xi(t[a+1],r)),a=r;else t[r+1]=Oi(u,0),0===a?a=r:t[u+1]=xi(t[u+1],r),u=r;l&&(t[r+1]=Ti(t[r+1])),Ss(t,c,r,!0),Ss(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&mn(o,e)>=0&&(n[r+1]=Ai(n[r+1]))}(e,c,t,r,o),s=Oi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Ms(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Fs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Fs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Us(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];qs(1==(1&c)?Vs(u,e,n,i,Ci(c),s):void 0)||(qs(o)||2==(2&c)&&(o=Vs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Cr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Cr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,At(me(),n),i,o))}function Vs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===_i&&(l=c?H:void 0);let h=c?gn(l,r):u===r?l:void 0;if(o&&!qs(h)&&(h=gn(e,r)),qs(h)&&(a=h,s))return a;const f=t[i+1];i=s?Ii(f):Ci(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=gn(t,r))}return a}function qs(t){return void 0!==t}function Bs(t,e){return 0!=(t.flags&(e?16:32))}function Hs(t,e=""){const n=Bt(),r=Ht(),i=t+20,o=r.firstCreatePass?Ni(r,i,1,e,null):r.data[i],s=n[i]=Pr(n[11],e);ti(r,n,s,o),Wt(o,!1)}function zs(t){return Gs("",t,""),zs}function Gs(t,e,n){const r=Bt(),i=Xo(r,t,e,n);return i!==_i&&bo(r,me(),i),Gs}function Ks(t,e,n,r,i){const o=Bt(),s=function(t,e,n,r,i,o){const s=Jo(t,te(),n,i);return ne(2),s?e+y(n)+r+y(i)+o:_i}(o,t,e,n,r,i);return s!==_i&&bo(o,me(),s),Ks}function $s(t,e,n,r,i,o,s,a,u){Ds(pn,Ns,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Jo(t,e,n,r);return Jo(t,e+2,i,o)||s}(t,te(),n,i,s,u);return ne(4),l?e+y(n)+r+y(i)+o+y(s)+a+y(u)+c:_i}(Bt(),t,e,n,r,i,o,s,a,u),!0)}function Ws(t,e,n){const r=Bt();return Zo(r,ee(),e)&&Ki(Ht(),ve(),r,t,e,r[11],n,!0),Ws}const Qs=void 0;var Zs=["en",[["a","p"],["AM","PM"],Qs],[["AM","PM"],Qs,Qs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qs,"{1} 'at' {0}",Qs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Js={};function Ys(t,e,n){"string"!=typeof e&&(n=e,e=t[ra.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Js[e]=t,n&&(Js[e][ra.ExtraData]=n)}function Xs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=na(e);if(n)return n;const r=e.split("-")[0];if(n=na(r),n)return n;if("en"===r)return Zs;throw new Error(`Missing locale data for the locale "${t}".`)}function ta(t){return Xs(t)[ra.CurrencyCode]||null}function ea(t){return Xs(t)[ra.PluralCase]}function na(t){return t in Js||(Js[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Js[t]}var ra=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ia=["zero","one","two","few","many"],oa={marker:"element"},sa={marker:"ICU"};var aa=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let ua="en-US";function ca(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ua=t.toLowerCase().replace(/_/g,"-"))}function la(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Zr(t,0,n):xt(n[i])}function ha(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Gr(t,s,n[o[e]],a,!1)}}function fa(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];da(r)||pa(r,e)&&null===ga(r)&&ma(r,e.index)}}function da(t){return!(64&t.type)}function pa(t,e){return da(e)||t.index>e.index}function ga(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function ma(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(Xr(la,ha),t.insertBeforeIndex=e)}function ya(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function va(t,e,n){const r=Ri(t,n,64,null,null);return fa(e,r),r}function ba(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let wa=0,_a=0;function Ea(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Pr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=Wr(i,r)),c===s?(l=r,h=o):(l=null,h=xt(n[c])),null!==h){const e=(131070&u)>>>1;Gr(i,h,n[e],l,!1);const r=ya(t,e);if(null!==r&&"object"==typeof r){const e=ba(r,n);null!==e&&Ea(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const f=e[++a],d=e[++a];eo(i,At(u>>>1,n),null,null,f,d,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case sa:const t=e[++a],r=e[++a];null===n[r]&&Or(n[r]=Mr(i,t),n);break;case oa:const o=e[++a],s=e[++a];null===n[s]&&Or(n[s]=Fr(i,o,null),n)}}}function Sa(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=y(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?eo(e[11],e[a],null,c,o,i,u):Ki(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Lr(e[11],l,i);break;case 2:Ia(t,ya(t,a),e,i);break;case 3:Oa(t,ya(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=ya(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Oa(t,n,r,e)}}o+=a}}function Oa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=wa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Sa(t,r,e.update[i],n,o)}}function Ia(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ea(e)(parseInt(t,10)),r=ia[n];return void 0!==r?r:"other"}(e,ua);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(ba(e,n)!==i&&(Ta(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ea(t,e.create[i],n,r)}}function Ta(t,e,n){let r=ba(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=At(r,n);null!==t&&ii(n[11],t)}else Ta(t,ya(t,~r),n)}}}const Ca=/\ufffd(\d+):?\d*\ufffd/gi,xa=/\ufffd(\d+)\ufffd/,Aa=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,ja=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ka=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Na=/\uE500/g;function Ra(t,e,n,r,i,o,s){const a=Di(t,r,1,null);let u=a<<aa.SHIFT,c=$t();e===c&&(c=null),null===c&&(u|=aa.APPEND_EAGERLY),s&&(u|=aa.COMMENT,void 0===xr&&(xr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=ba(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Ri(t,a,s?32:1,null===o?"":o,null);fa(n,l);const h=l.index;return Wt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(Xr(la,ha),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Da(t,e,n,r,i,o,s){const a=s.match(Ca),u=Ra(t,e,n,o,r,a?null:s,!1);a&&Pa(i,s,u.index)}function Pa(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split(Ca);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=La(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function La(t){return 1<<Math.min(t,31)}function Ma(t){let e,n,r="",i=0,o=!1;for(;null!==(e=ja.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Fa(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Di(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(La(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=qa(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Ua(t){const e=[],n=[];let r=1,i=0;const o=Va(t=t.replace(Aa,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Va(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Va(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Aa.test(n)?r.push(Ua(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function qa(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Gn(It()).getInertBodyElement(s),f=gr(h)||h;return f?Ba(t,e,n,r,u,c,l,f,i,a,0):0}function Ba(t,e,n,r,i,o,s,a,u,c,l){let h=0,f=a.firstChild;for(;f;){const a=Di(t,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const d=f,p=d.tagName.toLowerCase();if(ir.hasOwnProperty(p)){Ga(i,oa,p,u,a),t.data[a]=p;const g=d.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Ca)?ar.hasOwnProperty(n)&&(or[n]?Pa(s,e.value,a,e.name,Zn):sr[n]?Pa(s,e.value,a,e.name,Jn):Pa(s,e.value,a,e.name)):Ka(i,a,e)}h=Ba(t,e,n,r,i,o,s,f,a,c,l+1)|h,Ha(o,a,l)}break;case Node.TEXT_NODE:const g=f.textContent||"",m=g.match(Ca);Ga(i,null,m?"":g,u,a),Ha(o,a,l),m&&(h=Pa(s,g,a)|h);break;case Node.COMMENT_NODE:const y=xa.exec(f.textContent||"");if(y){const e=c[parseInt(y[1],10)];Ga(i,sa,"",u,a),Fa(t,n,r,u,e,a),za(o,a,l)}}f=f.nextSibling}return h}function Ha(t,e,n){0===n&&t.push(e)}function za(t,e,n){0===n&&(t.push(~e),t.push(e))}function Ga(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function Ka(t,e,n){t.push(e<<1|1,n.name,n.value)}function $a(t,e,n){(function(t,e,n=-1){const r=Ht(),i=Bt(),o=20+t,s=Mt(r.consts,e),a=$t();r.firstCreatePass&&function(t,e,n,r,i,o){const s=$t(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Ma(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Ma(t.substring(n,r))}}(i,o),h.replace(Na," ")).split(ka);var h;for(let f=0;f<l.length;f++){let r=l[f];if(0==(1&f)){const o=Va(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Da(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Fa(t,n,u,e,r,Ra(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),20+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Wt($t(),!1);else{const e=va(t,c[0],n);c.unshift([]),Wt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=zr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&aa.COMMENT)===aa.COMMENT,c=(s&aa.APPEND_EAGERLY)===aa.APPEND_EAGERLY,l=s>>>aa.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Pr(i,a)),c&&null!==n&&Gr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),re(!0)})(t,e,n),re(!1)}function Wa(t){return Zo(Bt(),ee(),t)&&(wa|=1<<Math.min(_a,31)),_a++,Wa}function Qa(t){!function(t,e,n){if(_a>0){const r=t.data[n];Sa(t,e,Array.isArray(r)?r:r.update,te()-_a-1,wa)}wa=0,_a=0}(Ht(),Bt(),t+20)}function Za(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Za(t[o],e,n,r,i);else{const o=Ht(),s=Bt();let a=Po(t)?t:p(t.provide),u=No(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Po(t)||!t.multi){const r=new Ce(u,i,ns),d=Xa(a,e,i?l:l+f,h);-1===d?(He(Ue(c,s),o,a),Ja(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Xa(a,e,l+f,h),p=Xa(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){He(Ue(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ce(t,n,ns);return o.multi=[],o.index=e,o.componentProviders=0,Ya(o,i,r&&!n),o}(i?eu:tu,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Ja(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ja(o,t,d>-1?d:p,Ya(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ja(t,e,n,r){const i=Po(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ya(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Xa(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tu(t,e,n,r){return nu(this.multi,[])}function eu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Je(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),nu(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],nu(i,o);return o}function nu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ru(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=gt(t);Za(n,r.data,r.blueprint,i,!0),Za(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class iu{}class ou{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let su=(()=>{class t{}return t.NULL=new ou,t})();function au(...t){}function uu(t,e){return new lu(jt(t,e))}const cu=function(){return uu(Gt(),Bt())};let lu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=cu,t})();function hu(t){return t instanceof lu?t.nativeElement:t}class fu{}let du=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pu(),t})();const pu=function(){const t=Bt(),e=Rt(Gt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let gu=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class mu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const yu=new mu("11.2.6");class vu{constructor(){}supports(t){return $o(t)}create(t){return new wu(t)}}const bu=(t,e)=>e;class wu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||bu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ou(n,r,i)?e:n,s=Ou(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!$o(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Go()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new _u(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Su),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Su),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class _u{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Eu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Su{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Eu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ou(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Iu{constructor(){}supports(t){return t instanceof Map||Wo(t)}create(){return new Tu}}class Tu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Wo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Cu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Cu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xu(){return new Au([new vu])}let Au=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||xu()),deps:[[t,new xn,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:xu}),t})();function ju(){return new ku([new Iu])}let ku=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ju()),deps:[[t,new xn,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:ju}),t})();function Nu(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),ht(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Nu(e[1],e,n,r)}const s=n.type;if(8&s)Nu(t,e,n.child,r);else if(32&s){const t=Ar(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ni(e,n);if(Array.isArray(t))r.push(...t);else{const n=jr(e[16]);Nu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ru{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Nu(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Vr(t,n),fn(e,n))}this._attachedToViewContainer=!1}qr(this._lView[1],this._lView)}onDestroy(t){zi(this._lView[1],this._lView,null,t)}markForCheck(){co(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){lo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Yt(!0);try{lo(t,e,n)}finally{Yt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,si(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Du extends Ru{constructor(t){super(t),this._view=t}detectChanges(){ho(this._view)}checkNoChanges(){!function(t){Yt(!0);try{ho(t)}finally{Yt(!1)}}(this._view)}get context(){return null}}const Pu=Mu;let Lu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pu,t.__ChangeDetectorRef__=!0,t})();function Mu(t=!1){return function(t,e,n){if(!n&&dt(t)){const n=Rt(t.index,e);return new Ru(n,n)}return 47&t.type?new Ru(e[16],e):null}(Gt(),Bt(),t)}const Fu=[new Iu],Uu=new Au([new vu]),Vu=new ku(Fu),qu=function(){return Gu(Gt(),Bt())};let Bu=(()=>{class t{}return t.__NG_ELEMENT_ID__=qu,t})();const Hu=Bu,zu=class extends Hu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ki(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Pi(e,n,t),new Ru(n)}};function Gu(t,e){return 4&t.type?new zu(e,t,uu(t,e)):null}class Ku{}class $u{}const Wu=function(){return tc(Gt(),Bt())};let Qu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Wu,t})();const Zu=Qu,Ju=class extends Zu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return uu(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Be(this._hostTNode,this._hostLView);if(Re(t)){const e=Pe(t,this._hostLView),n=De(t);return new tn(e[1].data[n+8],e)}return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Yu(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ku,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ju(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],hn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ri(i,o),a=n[11],u=Wr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,si(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),hn(Xu(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Yu(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Vr(this._lContainer,e);n&&(fn(Xu(this._lContainer),e),qr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Vr(this._lContainer,e);return n&&null!=fn(Xu(this._lContainer),e)?new Ru(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Yu(t){return t[8]}function Xu(t){return t[8]||(t[8]=[])}function tc(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=jt(t,e);Gr(n,Wr(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=io(r,e,i,t),uo(e,n)}return new Ju(n,t,e)}const ec={};class nc extends su{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new oc(e,this.ngModule)}}function rc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ic=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ir});class oc extends iu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(wi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return rc(this.componentDef.inputs)}get outputs(){return rc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ec,i);return o!==ec||r===ec?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(fu,Ct),s=i.get(gu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Fr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ir,clean:po,playerHandler:null,flags:0},f=Hi(0,null,null,1,0,null,null,null,null,null),d=ki(null,f,h,l,null,null,o,a,s,i);let p,g;le(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Ni(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(wo(a,u,!0),null!==t&&(xe(i,t,u),null!==a.classes&&ci(i,t,a.classes),null!==a.styles&&ui(i,t,a.styles)));const c=r.createRenderer(t,e),l=ki(n,Bi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(He(Ue(a,n),s,e.type),Zi(s,a),Yi(a,n.length,1)),uo(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)xe(a,c,["ng-version",yu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!gi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&xe(a,c,t),e&&e.length>0&&ci(a,c,e.join(" "))}if(g=kt(f,20),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Xi(t,r,e,Di(t,e,1,null),n));const i=Je(e,t,r.directiveStart,r);Or(i,e);const o=jt(r,e);return o&&Or(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ye(a.index),Wi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Qi(e,s)),s}(t,this.componentDef,d,h,[Fo]),Pi(f,d,null)}finally{ge()}return new sc(this.componentType,p,uu(g,d),d,g)}}class sc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Du(r),this.componentType=t}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ac=new Map;class uc extends Ku{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nc(this);const n=ct(t),r=t[Q]||null;r&&ca(r),this._bootstrapComponents=Tr(n.bootstrap),this._r3Injector=Ao(t,e,[{provide:Ku,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Mo.THROW_IF_NOT_FOUND,n=j.Default){return t===Mo||t===Ku||t===_o?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class cc extends $u{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,ac.get(i),n),ac.set(i,n));const o=Tr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new uc(this.moduleType,t)}}function lc(t,e,n,r){return pc(Bt(),Xt(),t,e,n,r)}function hc(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Jo(t,a,i,o)?Qo(t,a+2,s?r.call(s,i,o):r(i,o)):dc(t,a+2)}(Bt(),Xt(),t,e,n,r,i)}function fc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Jo(t,e,n,r);return Zo(t,e+2,i)||o}(t,u,i,o,s)?Qo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):dc(t,u+3)}(Bt(),Xt(),t,e,n,r,i,o)}function dc(t,e){const n=t[e];return n===_i?void 0:n}function pc(t,e,n,r,i,o){const s=e+n;return Zo(t,s,i)?Qo(t,s+1,o?r.call(o,i):r(i)):dc(t,s+1)}function gc(t,e){const n=Ht();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=mt(r.type)),s=N(ns);try{const t=Me(!1),e=o();return Me(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{N(s)}}function mc(t,e,n){const r=t+20,i=Bt(),o=Nt(i,r);return function(t,e){return Ko.isWrapped(e)&&(e=Ko.unwrap(e),t[te()]=_i),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?pc(i,Xt(),e,o.transform,n,o):o.transform(n))}const yc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function vc(){return this._results[Go()]()}class bc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Go(),n=bc.prototype;n[e]||(n[e]=vc)}get changes(){return this._changes||(this._changes=new yc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class wc{constructor(t){this.queryList=t,this.matches=null}clone(){return new wc(this.queryList)}setDirty(){this.queryList.setDirty()}}class _c{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new _c(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Pc(t,e).matches&&this.queries[e].setDirty()}}class Ec{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Sc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Sc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Oc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Oc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ic(e,i)),this.matchTNodeWithReadOption(t,e,Ze(e,t,i,!1,!1))}else n===Bu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===lu||r===Qu||r===Bu&&4&e.type)this.addMatch(e.index,-2);else{const n=Ze(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ic(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Tc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?uu(t,e):4&t.type?Gu(t,e):null}(e,t):-2===n?function(t,e,n){return n===lu?uu(e,t):n===Bu?Gu(e,t):n===Qu?tc(e,t):void 0}(t,e,r):Je(t,t[1],n,e)}function Cc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Tc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function xc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Cc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&xc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];xc(n[1],n,i,r)}}}}}return r}function Ac(t){const e=Bt(),n=Ht(),r=se();ae(r+1);const i=Pc(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?xc(n,e,r,[]):Cc(n,e,i,r);t.reset(o,hu),t.notifyOnChanges()}return!0}return!1}function jc(t,e,n){const r=Ht();r.firstCreatePass&&(Dc(r,new Ec(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Rc(r,Bt(),e)}function kc(t,e,n,r){const i=Ht();if(i.firstCreatePass){const o=Gt();Dc(i,new Ec(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Rc(i,Bt(),n)}function Nc(){return t=Bt(),e=se(),t[19].queries[e].queryList;var t,e}function Rc(t,e,n){const r=new bc(4==(4&n));zi(t,e,r,r.destroy),null===e[19]&&(e[19]=new _c),e[19].queries.push(new wc(r))}function Dc(t,e,n){null===t.queries&&(t.queries=new Sc),t.queries.track(new Oc(e,n))}function Pc(t,e){return t.queries.getByIndex(e)}function Lc(t,e){return Gu(t,e)}function Mc(t=j.Default){const e=Mu(!0);if(null!=e||t&j.Optional)return e;b("ChangeDetectorRef")}const Fc=new sn("Application Initializer");let Uc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=au,this.reject=au,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();hs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Sn(Fc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Vc=new sn("AppId"),qc={provide:Vc,useFactory:function(){return`${Bc()}${Bc()}${Bc()}`},deps:[]};function Bc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Hc=new sn("Platform Initializer"),zc=new sn("Platform ID"),Gc=new sn("appBootstrapListener");let Kc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const $c=new sn("LocaleId"),Wc=new sn("DefaultCurrencyCode");class Qc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Zc=function(t){return new cc(t)},Jc=Zc,Yc=function(t){return Promise.resolve(Zc(t))},Xc=function(t){const e=Zc(t),n=Tr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new oc(n)),t},[]);return new Qc(e,n)},tl=Xc,el=function(t){return Promise.resolve(Xc(t))};let nl=(()=>{class t{constructor(){this.compileModuleSync=Jc,this.compileModuleAsync=Yc,this.compileModuleAndAllComponentsSync=tl,this.compileModuleAndAllComponentsAsync=el}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const rl=(()=>Promise.resolve(0))();function il(t){"undefined"==typeof Zone?rl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ol{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yc(!1),this.onMicrotaskEmpty=new yc(!1),this.onStable=new yc(!1),this.onError=new yc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ul(t),al(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ul(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return cl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ll(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return cl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ll(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ul(t),al(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ol.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ol.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,sl,au,au);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const sl={};function al(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ul(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function cl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ll(t){t._nesting--,al(t)}class hl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yc,this.onMicrotaskEmpty=new yc,this.onStable=new yc,this.onError=new yc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let fl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ol.assertNotInAngularZone(),il(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())il(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Sn(ol))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),dl=(()=>{class t{constructor(){this._applications=new Map,yl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return yl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class pl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function gl(t){yl=t}let ml,yl=new pl,vl=!0,bl=!1;function wl(){return bl=!0,vl}function _l(){if(bl)throw new Error("Cannot enable prod mode after platform setup.");vl=!1}const El=new sn("AllowMultipleToken");class Sl{constructor(t,e){this.name=t,this.token=e}}function Ol(t,e,n=[]){const r=`Platform: ${e}`,i=new sn(r);return(e=[])=>{let o=Il();if(!o||o.injector.get(El,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:So,useValue:"platform"});!function(t){if(ml&&!ml.destroyed&&!ml.injector.get(El,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ml=t.get(Tl);const e=t.get(Hc,null);e&&e.forEach(t=>t())}(Mo.create({providers:t,name:r}))}return function(t){const e=Il();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Il(){return ml&&!ml.destroyed?ml:null}let Tl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new hl:("zone.js"===t?void 0:t)||new ol({enableLongStackTrace:wl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ol,useValue:n}];return n.run(()=>{const e=Mo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(_r,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Al(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return hs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Uc);return t.runInitializers(),t.donePromise.then(()=>(ca(i.injector.get($c,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Cl({},e);return function(t,e,n){const r=new cc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(xl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Sn(Mo))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Cl(t,e){return Array.isArray(e)?e.reduce(Cl,t):Object.assign(Object.assign({},t),e)}let xl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ol.assertNotInAngularZone(),il(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ol.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof iu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ku),i=n.create(Mo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(fl,null),a=s&&i.injector.get(dl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Al(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Al(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Gc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Sn(ol),Sn(Mo),Sn(_r),Sn(su),Sn(Uc))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Al(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class jl{}class kl{}const Nl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Rl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Nl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Dl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Dl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Sn(nl),Sn(kl,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Dl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Pl=function(t){return null},Ll=Ol(null,"core",[{provide:zc,useValue:"unknown"},{provide:Tl,deps:[Mo]},{provide:dl,deps:[]},{provide:Kc,deps:[]}]),Ml=[{provide:xl,useClass:xl,deps:[ol,Mo,_r,su,Uc]},{provide:ic,deps:[ol],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Uc,useClass:Uc,deps:[[new Cn,Fc]]},{provide:nl,useClass:nl,deps:[]},qc,{provide:Au,useFactory:function(){return Uu},deps:[]},{provide:ku,useFactory:function(){return Vu},deps:[]},{provide:$c,useFactory:function(t){return ca(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new Tn($c),new Cn,new xn]]},{provide:Wc,useValue:"USD"}];let Fl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Sn(xl))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:Ml}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.Q("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{Object(u.W)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.P.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(u.C))},t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({providers:[I]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=d){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var b=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Zb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Jb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Zb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Zb)(s).location;return new b(Object(r.Zb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(m),r.Zb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Jb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new _(Object(r.Zb)(m),Object(r.Zb)(a))}function S(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.nb;class T{}let C=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.v))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let A=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.qb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.wb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.t),r.Nb(r.u),r.Nb(r.l),r.Nb(r.F))},t.\u0275dir=r.Ib({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class j{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new j(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.R),r.Nb(r.M),r.Nb(r.t))},t.\u0275dir=r.Ib({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.R),r.Nb(r.M))},t.\u0275dir=r.Ib({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.wb)(e)}'.`)}let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[{provide:T,useClass:C}]}),t})();function M(t){return"server"===t}let F=(()=>{class t{}return t.\u0275prov=Object(r.Jb)({token:t,providedIn:"root",factory:()=>new U(Object(r.Zb)(s),window)}),t})();class U{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class q extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new q,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=H||(H=document.querySelector("base"),H)?H.getAttribute("href"):null;return null==e?null:(n=e,B||(B=document.createElement("a")),B.setAttribute("href",n),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname);var n}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let B,H=null;const z=new r.r("TRANSITION_ID"),G=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[z,s,r.s],multi:!0}];class K{static init(){Object(r.Y)(new K)}addToWindow(t){r.pb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.pb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.pb.getAllAngularRootElements=()=>t.getAllRootElements(),r.pb.frameworkStabilizers||(r.pb.frameworkStabilizers=[]),r.pb.frameworkStabilizers.push(t=>{const e=r.pb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const $=new r.r("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb($),r.Zb(r.A))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();class Q{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Z=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),J=(()=>{class t extends Z{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.S.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.S.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(W),r.Zb(J),r.Zb(r.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.H.DashCase|r.H.Important)?t.style.setProperty(e,n,i&r.H.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.H.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends Q{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends Q{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const ft=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){q.makeCurrent(),K.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.vb)(document),document},deps:[]}],dt=Object(r.T)(r.X,"browser",ft),pt=[[],{provide:r.ab,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:$,useClass:st,multi:!0,deps:[s,r.A,r.C]},{provide:$,useClass:ht,multi:!0,deps:[s]},[],{provide:nt,useClass:nt,deps:[W,J,r.c]},{provide:r.G,useExisting:nt},{provide:Z,useExisting:J},{provide:J,useClass:J,deps:[s]},{provide:r.N,useClass:r.N,deps:[r.A]},{provide:W,useClass:W,deps:[$,r.A]},[]];let gt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:z,useExisting:r.c},G]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(t,12))},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:pt,imports:[L,r.f]}),t})();"undefined"!=typeof window&&window;var mt=n("Cfvw"),yt=n("LRne"),vt=n("XNiG"),bt=n("9ppp");class wt extends vt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bt.a;return this._value}next(t){super.next(this._value=t)}}var _t=n("z+Ro"),Et=n("DH7j"),St=n("7o/Q");class Ot extends St.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class It extends St.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Tt=n("SeVD"),Ct=n("HDdC");function xt(t,e,n,r,i=new It(t,n,r)){if(!i.closed)return e instanceof Ct.a?e.subscribe(i):Object(Tt.a)(e)(i)}var At=n("yCtX");const jt={};class kt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nt(t,this.resultSelector))}}class Nt extends Ot{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(jt),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(xt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===jt?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Rt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Dt=n("bHdf");function Pt(...t){return Object(Dt.a)(1)(Object(yt.a)(...t))}var Lt=n("EY2u");function Mt(t){return new Ct.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(mt.a)(n):Object(Lt.b)()).subscribe(e)})}var Ft=n("EQ5u"),Ut=n("lJxs"),Vt=n("zx2A");function qt(t,e){return"function"==typeof e?n=>n.pipe(qt((n,r)=>Object(mt.a)(t(n,r)).pipe(Object(Ut.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Bt(t))}class Bt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ht(t,this.project))}}class Ht extends Vt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Vt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Vt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const zt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Gt(t){return e=>0===t?Object(Lt.b)():e.lift(new Kt(t))}class Kt{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new $t(t,this.total))}}class $t extends St.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wt(...t){const e=t[t.length-1];return Object(_t.a)(e)?(t.pop(),n=>Pt(t,n,e)):e=>Pt(t,e)}function Qt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Zt(t,e,n))}}class Zt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Jt(t,this.accumulator,this.seed,this.hasSeed))}}class Jt extends St.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Yt(t,e){return function(n){return n.lift(new Xt(t,e))}}class Xt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new te(t,this.predicate,this.thisArg))}}class te extends St.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function ee(t){return function(e){const n=new ne(t),r=e.lift(n);return n.caught=r}}class ne{constructor(t){this.selector=t}call(t,e){return e.subscribe(new re(t,this.selector,this.caught))}}class re extends Vt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Vt.a(this);this.add(r);const i=Object(Vt.c)(n,r);i!==r&&this.add(i)}}}var ie=n("5+tZ");function oe(t,e){return Object(ie.a)(t,e,1)}function se(t){return function(e){return 0===t?Object(Lt.b)():e.lift(new ae(t))}}class ae{constructor(t){if(this.total=t,this.total<0)throw new zt}call(t,e){return e.subscribe(new ue(t,this.total))}}class ue extends St.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ce(t=fe){return e=>e.lift(new le(t))}class le{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new he(t,this.errorFactory))}}class he extends St.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(tw){t=tw}this.destination.error(t)}}}function fe(){return new Rt}function de(t=null){return e=>e.lift(new pe(t))}class pe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ge(t,this.defaultValue))}}class ge extends St.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var me=n("SpAZ");function ye(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Yt((e,n)=>t(e,n,r)):me.a,Gt(1),n?de(e):ce(()=>new Rt))}var ve=n("vkgz"),be=n("x+ZX"),we=n("quSY");class _e{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Ee(t,this.callback))}}class Ee extends St.a{constructor(t,e){super(t),this.add(new we.a(e))}}class Se{constructor(t,e){this.id=t,this.url=e}}class Oe extends Se{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ie extends Se{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Te extends Se{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ce extends Se{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xe extends Se{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Se{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class je extends Se{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ke extends Se{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne extends Se{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class De{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pe{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fe{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ve{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qe(t){return new Ve(t)}function Be(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function He(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ge(t[i],e[i]))return!1;return!0}function Ge(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ke(t){return Array.prototype.concat.apply([],t)}function $e(t){return t.length>0?t[t.length-1]:null}function We(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qe(t){return Object(r.rb)(t)?t:Object(r.sb)(t)?Object(mt.a)(Promise.resolve(t)):Object(yt.a)(t)}function Ze(t,e,n){return n?function(t,e){return ze(t,e)}(t.queryParams,e.queryParams)&&Je(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ge(t[n],e[n]))}(t.queryParams,e.queryParams)&&Ye(t.root,e.root)}function Je(t,e){if(!rn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Je(t.children[n],e.children[n]))return!1}return!0}function Ye(t,e){return Xe(t,e,e.segments)}function Xe(t,e,n){if(t.segments.length>n.length)return!!rn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!rn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ye(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!rn(t.segments,r)&&!!t.children.primary&&Xe(t.children.primary,e,i)}}class tn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return an.serialize(this)}}class en{constructor(t,e){this.segments=t,this.children=e,this.parent=null,We(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return un(this)}}class nn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qe(this.parameters)),this._parameterMap}toString(){return gn(this)}}function rn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class on{}class sn{parse(t){const e=new wn(t);return new tn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${cn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${hn(e)}=${hn(t)}`).join("&"):`${hn(e)}=${hn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const an=new sn;function un(t){return t.segments.map(t=>gn(t)).join("/")}function cn(t,e){if(!t.hasChildren())return un(t);if(e){const e=t.children.primary?cn(t.children.primary,!1):"",n=[];return We(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${cn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return We(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),We(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[cn(t.children.primary,!1)]:[`${n}:${cn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${un(t)}/${e[0]}`:`${un(t)}/(${e.join("//")})`}}function ln(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hn(t){return ln(t).replace(/%3B/gi,";")}function fn(t){return ln(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dn(t){return decodeURIComponent(t)}function pn(t){return dn(t.replace(/\+/g,"%20"))}function gn(t){return`${fn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${fn(t)}=${fn(e[t])}`).join("")}`;var e}const mn=/^[^\/()?;=#]+/;function yn(t){const e=t.match(mn);return e?e[0]:""}const vn=/^[^=?&#]+/,bn=/^[^?&#]+/;class wn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new en(t,e)),n}parseSegment(){const t=yn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new nn(dn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=yn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=yn(this.remaining);t&&(n=t,this.capture(n))}t[dn(e)]=dn(n)}parseQueryParam(t){const e=function(t){const e=t.match(vn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(bn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=pn(e),i=pn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=yn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new en([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class _n{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=En(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=En(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Sn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Sn(t,this._root).map(t=>t.value)}}function En(t,e){if(t===e.value)return e;for(const n of e.children){const e=En(t,n);if(e)return e}return null}function Sn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Sn(t,n);if(r.length)return r.unshift(e),r}return[]}class On{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function In(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Tn extends _n{constructor(t,e){super(t),this.snapshot=e,Nn(this,t)}toString(){return this.snapshot.toString()}}function Cn(t,e){const n=function(t,e){const n=new jn([],{},{},"",{},"primary",e,null,t.root,-1,{});return new kn("",new On(n,[]))}(t,e),r=new wt([new nn("",{})]),i=new wt({}),o=new wt({}),s=new wt({}),a=new wt(""),u=new xn(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new Tn(new On(u,[]),n)}class xn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ut.a)(t=>qe(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ut.a)(t=>qe(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function An(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class jn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kn extends _n{constructor(t,e){super(e),this.url=t,Nn(this,e)}toString(){return Rn(this._root)}}function Nn(t,e){e.value._routerState=t,e.children.forEach(e=>Nn(t,e))}function Rn(t){const e=t.children.length>0?` { ${t.children.map(Rn).join(", ")} } `:"";return`${t.value}${e}`}function Dn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Pn(t,e){return ze(t.params,e.params)&&function(t,e){return rn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Pn(t.parent,e.parent))}function Ln(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ln(t,e,r);return Ln(t,e)})}(t,e,n);return new On(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Mn(e,t),t}{const n=new xn(new wt((r=e.value).url),new wt(r.params),new wt(r.queryParams),new wt(r.fragment),new wt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ln(t,e));return new On(n,i)}}var r}function Mn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Mn(t.children[n],e.children[n])}function Fn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Un(t){return"object"==typeof t&&null!=t&&t.outlets}function Vn(t,e,n,r,i){let o={};return r&&We(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new tn(n.root===t?e:qn(n.root,t,e),o,i)}function qn(t,e,n){const r={};return We(t.children,(t,i)=>{r[i]=t===e?n:qn(t,e,n)}),new en(t.segments,r)}class Bn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Fn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Un);if(r&&r!==$e(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function zn(t,e,n){if(t||(t=new en([],{})),0===t.segments.length&&t.hasChildren())return Gn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Un(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Qn(a,u,e))return o;r+=2}else{if(!Qn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new en(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new en(t.segments.slice(r.pathIndex),t.children),Gn(e,0,i)}return r.match&&0===i.length?new en(t.segments,{}):r.match&&!t.hasChildren()?Kn(t,e,n):r.match?Gn(t,0,i):Kn(t,e,n)}function Gn(t,e,n){if(0===n.length)return new en(t.segments,{});{const r=function(t){return Un(t[0])?t[0].outlets:{primary:t}}(n),i={};return We(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=zn(t.children[r],e,n))}),We(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new en(t.segments,i)}}function Kn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Un(o)){const t=$n(o.outlets);return new en(r,t)}if(0===i&&Fn(n[0])){r.push(new nn(t.segments[e].path,Wn(n[0]))),i++;continue}const s=Un(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Fn(a)?(r.push(new nn(s,Wn(a))),i+=2):(r.push(new nn(s,{})),i++)}return new en(r,{})}function $n(t){const e={};return We(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Kn(new en([],{}),0,t))}),e}function Wn(t){const e={};return We(t,(t,n)=>e[n]=`${t}`),e}function Qn(t,e,n){return t==n.path&&ze(e,n.parameters)}class Zn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Dn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),We(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=In(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Fe(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Le(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Dn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Jn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Jn(t){Dn(t.value),t.children.forEach(Jn)}class Yn{constructor(t,e){this.routes=t,this.module=e}}function Xn(t){return"function"==typeof t}function tr(t){return t instanceof tn}const er=Symbol("INITIAL_VALUE");function nr(){return qt(t=>function(...t){let e,n;return Object(_t.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Et.a)(t[0])&&(t=t[0]),Object(At.a)(t,n).lift(new kt(e))}(t.map(t=>t.pipe(Gt(1),Wt(er)))).pipe(Qt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==er)return t;if(r===er&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||tr(r))return r}return t},t)},er),Yt(t=>t!==er),Object(Ut.a)(t=>tr(t)?t:!0===t),Gt(1)))}let rr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Ob(0,"router-outlet")},directives:function(){return[Wr]},encapsulation:2}),t})();function ir(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];or(r,sr(e,r))}}function or(t,e){t.children&&ir(t.children,e)}function sr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ar(t){const e=t.children&&t.children.map(ar),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=rr),n}function ur(t){return t.outlet||"primary"}function cr(t,e){const n=t.filter(t=>ur(t)===e);return n.push(...t.filter(t=>ur(t)!==e)),n}const lr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function hr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},lr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||He)(n,t,e);if(!i)return Object.assign({},lr);const o={};We(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function fr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>dr(t,e,n)&&"primary"!==ur(n))}(t,n,r)){const i=new en(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==ur(o)){const n=new en([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ur(o)]=n}return i}(t,e,r,new en(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>dr(t,e,n))}(t,n,r)){const o=new en(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(dr(t,n,a)&&!i[ur(a)]){const n=new en([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ur(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new en(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function dr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function pr(t,e,n,r){return!!(ur(t)===r||"primary"!==r&&dr(e,n,t))&&("**"===t.path||hr(e,t,n).matched)}function gr(t,e,n){return 0===e.length&&!t.children[n]}class mr{constructor(t){this.segmentGroup=t||null}}class yr{constructor(t){this.urlTree=t}}function vr(t){return new Ct.a(e=>e.error(new mr(t)))}function br(t){return new Ct.a(e=>e.error(new yr(t)))}function wr(t){return new Ct.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class _r{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=fr(this.urlTree.root,[],[],this.config).segmentGroup,e=new en(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(Object(Ut.a)(t=>this.createUrlTree(Er(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ee(t=>{if(t instanceof yr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof mr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Ut.a)(e=>this.createUrlTree(Er(e),t.queryParams,t.fragment))).pipe(ee(t=>{if(t instanceof mr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new en([],{primary:t}):t;return new tn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ut.a)(t=>new en([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(mt.a)(r).pipe(oe(r=>{const i=n.children[r],o=cr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Ut.a)(t=>({segment:t,outlet:r})))}),Qt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Yt((e,n)=>t(e,n,r)):me.a,se(1),n?de(e):ce(()=>new Rt))}())}expandSegment(t,e,n,r,i,o){return Object(mt.a)(n).pipe(oe(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(ee(t=>{if(t instanceof mr)return Object(yt.a)(null);throw t}))),ye(t=>!!t),ee((t,n)=>{if(t instanceof Rt||"EmptyError"===t.name){if(gr(e,r,i))return Object(yt.a)(new en([],{}));throw new mr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return pr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):vr(e):vr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?br(i):this.lineralizeSegments(n,i).pipe(Object(ie.a)(n=>{const i=new en(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=hr(e,r,i);if(!s)return vr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?br(l):this.lineralizeSegments(r,l).pipe(Object(ie.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(yt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Ut.a)(t=>(n._loadedConfig=t,new en(r,{})))):Object(yt.a)(new en(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=hr(e,n,r);if(!o)return vr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(ie.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=fr(e,s,u,o),l=new en(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Ut.a)(t=>new en(s,t)));if(0===o.length&&0===c.length)return Object(yt.a)(new en(s,{}));const h=ur(n)===i;return this.expandSegment(r,l,o,c,h?"primary":i,!0).pipe(Object(Ut.a)(t=>new en(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(yt.a)(new Yn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(yt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(ie.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ut.a)(t=>(e._loadedConfig=t,t))):function(t){return new Ct.a(e=>e.error(Be(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(yt.a)(new Yn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(yt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Xn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Xn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Qe(o)});return Object(yt.a)(i).pipe(nr(),Object(ve.a)(t=>{if(!tr(t))return;const e=Be(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ut.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(yt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return wr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new tn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return We(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return We(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new en(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Er(t){const e={};for(const n of Object.keys(t.children)){const r=Er(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new en(t.segments.concat(e.segments),e.children)}return t}(new en(t.segments,e))}class Sr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Or{constructor(t,e){this.component=t,this.route=e}}function Ir(t,e,n){const r=t._root;return Cr(r,e?e._root:null,n,[r.value])}function Tr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Cr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=In(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pn(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Pn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Cr(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Or(a.outlet.component,s))}else s&&xr(e,a,i),i.canActivateChecks.push(new Sr(r)),Cr(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),We(o,(t,e)=>xr(t,n.getContext(e),i)),i}function xr(t,e,n){const r=In(t),i=t.value;We(r,(t,r)=>{xr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Or(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ar{}function jr(t){return new Ct.a(e=>e.error(t))}class kr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=fr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new jn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new On(n,e),i=new kn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=An(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=cr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Nr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return gr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!pr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?$e(n).parameters:{};i=new jn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pr(t),ur(t),t.component,t,Rr(e),Dr(e)+n.length,Lr(t))}else{const r=hr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new jn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Pr(t),ur(t),t.component,t,Rr(e),Dr(e)+o.length,Lr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=fr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new On(i,t)]}if(0===a.length&&0===c.length)return[new On(i,[])];const l=ur(t)===r,h=this.processSegment(a,u,c,l?"primary":r);return null===h?null:[new On(i,h)]}}function Nr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Dr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Pr(t){return t.data||{}}function Lr(t){return t.resolve||{}}function Mr(t){return qt(e=>{const n=t(e);return n?Object(mt.a)(n).pipe(Object(Ut.a)(()=>e)):Object(yt.a)(e)})}class Fr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ur=new r.r("ROUTES");class Vr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Ut.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Yn(Ke(i.injector.get(Ur,void 0,r.q.Self|r.q.Optional)).map(ar),i)}),ee(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ft.a(n,()=>new vt.a).pipe(Object(be.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(mt.a)(this.loader.load(t)):Qe(t()).pipe(Object(ie.a)(t=>t instanceof r.w?Object(yt.a)(t):Object(mt.a)(this.compiler.compileModuleAsync(t))))}}class qr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Br,this.attachRef=null}}class Br{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new qr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Hr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function zr(t){throw t}function Gr(t,e,n){return e.parse("/")}function Kr(t,e){return Object(yt.a)(null)}let $r=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new vt.a,this.errorHandler=zr,this.malformedUriErrorHandler=Gr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Kr,afterPreactivation:Kr},this.urlHandlingStrategy=new Hr,this.routeReuseStrategy=new Fr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Z);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new tn(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vr(s,a,t=>this.triggerEvent(new Re(t)),t=>this.triggerEvent(new De(t))),this.routerState=Cn(this.currentUrlTree,this.rootComponentType),this.transitions=new wt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Yt(t=>0!==t.id),Object(Ut.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),qt(t=>{let n=!1,r=!1;return Object(yt.a)(t).pipe(Object(ve.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(yt.a)(t).pipe(qt(t=>{const n=this.transitions.getValue();return e.next(new Oe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Lt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,qt(t=>function(t,e,n,r,i){return new _r(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ut.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(ve.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(ie.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new kr(t,e,n,r,i,o).recognize();return null===s?jr(new Ar):Object(yt.a)(s)}catch(tw){return jr(tw)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ut.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(ve.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new xe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Oe(n,this.serializeUrl(r),i,o);e.next(a);const u=Cn(r,this.rootComponentType).snapshot;return Object(yt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Lt.a}),Mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(ve.a)(t=>{const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ut.a)(t=>Object.assign(Object.assign({},t),{guards:Ir(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(ie.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(yt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(mt.a)(t).pipe(Object(ie.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(yt.a)(!0);const s=o.map(o=>{const s=Tr(o,e,i);let a;if(function(t){return t&&Xn(t.canDeactivate)}(s))a=Qe(s.canDeactivate(t,e,n,r));else{if(!Xn(s))throw new Error("Invalid CanDeactivate guard");a=Qe(s(t,e,n,r))}return a.pipe(ye())});return Object(yt.a)(s).pipe(nr())}(t.component,t.route,n,e,r)),ye(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(ie.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(mt.a)(e).pipe(oe(e=>Pt(function(t,e){return null!==t&&e&&e(new Pe(t)),Object(yt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Me(t)),Object(yt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Mt(()=>{const i=e.guards.map(i=>{const o=Tr(i,e.node,n);let s;if(function(t){return t&&Xn(t.canActivateChild)}(o))s=Qe(o.canActivateChild(r,t));else{if(!Xn(o))throw new Error("Invalid CanActivateChild guard");s=Qe(o(r,t))}return s.pipe(ye())});return Object(yt.a)(i).pipe(nr())}));return Object(yt.a)(i).pipe(nr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(yt.a)(!0);const i=r.map(r=>Mt(()=>{const i=Tr(r,e,n);let o;if(function(t){return t&&Xn(t.canActivate)}(i))o=Qe(i.canActivate(e,t));else{if(!Xn(i))throw new Error("Invalid CanActivate guard");o=Qe(i(e,t))}return o.pipe(ye())}));return Object(yt.a)(i).pipe(nr())}(t,e.route,n))),ye(t=>!0!==t,!0))}(r,o,t,e):Object(yt.a)(n)),Object(Ut.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(ve.a)(t=>{if(tr(t.guardsResult)){const e=Be(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Yt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Te(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Mr(t=>{if(t.guards.canActivateChecks.length)return Object(yt.a)(t).pipe(Object(ve.a)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),qt(t=>{let n=!1;return Object(yt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(ie.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(yt.a)(t);let o=0;return Object(mt.a)(n).pipe(oe(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(yt.a)({});const o={};return Object(mt.a)(i).pipe(Object(ie.a)(i=>function(t,e,n,r){const i=Tr(t,e,r);return Qe(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(ve.a)(t=>{o[i]=t}))),se(1),Object(ie.a)(()=>Object.keys(o).length===i.length?Object(yt.a)(o):Lt.a))}(t._resolve,t,e,r).pipe(Object(Ut.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),An(t,n).resolve),null)))}(t.route,e,r,i)),Object(ve.a)(()=>o++),se(1),Object(ie.a)(e=>o===n.length?Object(yt.a)(t):Lt.a))})),Object(ve.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Te(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(ve.a)(t=>{const e=new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Mr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ut.a)(t=>{const e=function(t,e,n){const r=Ln(t,e._root,n?n._root:void 0);return new Tn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(ve.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ut.a)(t=>(new Zn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(ve.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Te(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new _e(i))),ee(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=tr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Te(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ce(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Eh){t.reject(Eh)}}var i;return Lt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){ir(t),this.config=t.map(ar),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Vn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Bn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return We(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Bn(n,e,r)}(n);if(o.toRoot())return Vn(e.root,new en([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Hn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Hn(t,t===e.root,0)}const r=Fn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Hn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Gn(s.segmentGroup,s.index,o.commands):zn(s.segmentGroup,s.index,o.commands);return Vn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=tr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(tw){e=this.malformedUriErrorHandler(tw,this.urlSerializer,t)}return e}isActive(t,e){if(tr(t))return Ze(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ze(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.O),r.Zb(on),r.Zb(Br),r.Zb(_),r.Zb(r.s),r.Zb(r.x),r.Zb(r.i),r.Zb(void 0))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),Wr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Qr(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Br),r.Nb(r.R),r.Nb(r.j),r.ac("name"),r.Nb(r.h))},t.\u0275dir=r.Ib({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Qr{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===xn?this.route:t===Br?this.childContexts:this.parent.get(t,e)}}class Zr{}class Jr{preload(t,e){return Object(yt.a)(null)}}let Yr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Vr(e,n,e=>t.triggerEvent(new Re(e)),e=>t.triggerEvent(new De(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yt(t=>t instanceof Ie),oe(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(mt.a)(n).pipe(Object(Dt.a)(),Object(Ut.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(yt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(ie.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb($r),r.Zb(r.x),r.Zb(r.i),r.Zb(r.s),r.Zb(Zr))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Oe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ie&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ue&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ue(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb($r),r.Zb(F),r.Zb(void 0))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const ti=new r.r("ROUTER_CONFIGURATION"),ei=new r.r("ROUTER_FORROOT_GUARD"),ni=[_,{provide:on,useClass:sn},{provide:$r,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new $r(null,t,e,n,r,i,s,Ke(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[on,Br,_,r.s,r.x,r.i,Ur,ti,[class{},new r.B],[class{},new r.B]]},Br,{provide:xn,useFactory:function(t){return t.routerState.root},deps:[$r]},{provide:r.x,useClass:r.L},Yr,Jr,class{preload(t,e){return e().pipe(ee(()=>Object(yt.a)(null)))}},{provide:ti,useValue:{enableTracing:!1}}];function ri(){return new r.z("Router",$r)}let ii=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ni,ui(e),{provide:ei,useFactory:ai,deps:[[$r,new r.B,new r.K]]},{provide:ti,useValue:n||{}},{provide:m,useFactory:si,deps:[a,[new r.p(v),new r.B],ti]},{provide:Xr,useFactory:oi,deps:[$r,F,ti]},{provide:Zr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Jr},{provide:r.z,multi:!0,useFactory:ri},[ci,{provide:r.d,multi:!0,useFactory:li,deps:[ci]},{provide:fi,useFactory:hi,deps:[ci]},{provide:r.b,multi:!0,useExisting:fi}]]}}static forChild(e){return{ngModule:t,providers:[ui(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ei,8),r.Zb($r,8))},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();function oi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Xr(t,e,n)}function si(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function ai(t){return"guarded"}function ui(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ur,multi:!0,useValue:t}]}let ci=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new vt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get($r),r=this.injector.get(ti);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(yt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ti),n=this.injector.get(Yr),i=this.injector.get(Xr),o=this.injector.get($r),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();function li(t){return t.appInitializer.bind(t)}function hi(t){return t.bootstrapListener.bind(t)}const fi=new r.r("Router Initializer");let di=(()=>{class t{constructor(){this.title="huaweiToStrava"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-xs-12"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Ob(3,"router-outlet"),r.Rb(),r.Rb(),r.Rb())},directives:[Wr],styles:[""]}),t})();var pi=n("n6bG");function gi(t,e,n,r){return Object(pi.a)(n)&&(r=n,n=void 0),r?gi(t,e,n).pipe(Object(Ut.a)(t=>Object(Et.a)(t)?r(...t):r(t))):new Ct.a(r=>{mi(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function mi(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)mi(t[o],e,n,r,i)}r.add(o)}var yi=n("D0XW"),vi=n("Y7HM");function bi(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}class wi{call(t,e){return e.subscribe(new _i(t))}}class _i extends Ot{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=xt(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}n("KqfI");var Ei=n("Lhse");function Si(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(At.a)(t,void 0).lift(new Oi(e))}class Oi{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ii(t,this.resultSelector))}}class Ii extends St.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(Et.a)(t)?e.push(new Ci(t)):e.push("function"==typeof t[Ei.a]?new Ti(t[Ei.a]()):new xi(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ti{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Ci{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[Ei.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class xi extends Vt.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[Ei.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(Vt.c)(this.observable,new Vt.a(this))}}var Ai=n("VRyK");function ji(t){return e=>e.lift(new ki(t))}class ki{constructor(t){this.notifier=t}call(t,e){const n=new Ni(t),r=Object(Vt.c)(this.notifier,new Vt.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Ni extends Vt.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class Ri{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Di(t,this.compare,this.keySelector))}}class Di extends St.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Pi(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Li(t,n))}}class Li{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Mi(t,this.observables,this.project))}}class Mi extends Ot{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(xt(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n("WMd4"),n("w1tV"),n("XoHu");let Fi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})(),Ui=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[Fi]]}),t})(),Vi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[Ui]}),t})();const qi=["*"],Bi=["dialog"];function Hi(t){return null!=t}function zi(t){return(t||document.body).offsetHeight}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const Gi={animation:!0,transitionTimerDelayMs:5};let Ki=(()=>{class t{constructor(){this.animation=Gi.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const $i=()=>{},{transitionTimerDelayMs:Wi}=Gi,Qi=new Map,Zi=(t,e,n,r)=>{let i=r.context||{};const o=Qi.get(e);if(o)switch(r.runningTransition){case"continue":return Lt.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Qi.delete(e)}const s=n(e,r.animation,i)||$i;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(yt.a)(void 0).pipe(function(t){return e=>new Ct.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new vt.a,u=new vt.a,c=a.pipe(function(...t){return e=>Pt(e,Object(yt.a)(...t))}(!0));Qi.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=gi(e,"transitionend").pipe(ji(c),Yt(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(Et.a)(t[0]))return t[0];t=t[0]}return Object(At.a)(t,void 0).lift(new wi)})(function(t=0,e,n){let r=-1;return Object(vi.a)(e)?r=Number(e)<1?1:Number(e):Object(_t.a)(e)&&(n=e),Object(_t.a)(n)||(n=yi.a),new Ct.a(e=>{const i=Object(vi.a)(t)?t:+t-n.now();return n.schedule(bi,i,{index:0,period:r,subscriber:e})})}(l+Wi).pipe(ji(c)),n,u).pipe(ji(c)).subscribe(()=>{Qi.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let Ji=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Yi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Xi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})(),to=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();var no=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const ro=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function io(t){const e=Array.from(t.querySelectorAll(ro)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let f=0,d=0;switch(i){case"top":f=s.top-(e.offsetHeight+u+c);break;case"bottom":f=s.top+s.height;break;case"left":d=s.left-(e.offsetWidth+l+h);break;case"right":d=s.left+s.width}switch(o){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":d=s.left;break;case"right":d=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?d=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(d)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L,Vi]]}),t})(),so=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})(),ao=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Ki))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(Ki))},token:t,providedIn:"root"}),t})();class uo{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const co=()=>{};let lo=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):co}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(s))},token:t,providedIn:"root"}),t})(),ho=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(Gt(1)).subscribe(()=>{Zi(this._zone,this._el.nativeElement,(t,e)=>{e&&zi(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Zi(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.l),r.Nb(r.A))},t.\u0275cmp=r.Hb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Db("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Fb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class fo{close(t){}dismiss(t){}}class po{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new vt.a,this._dismissed=new vt.a,this._hidden=new vt.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ji(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ji(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(yt.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Si(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var go=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let mo=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new vt.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new vt.a,this.hidden=new vt.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=Si(Zi(this._zone,t,()=>t.classList.remove("show"),e),Zi(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};Si(Zi(this._zone,this._elRef.nativeElement,(t,e)=>{e&&zi(t),t.classList.add("show")},t),Zi(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{gi(t,"keydown").pipe(ji(this._closed$),Yt(t=>t.which===no.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(go.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;gi(this._dialogEl.nativeElement,"mousedown").pipe(ji(this._closed$),Object(ve.a)(()=>e=!1),qt(()=>gi(t,"mouseup").pipe(ji(this._closed$),Gt(1))),Yt(({target:e})=>t===e)).subscribe(()=>{e=!0}),gi(t,"click").pipe(ji(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(go.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=io(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Zi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s),r.Nb(r.l),r.Nb(r.A))},t.\u0275cmp=r.Hb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Dc(Bi,3),2&t){let t;r.rc(t=r.dc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Cb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Db("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Fb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:qi,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.kc(),r.Sb(0,"div",0,1),r.Sb(2,"div",2),r.jc(3),r.Rb(),r.Rb()),2&t&&r.Db("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),yo=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new vt.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=gi(e,"focusin").pipe(ji(n),Object(Ut.a)(t=>t.target));gi(e,"keydown").pipe(ji(n),Yt(t=>t.which===no.Tab),Pi(t)).subscribe(([t,n])=>{const[r,i]=io(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&gi(e,"click").pipe(ji(n),Pi(t),Object(Ut.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:Hi(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new fo,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),f=new po(h,c,l,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.result.then(s,s),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(ho).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(mo).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{Hi(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{Hi(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.M?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new uo([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new uo([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new uo([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:fo,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new uo([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.g),r.Zb(r.s),r.Zb(s),r.Zb(lo),r.Zb(r.G),r.Zb(r.A))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(r.g),Object(r.Zb)(r.o),Object(r.Zb)(s),Object(r.Zb)(lo),Object(r.Zb)(r.G),Object(r.Zb)(r.A))},token:t,providedIn:"root"}),t})(),vo=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.j),r.Zb(r.s),r.Zb(yo),r.Zb(ao))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(r.j),Object(r.Zb)(r.o),Object(r.Zb)(yo),Object(r.Zb)(ao))},token:t,providedIn:"root"}),t})(),bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[vo]}),t})(),wo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),_o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Eo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),So=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Oo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),To=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})(),Co=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let xo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[L]]}),t})();const Ao=[Ji,Yi,Xi,to,eo,oo,so,bo,wo,_o,Eo,So,Oo,Io,To,Co,xo];let jo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[Ao,Ji,Yi,Xi,to,eo,oo,so,bo,wo,_o,Eo,So,Oo,Io,To,Co,xo]}),t})();var ko=n("spgP");function No(){return t=>t.lift(new Ro)}class Ro{call(t,e){return e.subscribe(new Do(t))}}class Do extends St.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Po=n("pxpQ"),Lo=n("Jgta"),Mo=n("zIRd"),Fo=n("q/0M"),Uo=n("qOnz"),Vo=function(t,e){return(Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function qo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Bo,Ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo=zo||{},Go=Ho||self;function Ko(){}function $o(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Wo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qo="closure_uid_"+(1e9*Math.random()>>>0),Zo=0;function Jo(t,e,n){return t.call.apply(t.bind,arguments)}function Yo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Xo(t,e,n){return(Xo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jo:Yo).apply(null,arguments)}function ts(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function es(){return Date.now()}function ns(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function rs(){this.j=this.j,this.i=this.i}rs.prototype.j=!1,rs.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qo)&&t[Qo]||(t[Qo]=++Zo)}(this)},rs.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var is=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},os=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ss(t){return Array.prototype.concat.apply([],arguments)}function as(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function us(t){return/^[\s\xa0]*$/.test(t)}var cs,ls=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function hs(t,e){return-1!=t.indexOf(e)}function fs(t,e){return t<e?-1:t>e?1:0}t:{var ds=Go.navigator;if(ds){var ps=ds.userAgent;if(ps){cs=ps;break t}}cs=""}function gs(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ms(t){var e={};for(var n in t)e[n]=t[n];return e}var ys="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ys.length;o++)n=ys[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bs(t){return bs[" "](t),t}bs[" "]=Ko;var ws,_s,Es=hs(cs,"Opera"),Ss=hs(cs,"Trident")||hs(cs,"MSIE"),Os=hs(cs,"Edge"),Is=Os||Ss,Ts=hs(cs,"Gecko")&&!(hs(cs.toLowerCase(),"webkit")&&!hs(cs,"Edge"))&&!(hs(cs,"Trident")||hs(cs,"MSIE"))&&!hs(cs,"Edge"),Cs=hs(cs.toLowerCase(),"webkit")&&!hs(cs,"Edge");function xs(){var t=Go.document;return t?t.documentMode:void 0}t:{var As="",js=(_s=cs,Ts?/rv:([^\);]+)(\)|;)/.exec(_s):Os?/Edge\/([\d\.]+)/.exec(_s):Ss?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(_s):Cs?/WebKit\/(\S+)/.exec(_s):Es?/(?:Version)[ \/]?(\S+)/.exec(_s):void 0);if(js&&(As=js?js[1]:""),Ss){var ks=xs();if(null!=ks&&ks>parseFloat(As)){ws=String(ks);break t}}ws=As}var Ns={};function Rs(t){return function(t,e){var n=Ns;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ls(String(ws)).split("."),r=ls(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=fs(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||fs(0==s[2].length,0==a[2].length)||fs(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ds=Go.document&&Ss&&(xs()||parseInt(ws,10))||void 0,Ps=!Ss||9<=Number(Ds),Ls=Ss&&!Rs("9"),Ms=function(){if(!Go.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Go.addEventListener("test",Ko,e),Go.removeEventListener("test",Ko,e)}catch(n){}return t}();function Fs(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Us(t,e){if(Fs.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ts){t:{try{bs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Vs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Fs.prototype.b=function(){this.defaultPrevented=!0},ns(Us,Fs);var Vs={2:"touch",3:"pen",4:"mouse"};Us.prototype.b=function(){Us.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ls)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var qs="closure_listenable_"+(1e6*Math.random()|0),Bs=0;function Hs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Bs,this.Y=this.Z=!1}function zs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Gs(t){this.src=t,this.a={},this.b=0}function Ks(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=is(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(zs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function $s(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Gs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$s(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Hs(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ws="closure_lm_"+(1e6*Math.random()|0),Qs={};function Zs(t,e,n,r,i){if(r&&r.once)return Ys(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zs(t,e[o],n,r,i);return null}return n=sa(n),t&&t[qs]?t.va(e,n,Wo(r)?!!r.capture:!!r,i):Js(t,e,n,!1,r,i)}function Js(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Wo(i)?!!i.capture:!!i;if(s&&!Ps)return null;var a=ia(t);if(a||(t[Ws]=a=new Gs(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ra,e=Ps?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ms||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ea(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ys(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ys(t,e[o],n,r,i);return null}return n=sa(n),t&&t[qs]?t.wa(e,n,Wo(r)?!!r.capture:!!r,i):Js(t,e,n,!0,r,i)}function Xs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Xs(t,e[o],n,r,i);else r=Wo(r)?!!r.capture:!!r,n=sa(n),t&&t[qs]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=$s(o=t.a[e],n,r,i))&&(zs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ia(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$s(e,n,r,i)),(n=-1<t?e[t]:null)&&ta(n))}function ta(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[qs])Ks(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ea(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ia(e))?(Ks(n,t),0==n.b&&(n.src=null,e[Ws]=null)):zs(t)}}}function ea(t){return t in Qs?Qs[t]:Qs[t]="on"+t}function na(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ta(t),n.call(r,e)}function ra(t,e){if(t.Y)return!0;if(!Ps){if(!e)t:{e=["window","event"];for(var n=Go,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return na(t,e=new Us(e,this))}return na(t,new Us(e,this))}function ia(t){return(t=t[Ws])instanceof Gs?t:null}var oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function sa(t){return"function"==typeof t?t:(t[oa]||(t[oa]=function(e){return t.handleEvent(e)}),t[oa])}function aa(){rs.call(this),this.c=new Gs(this),this.J=this,this.C=null}function ua(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Fs(e,t);else if(e instanceof Fs)e.target=e.target||t;else{var i=e;vs(e=new Fs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ca(s,r,!0,e)&&i}if(i=ca(s=e.a=t,r,!0,e)&&i,i=ca(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ca(s=e.a=n[o],r,!1,e)&&i}function ca(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ks(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ns(aa,rs),aa.prototype[qs]=!0,(Bo=aa.prototype).addEventListener=function(t,e,n,r){Zs(this,t,e,n,r)},Bo.removeEventListener=function(t,e,n,r){Xs(this,t,e,n,r)},Bo.G=function(){if(aa.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)zs(n[r]);delete e.a[t],e.b--}}this.C=null},Bo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Bo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var la=Go.JSON.stringify;function ha(){this.b=this.a=null}var fa,da=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ga},function(t){t.reset()});function pa(){var t=ba,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ga(){this.next=this.b=this.a=null}function ma(t){Go.setTimeout(function(){throw t},0)}function ya(t,e){fa||function(){var t=Go.Promise.resolve(void 0);fa=function(){t.then(wa)}}(),va||(fa(),va=!0),ba.add(t,e)}ha.prototype.add=function(t,e){var n=da.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ga.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ga.prototype.reset=function(){this.next=this.b=this.a=null};var va=!1,ba=new ha;function wa(){for(var t;t=pa();){try{t.a.call(t.b)}catch(n){ma(n)}var e=da;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}va=!1}function _a(t,e){aa.call(this),this.b=t||1,this.a=e||Go,this.f=Xo(this.Za,this),this.g=es()}function Ea(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Sa(t,e,n){if("function"==typeof t)n&&(t=Xo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Xo(t.handleEvent,t)}return 2147483647<Number(e)?-1:Go.setTimeout(t,e||0)}function Oa(t){t.a=Sa(function(){t.a=null,t.c&&(t.c=!1,Oa(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ns(_a,aa),(Bo=_a.prototype).aa=!1,Bo.M=null,Bo.Za=function(){if(this.aa){var t=es()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ua(this,"tick"),this.aa&&(Ea(this),this.start()))}},Bo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=es())},Bo.G=function(){_a.X.G.call(this),Ea(this),delete this.a};var Ia=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Vo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Oa(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Go.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(rs);function Ta(t){rs.call(this),this.b=t,this.a={}}ns(Ta,rs);var Ca=[];function xa(t,e,n,r){Array.isArray(n)||(n&&(Ca[0]=n.toString()),n=Ca);for(var i=0;i<n.length;i++){var o=Zs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Aa(t){gs(t.a,function(t,e){this.a.hasOwnProperty(e)&&ta(t)},t),t.a={}}function ja(){this.a=!0}function ka(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return la(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ta.prototype.G=function(){Ta.X.G.call(this),Aa(this)},Ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ja.prototype.info=function(){};var Na={},Ra=null;function Da(){return Ra=Ra||new aa}function Pa(t){Fs.call(this,Na.Fa,t)}function La(t){var e=Da();ua(e,new Pa(e,t))}function Ma(t,e){Fs.call(this,Na.STAT_EVENT,t),this.stat=e}function Fa(t){var e=Da();ua(e,new Ma(e,t))}function Ua(t){Fs.call(this,Na.Ga,t)}function Va(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Go.setTimeout(function(){t()},e)}Na.Fa="serverreachability",ns(Pa,Fs),Na.STAT_EVENT="statevent",ns(Ma,Fs),Na.Ga="timingevent",ns(Ua,Fs);var qa={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ba={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ha(){}function za(){}Ha.prototype.a=null;var Ga,Ka={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function $a(){Fs.call(this,"d")}function Wa(){Fs.call(this,"c")}function Qa(){}function Za(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ta(this),this.P=Ja,this.R=new _a(t=Is?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ns($a,Fs),ns(Wa,Fs),ns(Qa,Ha),Ga=new Qa;var Ja=45e3,Ya={},Xa={};function tu(t,e,n){t.H=1,t.i=Eu(mu(e)),t.j=n,t.I=!0,eu(t,null)}function eu(t,e){t.u=es(),iu(t),t.l=mu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Pu(n.b,"t",r),t.D=0,t.a=Ac(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ia(Xo(t.Ca,t,t.a),t.O)),xa(t.J,t.a,"readystatechange",t.Xa),e=t.B?ms(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),La(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function nu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ru(t,n);if(i==Xa){4==e&&(t.h=4,Fa(14),r=!1),ka(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ya){t.h=4,Fa(15),ka(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ka(t.c,t.f,i,null),cu(t,i)}4==e&&0==n.length&&(t.h=1,Fa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),_c(e),e.F=!0,Fa(11))):(ka(t.c,t.f,n,"[Invalid Chunked Response]"),uu(t),au(t))}function ru(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Xa:(n=Number(e.substring(n,r)),isNaN(n)?Ya:(r+=1)+n>e.length?Xa:(e=e.substr(r,n),t.D=r+n,e))}function iu(t){t.T=es()+t.P,ou(t,t.P)}function ou(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Va(Xo(t.Va,t),e)}function su(t){t.o&&(Go.clearTimeout(t.o),t.o=null)}function au(t){0==t.g.v||t.A||Oc(t.g,t)}function uu(t){su(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ea(t.R),Aa(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function cu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Bu(n.b,t)))if(n.I=t.N,!t.C&&Bu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(db){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Sc(n),fc(n)}wc(n),Fa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Va(Xo(n.Sa,n),6e3));if(1>=qu(n.b)&&n.ea){try{n.ea()}catch(db){}n.ea=void 0}}else Tc(n,11)}else if((t.C||n.a==t)&&Sc(n),!us(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(hs(l,"spdy")||hs(l,"quic")||hs(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Hu(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,_u(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=es()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=xc(u,u.C?u.ga:null,u.fa),d.C){zu(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(su(p),iu(p)),u.a=d}else bc(u);0<n.g.length&&gc(n)}else"stop"!=i[0]&&"close"!=i[0]||Tc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Tc(n,7):hc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);La(4)}catch(db){}}function lu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($o(t)||"string"==typeof t)os(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if($o(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if($o(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function hu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof hu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function fu(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];du(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)du(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function du(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Bo=Za.prototype).setTimeout=function(t){this.P=t},Bo.Xa=function(t){t=t.target;var e=this.F;e&&3==ac(t)?e.f():this.Ca(t)},Bo.Ca=function(t){try{if(t==this.a)t:{var e=ac(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Is&&!this.a.$())){this.A||4!=e||7==n||La(8==n||0>=r?3:2),su(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!us(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Fa(12),uu(this),au(this);break t}ka(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,cu(this,u)}this.I?(nu(this,e,o),Is&&this.b&&3==e&&(xa(this.J,this.R,"tick",this.Wa),this.R.start())):(ka(this.c,this.f,o,null),cu(this,o)),4==e&&uu(this),this.b&&!this.A&&(4==e?Oc(this.g,this):(this.b=!1,iu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Fa(12)):(this.h=0,Fa(13)),uu(this),au(this)}}}catch(c){}},Bo.Wa=function(){if(this.a){var t=ac(this.a),e=this.a.$();this.D<e.length&&(su(this),nu(this,t,e),this.b&&4!=t&&iu(this))}},Bo.cancel=function(){this.A=!0,uu(this)},Bo.Va=function(){this.o=null;var t=es();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(La(3),Fa(17)),uu(this),this.h=2,au(this)):ou(this,this.T-t)},(Bo=hu.prototype).K=function(){fu(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Bo.L=function(){return fu(this),this.a.concat()},Bo.get=function(t,e){return du(this.b,t)?this.b[t]:e},Bo.set=function(t,e){du(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Bo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var pu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof gu){this.a=void 0!==e?e:t.a,yu(this,t.f),this.j=t.j,vu(this,t.c),bu(this,t.h),this.g=t.g,e=t.b;var n=new ku;n.c=e.c,e.a&&(n.a=new hu(e.a),n.b=e.b),wu(this,n),this.i=t.i}else t&&(n=String(t).match(pu))?(this.a=!!e,yu(this,n[1]||"",!0),this.j=Su(n[2]||""),vu(this,n[3]||"",!0),bu(this,n[4]),this.g=Su(n[5]||"",!0),wu(this,n[6]||"",!0),this.i=Su(n[7]||"")):(this.a=!!e,this.b=new ku(null,this.a))}function mu(t){return new gu(t)}function yu(t,e,n){t.f=n?Su(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function vu(t,e,n){t.c=n?Su(e,!0):e}function bu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function wu(t,e,n){e instanceof ku?(t.b=e,function(t,e){e&&!t.f&&(Nu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ru(this,e),Pu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ou(e,Au)),t.b=new ku(e,t.a))}function _u(t,e,n){t.b.set(e,n)}function Eu(t){return _u(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^es()).toString(36)),t}function Su(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ou(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Iu),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Iu(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}gu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ou(e,Tu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ou(e,Tu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ou(n,"/"==n.charAt(0)?xu:Cu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ou(n,ju)),t.join("")};var Tu=/[#\/\?@]/g,Cu=/[#\?:]/g,xu=/[#\?]/g,Au=/[#\?@]/g,ju=/#/g;function ku(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Nu(t){t.a||(t.a=new hu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ru(t,e){Nu(t),e=Lu(t,e),du(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,du((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&fu(t)))}function Du(t,e){return Nu(t),e=Lu(t,e),du(t.a.b,e)}function Pu(t,e,n){Ru(t,e),0<n.length&&(t.c=null,t.a.set(Lu(t,e),as(n)),t.b+=n.length)}function Lu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Bo=ku.prototype).add=function(t,e){Nu(this),this.c=null,t=Lu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Bo.forEach=function(t,e){Nu(this),this.a.forEach(function(n,r){os(n,function(n){t.call(e,n,r,this)},this)},this)},Bo.L=function(){Nu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Bo.K=function(t){Nu(this);var e=[];if("string"==typeof t)Du(this,t)&&(e=ss(e,this.a.get(Lu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ss(e,t[n])}return e},Bo.set=function(t,e){return Nu(this),this.c=null,Du(this,t=Lu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Bo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Bo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Mu=function(){return function(t,e){this.b=t,this.a=e}}();function Fu(t){this.g=t||Uu,t=Go.PerformanceNavigationTiming?0<(t=Go.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Go.ia&&Go.ia.ya&&Go.ia.ya()&&Go.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Uu=10;function Vu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function qu(t){return t.b?1:t.a?t.a.size:0}function Bu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Hu(t,e){t.a?t.a.add(e):t.b=e}function zu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Gu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=qo(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return as(t.c)}function Ku(){}function $u(){this.a=new Ku}function Wu(t,e,n){var r=n||"";try{lu(t,function(t,n){var i=t;Wo(t)&&(i=la(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(tw){throw e.push(r+"type="+encodeURIComponent("_badmap")),tw}}function Qu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Fu.prototype.cancel=function(){var t,e;if(this.c=Gu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=qo(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ku.prototype.stringify=function(t){return Go.JSON.stringify(t,void 0)},Ku.prototype.parse=function(t){return Go.JSON.parse(t,void 0)};var Zu=Go.JSON.parse;function Ju(t){aa.call(this),this.headers=new hu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Yu,this.D=this.F=!1}ns(Ju,aa);var Yu="",Xu=/^https?$/i,tc=["POST","PUT"];function ec(t){return"content-type"==t.toLowerCase()}function nc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,rc(t),oc(t)}function rc(t){t.u||(t.u=!0,ua(t,"complete"),ua(t,"error"))}function ic(t){if(t.b&&void 0!==zo&&(!t.s[1]||4!=ac(t)||2!=t.W()))if(t.l&&4==ac(t))Sa(t.za,0,t);else if(ua(t,"readystatechange"),4==ac(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(pu)[1]||null;if(!o&&Go.self&&Go.self.location){var s=Go.self.location.protocol;o=s.substr(0,s.length-1)}i=!Xu.test(o?o.toLowerCase():"")}e=i}if(e)ua(t,"complete"),ua(t,"success");else{t.h=6;try{var a=2<ac(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",rc(t)}}finally{oc(t)}}}function oc(t,e){if(t.a){sc(t);var n=t.a,r=t.s[0]?Ko:null;t.a=null,t.s=null,e||ua(t,"ready");try{n.onreadystatechange=r}catch(tw){}}}function sc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Go.clearTimeout(t.m),t.m=null)}function ac(t){return t.a?t.a.readyState:0}function uc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return gs(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):_u(t,e,n))}function cc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function lc(t){this.pa=0,this.g=[],this.c=new ja,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=cc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=cc("baseRetryDelayMs",5e3,t),this.Ra=cc("retryDelaySeedMs",1e4,t),this.Ma=cc("forwardChannelMaxRetries",2,t),this.ma=cc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Fu(t&&t.concurrentRequestLimit),this.ka=new $u,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function hc(t){if(dc(t),3==t.v){var e=t.R++,n=mu(t.B);_u(n,"SID",t.J),_u(n,"RID",e),_u(n,"TYPE","terminate"),yc(t,n),(e=new Za(t,t.c,e,void 0)).H=2,e.i=Eu(mu(n)),n=!1,Go.navigator&&Go.navigator.sendBeacon&&(n=Go.navigator.sendBeacon(e.i.toString(),"")),!n&&Go.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ac(e.g,null),e.a.ba(e.i)),e.u=es(),iu(e)}Cc(t)}function fc(t){t.a&&(_c(t),t.a.cancel(),t.a=null)}function dc(t){fc(t),t.j&&(Go.clearTimeout(t.j),t.j=null),Sc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Go.clearTimeout(t.h),t.h=null)}function pc(t,e){t.g.push(new Mu(t.Oa++,e)),3==t.v&&gc(t)}function gc(t){Vu(t.b)||t.h||(t.h=!0,ya(t.Ba,t),t.u=0)}function mc(t,e){var n;n=e?e.f:t.R++;var r=mu(t.B);_u(r,"SID",t.J),_u(r,"RID",n),_u(r,"AID",t.P),yc(t,r),t.i&&t.l&&uc(r,t.i,t.l),n=new Za(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=vc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Hu(t.b,n),tu(n,r,e)}function yc(t,e){t.f&&lu({},function(t,n){_u(e,n,t)})}function vc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Xo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Wu(l,s,"req"+c+"_")}catch(ul){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function bc(t){t.a||t.j||(t.T=1,ya(t.Aa,t),t.o=0)}function wc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Va(Xo(t.Aa,t),Ic(t,t.o)),t.o++,0))}function _c(t){null!=t.s&&(Go.clearTimeout(t.s),t.s=null)}function Ec(t){t.a=new Za(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=mu(t.la);_u(e,"RID","rpc"),_u(e,"SID",t.J),_u(e,"CI",t.H?"0":"1"),_u(e,"AID",t.P),yc(t,e),_u(e,"TYPE","xmlhttp"),t.i&&t.l&&uc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Eu(mu(e)),n.j=null,n.I=!0,eu(n,t)}function Sc(t){null!=t.m&&(Go.clearTimeout(t.m),t.m=null)}function Oc(t,e){var n=null;if(t.a==e){Sc(t),_c(t),t.a=null;var r=2}else{if(!Bu(t.b,e))return;n=e.s,zu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=es()-e.u;var i=t.u;ua(r=Da(),new Ua(r,n,e,i)),gc(t)}else bc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(qu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Va(Xo(t.Ba,t,e),Ic(t,t.u)),t.u++,0)))}(t,e)||2==r&&wc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Tc(t,5);break;case 4:Tc(t,10);break;case 3:Tc(t,6);break;default:Tc(t,2)}}function Ic(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Tc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Xo(t.Ya,t);n||(n=new gu("//www.google.com/images/cleardot.gif"),Go.location&&"http"==Go.location.protocol||yu(n,"https"),Eu(n)),function(t,e){var n=new ja;if(Go.Image){var r=new Image;r.onload=ts(Qu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ts(Qu,n,r,"TestLoadImage: error",!1,e),r.onabort=ts(Qu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ts(Qu,n,r,"TestLoadImage: timeout",!1,e),Go.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Fa(2);t.v=0,t.f&&t.f.ra(e),Cc(t),dc(t)}function Cc(t){t.v=0,t.I=-1,t.f&&(0==Gu(t.b).length&&0==t.g.length||(t.b.c.length=0,as(t.g),t.g.length=0),t.f.qa())}function xc(t,e,n){var r=function(t){return t instanceof gu?mu(t):new gu(t,void 0)}(n);if(""!=r.c)e&&vu(r,e+"."+r.c),bu(r,r.h);else{var i=Go.location;r=function(t,e,n,r){var i=new gu(null,void 0);return t&&yu(i,t),e&&vu(i,e),n&&bu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&gs(t.V,function(t,e){_u(r,e,t)}),n=t.na,(e=t.A)&&n&&_u(r,e,n),_u(r,"VER",t.ha),yc(t,r),r}function Ac(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ju(t.Na)).F=t.C,e}function jc(){}function kc(){if(Ss&&!(10<=Number(Ds)))throw Error("Environmental error: no available transport.")}function Nc(t,e){aa.call(this),this.a=new lc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!us(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!us(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Pc(this)}function Rc(t){$a.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Dc(){Wa.call(this),this.status=1}function Pc(t){this.a=t}(Bo=Ju.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ga),this.a.onreadystatechange=Xo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void nc(this,o)}t=n||"";var i=new hu(this.headers);r&&lu(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=ec,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Go.FormData&&t instanceof Go.FormData,!(0<=is(tc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{sc(this),0<this.o&&((this.D=function(t){return Ss&&Rs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Xo(this.xa,this)):this.m=Sa(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){nc(this,o)}},Bo.xa=function(){void 0!==zo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ua(this,"timeout"),this.abort(8))},Bo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ua(this,"complete"),ua(this,"abort"),oc(this))},Bo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),oc(this,!0)),Ju.X.G.call(this)},Bo.za=function(){this.j||(this.A||this.l||this.g?ic(this):this.Ua())},Bo.Ua=function(){ic(this)},Bo.W=function(){try{return 2<ac(this)?this.a.status:-1}catch(_s){return-1}},Bo.$=function(){try{return this.a?this.a.responseText:""}catch(_s){return""}},Bo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Zu(e)}},Bo.ua=function(){return this.h},Bo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Bo=lc.prototype).ha=8,Bo.v=1,Bo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Za(this,this.c,t,void 0),r=this.l;if(this.O&&(r?vs(r=ms(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=vc(this,n,e),_u(i=mu(this.B),"RID",t),_u(i,"CVER",22),this.A&&_u(i,"X-HTTP-Session-Id",this.A),yc(this,i),this.i&&r&&uc(i,this.i,r),Hu(this.b,n),this.Ia&&_u(i,"TYPE","init"),this.da?(_u(i,"$req",e),_u(i,"SID","null"),n.U=!0,tu(n,i,null)):tu(n,i,e),this.v=2}}else 3==this.v&&(t?mc(this,t):0==this.g.length||Vu(this.b)||mc(this))},Bo.Aa=function(){if(this.j=null,Ec(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Va(Xo(this.Ta,this),t)}},Bo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Fa(10),fc(this),Ec(this))},Bo.Sa=function(){null!=this.m&&(this.m=null,fc(this),wc(this),Fa(19))},Bo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Fa(2)):(this.c.info("Failed to ping google.com"),Fa(1))},(Bo=jc.prototype).ta=function(){},Bo.sa=function(){},Bo.ra=function(){},Bo.qa=function(){},Bo.Ja=function(){},kc.prototype.a=function(t,e){return new Nc(t,e)},ns(Nc,aa),Nc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Fa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=xc(t,null,t.fa),gc(t)},Nc.prototype.close=function(){hc(this.a)},Nc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,pc(this.a,e)}else this.l?((e={}).__data__=la(t),pc(this.a,e)):pc(this.a,t)},Nc.prototype.G=function(){this.a.f=null,delete this.f,hc(this.a),delete this.a,Nc.X.G.call(this)},ns(Rc,$a),ns(Dc,Wa),ns(Pc,jc),Pc.prototype.ta=function(){ua(this.a,"a")},Pc.prototype.sa=function(t){ua(this.a,new Rc(t))},Pc.prototype.ra=function(t){ua(this.a,new Dc(t))},Pc.prototype.qa=function(){ua(this.a,"b")},kc.prototype.createWebChannel=kc.prototype.a,Nc.prototype.send=Nc.prototype.h,Nc.prototype.open=Nc.prototype.g,Nc.prototype.close=Nc.prototype.close,qa.NO_ERROR=0,qa.TIMEOUT=8,qa.HTTP_ERROR=6,Ba.COMPLETE="complete",za.EventType=Ka,Ka.OPEN="a",Ka.CLOSE="b",Ka.ERROR="c",Ka.MESSAGE="d",aa.prototype.listen=aa.prototype.va,Ju.prototype.listenOnce=Ju.prototype.wa,Ju.prototype.getLastError=Ju.prototype.Qa,Ju.prototype.getLastErrorCode=Ju.prototype.ua,Ju.prototype.getStatus=Ju.prototype.W,Ju.prototype.getResponseJson=Ju.prototype.Pa,Ju.prototype.getResponseText=Ju.prototype.$,Ju.prototype.send=Ju.prototype.ba;var Lc=qa,Mc=Ba,Fc=Na,Uc=za,Vc=Ju,qc=n("mrSG"),Bc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Bc.o=-1;var Hc=new Fo.b("@firebase/firestore");function zc(){return Hc.logLevel}function Gc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=Fo.a.DEBUG){var r=e.map(Wc);Hc.debug.apply(Hc,Object(qc.f)(["Firestore (8.3.1): "+t],r))}}function Kc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=Fo.a.ERROR){var r=e.map(Wc);Hc.error.apply(Hc,Object(qc.f)(["Firestore (8.3.1): "+t],r))}}function $c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Hc.logLevel<=Fo.a.WARN){var r=e.map(Wc);Hc.warn.apply(Hc,Object(qc.f)(["Firestore (8.3.1): "+t],r))}}function Wc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(tw){return t}}function Qc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw Kc(e),new Error(e)}function Zc(t,e){t||Qc()}function Jc(t,e){return t}function Yc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Xc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Yc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function tl(t,e){return t<e?-1:t>e?1:0}function el(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function nl(t){return t+"\0"}function rl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function il(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ol(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sl(t){return null==t}function al(t){return 0===t&&1/t==-1/0}function ul(t){return"number"==typeof t&&Number.isInteger(t)&&!al(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var cl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ll=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(qc.c)(e,t),e}(Error),hl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Qc(),void 0===n?n=t.length-e:n>t.length-e&&Qc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ll(cl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(hl),dl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return dl.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ll(cl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ll(cl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ll(cl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ll(cl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(hl),gl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(fl.fromString(e))},t.fromName=function(e){return new t(fl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return fl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new fl(e.slice()))},t}(),ml=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return tl(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ml.EMPTY_BYTE_STRING=new ml("");var yl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(t){if(Zc(!!t),"string"==typeof t){var e=0,n=yl.exec(t);if(Zc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:bl(t.seconds),nanos:bl(t.nanos)}}function bl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wl(t){return"string"==typeof t?ml.fromBase64String(t):ml.fromUint8Array(t)}var _l=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ll(cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ll(cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ll(cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ll(cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?tl(this.nanoseconds,t.nanoseconds):tl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function El(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sl(t){var e=t.mapValue.fields.__previous_value__;return El(e)?Sl(e):e}function Ol(t){var e=vl(t.mapValue.fields.__local_write_time__.timestampValue);return new _l(e.seconds,e.nanos)}function Il(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?El(t)?4:10:Qc()}function Tl(t,e){var n=Il(t);if(n!==Il(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ol(t).isEqual(Ol(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vl(t.timestampValue),r=vl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return wl(t.bytesValue).isEqual(wl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return bl(t.geoPointValue.latitude)===bl(e.geoPointValue.latitude)&&bl(t.geoPointValue.longitude)===bl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return bl(t.integerValue)===bl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=bl(t.doubleValue),r=bl(e.doubleValue);return n===r?al(n)===al(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return el(t.arrayValue.values||[],e.arrayValue.values||[],Tl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(rl(n)!==rl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Tl(n[i],r[i])))return!1;return!0}(t,e);default:return Qc()}}function Cl(t,e){return void 0!==(t.values||[]).find(function(t){return Tl(t,e)})}function xl(t,e){var n=Il(t),r=Il(e);if(n!==r)return tl(n,r);switch(n){case 0:return 0;case 1:return tl(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=bl(t.integerValue||t.doubleValue),r=bl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Al(t.timestampValue,e.timestampValue);case 4:return Al(Ol(t),Ol(e));case 5:return tl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=wl(t),r=wl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=tl(n[i],r[i]);if(0!==o)return o}return tl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=tl(bl(t.latitude),bl(e.latitude));return 0!==n?n:tl(bl(t.longitude),bl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=xl(n[i],r[i]);if(o)return o}return tl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=tl(r[s],o[s]);if(0!==a)return a;var u=xl(n[r[s]],i[o[s]]);if(0!==u)return u}return tl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Qc()}}function Al(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return tl(t,e);var n=vl(t),r=vl(e),i=tl(n.seconds,r.seconds);return 0!==i?i:tl(n.nanos,r.nanos)}function jl(t){return kl(t)}function kl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=vl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?wl(t.bytesValue).toBase64():"referenceValue"in t?gl.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=kl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+kl(t.fields[o])}return e+"}"}(t.mapValue):Qc();var e}function Nl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Rl(t){return!!t&&"integerValue"in t}function Dl(t){return!!t&&"arrayValue"in t}function Pl(t){return!!t&&"nullValue"in t}function Ll(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ml(t){return!!t&&"mapValue"in t}var Fl=function(t,e){this.key=t,this.version=e},Ul=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(qc.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Fl),Vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(qc.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fl),ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Fl),Bl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Hl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Bl(t,e,n,r,i,o,s)}function zl(t){var e=Jc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+jl(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),sl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=rh(e.startAt)),e.endAt&&(n+="|ub:",n+=rh(e.endAt)),e.h=n}return e.h}function Gl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!oh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Tl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ah(t.startAt,e.startAt)&&ah(t.endAt,e.endAt)}function Kl(t){return gl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $l=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(qc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Wl(t,n,r):"array-contains"===n?new Yl(t,r):"in"===n?new Xl(t,r):"not-in"===n?new th(t,r):"array-contains-any"===n?new eh(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ql(t,n):new Zl(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(xl(e,this.value)):null!==e&&Il(this.value)===Il(e)&&this.m(xl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Wl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=gl.fromName(r.referenceValue),i}return Object(qc.c)(e,t),e.prototype.matches=function(t){var e=gl.comparator(t.key,this.key);return this.m(e)},e}($l),Ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Jl(0,n),r}return Object(qc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}($l),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Jl(0,n),r}return Object(qc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}($l);function Jl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return gl.fromName(t.referenceValue)})}var Yl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(qc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Dl(e)&&Cl(e.arrayValue,this.value)},e}($l),Xl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(qc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Cl(this.value.arrayValue,e)},e}($l),th=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(qc.c)(e,t),e.prototype.matches=function(t){if(Cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Cl(this.value.arrayValue,e)},e}($l),eh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(qc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Dl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Cl(e.value.arrayValue,t)})},e}($l),nh=function(t,e){this.position=t,this.before=e};function rh(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return jl(t)}).join(",")}var ih=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function oh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function sh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?gl.comparator(gl.fromName(s.referenceValue),n.key):xl(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ah(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Tl(t.position[n],e.position[n]))return!1;return!0}var uh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ch(t,e,n,r,i,o,s,a){return new uh(t,e,n,r,i,o,s,a)}function lh(t){return new uh(t)}function hh(t){return!sl(t.limit)&&"F"===t.limitType}function fh(t){return!sl(t.limit)&&"L"===t.limitType}function dh(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ph(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function gh(t){return null!==t.collectionGroup}function mh(t){var e=Jc(t);if(null===e.p){e.p=[];var n=ph(e),r=dh(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ih(n)),e.p.push(new ih(pl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ih(pl.keyField(),u))}}}return e.p}function yh(t){var e=Jc(t);if(!e.T)if("F"===e.limitType)e.T=Hl(e.path,e.collectionGroup,mh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=mh(e);r<i.length;r++){var o=i[r];n.push(new ih(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new nh(e.endAt.position,!e.endAt.before):null,a=e.startAt?new nh(e.startAt.position,!e.startAt.before):null;e.T=Hl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function vh(t,e,n){return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bh(t,e){return Gl(yh(t),yh(e))&&t.limitType===e.limitType}function wh(t){return zl(yh(t))+"|lt:"+t.limitType}function _h(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+jl(e.value);var e}).join(", ")+"]"),sl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+rh(t.startAt)),t.endAt&&(e+=", endAt: "+rh(t.endAt)),"Target("+e+")"}(yh(t))+"; limitType="+t.limitType+")"}function Eh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gl.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!sh(t.startAt,mh(t),e)||t.endAt&&sh(t.endAt,mh(t),e))}(t,e)}function Sh(t){return function(e,n){for(var r=!1,i=0,o=mh(t);i<o.length;i++){var s=o[i],a=Oh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Oh(t,e,n){var r=t.field.isKeyField()?gl.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?xl(r,i):Qc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qc()}}var Ih=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new _l(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Th=function(){function t(t){this.fields=t,t.sort(pl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return el(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Ch=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ml(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return Tl(this.proto,t.proto)},t}(),xh=function(){function t(t){void 0===t&&(t=Ch.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Il(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(pl.emptyPath(),this.A);return null!=t?new Ch(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Ml(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Ah(t){var e=[];return il(t.fields||{},function(t,n){var r=new pl([t]);if(Ml(n)){var i=Ah(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Th(e)}function jh(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:al(e)?"-0":e}}function kh(t){return{integerValue:""+t}}function Nh(t,e){return ul(e)?kh(e):jh(t,e)}var Rh=function(){this._=void 0};function Dh(t,e,n){return t instanceof Mh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Fh?Uh(t,e):t instanceof Vh?qh(t,e):function(t,e){var n=Lh(t,e),r=Hh(n)+Hh(t.S);return Rl(n)&&Rl(t.S)?kh(r):jh(t.D,r)}(t,e)}function Ph(t,e,n){return t instanceof Fh?Uh(t,e):t instanceof Vh?qh(t,e):n}function Lh(t,e){return t instanceof Bh?Rl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e}(Rh),Fh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(qc.c)(e,t),e}(Rh);function Uh(t,e){for(var n=zh(e),r=function(t){n.some(function(e){return Tl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(qc.c)(e,t),e}(Rh);function qh(t,e){for(var n=zh(e),r=function(t){n=n.filter(function(e){return!Tl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(qc.c)(e,t),e}(Rh);function Hh(t){return bl(t.integerValue||t.doubleValue)}function zh(t){return Dl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Gh=function(t,e){this.field=t,this.transform=e},Kh=function(t,e){this.version=t,this.transformResults=e},$h=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Wh(t,e){return void 0!==t.updateTime?e instanceof Ul&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ul}var Qh=function(){};function Zh(t,e,n){return t instanceof ef?function(t,e,n){var r=t.value,i=of(t.fieldTransforms,e,n.transformResults);return r=af(t.fieldTransforms,r,i),new Ul(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof nf?function(t,e,n){if(!Wh(t.precondition,e))return new ql(t.key,n.version);var r=rf(t,e,of(t.fieldTransforms,e,n.transformResults));return new Ul(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Vl(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Jh(t,e,n){return t instanceof ef?function(t,e,n){if(!Wh(t.precondition,e))return e;var r=t.value,i=sf(t.fieldTransforms,n,e);r=af(t.fieldTransforms,r,i);var o=tf(e);return new Ul(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof nf?function(t,e,n){if(!Wh(t.precondition,e))return e;var r=tf(e),i=rf(t,e,sf(t.fieldTransforms,n,e));return new Ul(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Wh(t.precondition,e)?new Vl(t.key,Ih.min()):e}(t,e)}function Yh(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Ul?e.field(o.field):void 0,a=Lh(o.transform,s||null);null!=a&&(n=null==n?(new xh).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function Xh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&el(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Fh&&e instanceof Fh||t instanceof Vh&&e instanceof Vh?el(t.elements,e.elements,Tl):t instanceof Bh&&e instanceof Bh?Tl(t.S,e.S):t instanceof Mh&&e instanceof Mh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function tf(t){return t instanceof Ul?t.version:Ih.min()}var ef=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(qc.c)(e,t),e}(Qh),nf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(qc.c)(e,t),e}(Qh);function rf(t,e,n){var r;return r=function(t,e){var n=new xh(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Ul?e.data():Ch.empty()),af(t.fieldTransforms,r,n)}function of(t,e,n){var r=[];Zc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Ul&&(a=e.field(o.field)),r.push(Ph(s,a,n[i]))}return r}function sf(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Ul&&(u=n.field(s.field)),r.push(Dh(a,u,e))}return r}function af(t,e,n){for(var r=new xh(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var uf,cf,lf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(qc.c)(e,t),e}(Qh),hf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(qc.c)(e,t),e}(Qh),ff=function(t){this.count=t};function df(t){switch(t){case cl.OK:return Qc();case cl.CANCELLED:case cl.UNKNOWN:case cl.DEADLINE_EXCEEDED:case cl.RESOURCE_EXHAUSTED:case cl.INTERNAL:case cl.UNAVAILABLE:case cl.UNAUTHENTICATED:return!1;case cl.INVALID_ARGUMENT:case cl.NOT_FOUND:case cl.ALREADY_EXISTS:case cl.PERMISSION_DENIED:case cl.FAILED_PRECONDITION:case cl.ABORTED:case cl.OUT_OF_RANGE:case cl.UNIMPLEMENTED:case cl.DATA_LOSS:return!0;default:return Qc()}}function pf(t){if(void 0===t)return Kc("GRPC error has no .code"),cl.UNKNOWN;switch(t){case uf.OK:return cl.OK;case uf.CANCELLED:return cl.CANCELLED;case uf.UNKNOWN:return cl.UNKNOWN;case uf.DEADLINE_EXCEEDED:return cl.DEADLINE_EXCEEDED;case uf.RESOURCE_EXHAUSTED:return cl.RESOURCE_EXHAUSTED;case uf.INTERNAL:return cl.INTERNAL;case uf.UNAVAILABLE:return cl.UNAVAILABLE;case uf.UNAUTHENTICATED:return cl.UNAUTHENTICATED;case uf.INVALID_ARGUMENT:return cl.INVALID_ARGUMENT;case uf.NOT_FOUND:return cl.NOT_FOUND;case uf.ALREADY_EXISTS:return cl.ALREADY_EXISTS;case uf.PERMISSION_DENIED:return cl.PERMISSION_DENIED;case uf.FAILED_PRECONDITION:return cl.FAILED_PRECONDITION;case uf.ABORTED:return cl.ABORTED;case uf.OUT_OF_RANGE:return cl.OUT_OF_RANGE;case uf.UNIMPLEMENTED:return cl.UNIMPLEMENTED;case uf.DATA_LOSS:return cl.DATA_LOSS;default:return Qc()}}(cf=uf||(uf={}))[cf.OK=0]="OK",cf[cf.CANCELLED=1]="CANCELLED",cf[cf.UNKNOWN=2]="UNKNOWN",cf[cf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cf[cf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cf[cf.NOT_FOUND=5]="NOT_FOUND",cf[cf.ALREADY_EXISTS=6]="ALREADY_EXISTS",cf[cf.PERMISSION_DENIED=7]="PERMISSION_DENIED",cf[cf.UNAUTHENTICATED=16]="UNAUTHENTICATED",cf[cf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cf[cf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cf[cf.ABORTED=10]="ABORTED",cf[cf.OUT_OF_RANGE=11]="OUT_OF_RANGE",cf[cf.UNIMPLEMENTED=12]="UNIMPLEMENTED",cf[cf.INTERNAL=13]="INTERNAL",cf[cf.UNAVAILABLE=14]="UNAVAILABLE",cf[cf.DATA_LOSS=15]="DATA_LOSS";var gf=function(){function t(t,e){this.comparator=t,this.root=e||yf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new mf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new mf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new mf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new mf(this.root,t,this.comparator,!0)},t}(),mf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Qc();if(this.right.isRed())throw Qc();var t=this.left.check();if(t!==this.right.check())throw Qc();return t+(this.isRed()?0:1)},t}();yf.EMPTY=null,yf.RED=!0,yf.BLACK=!1,yf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Qc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var vf=function(){function t(t){this.comparator=t,this.data=new gf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new bf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new bf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),bf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),wf=new gf(gl.comparator);function _f(){return wf}function Ef(){return _f()}var Sf=new gf(gl.comparator);function Of(){return Sf}var If=new gf(gl.comparator);function Tf(){return If}var Cf=new vf(gl.comparator);function xf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Cf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Af=new vf(tl);function jf(){return Af}var kf=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Nf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ih.min(),r,jf(),_f(),xf())},t}(),Nf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ml.EMPTY_BYTE_STRING,n,xf(),xf(),xf())},t}(),Rf=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Df=function(t,e){this.targetId=t,this.$=e},Pf=function(t,e,n,r){void 0===n&&(n=ml.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Lf=function(){function t(){this.F=0,this.O=Uf(),this.k=ml.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=xf(),e=xf(),n=xf();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Qc()}}),new Nf(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Uf()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Mf=function(){function t(t){this.X=t,this.Z=new Map,this.tt=_f(),this.et=Ff(),this.nt=new vf(tl)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Ul?this.it(r,t.N):t.N instanceof Vl&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Qc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Kl(i))if(0===n){var o=new gl(i.path);this.rt(e,o,new Vl(o,Ih.min()))}else Zc(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Kl(o.target)){var s=new gl(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Vl(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=xf();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new kf(t,n,this.nt,this.tt,r);return this.tt=_f(),this.et=Ff(),this.nt=new vf(tl),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Lf,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new vf(tl),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Gc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Lf),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Ff(){return new gf(gl.comparator)}function Uf(){return new gf(gl.comparator)}var Vf={asc:"ASCENDING",desc:"DESCENDING"},qf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bf=function(t,e){this.databaseId=t,this.V=e};function Hf(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function zf(t,e){return t.V?e.toBase64():e.toUint8Array()}function Gf(t,e){return Hf(t,e.toTimestamp())}function Kf(t){return Zc(!!t),Ih.fromTimestamp(function(t){var e=vl(t);return new _l(e.seconds,e.nanos)}(t))}function $f(t,e){return function(t){return new fl(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Wf(t){var e=fl.fromString(t);return Zc(vd(e)),e}function Qf(t,e){return $f(t.databaseId,e.path)}function Zf(t,e){var n=Wf(e);if(n.get(1)!==t.databaseId.projectId)throw new ll(cl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ll(cl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gl(td(n))}function Jf(t,e){return $f(t.databaseId,e)}function Yf(t){var e=Wf(t);return 4===e.length?fl.emptyPath():td(e)}function Xf(t){return new fl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function td(t){return Zc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ed(t,e,n){return{name:Qf(t,e),fields:n.proto.mapValue.fields}}function nd(t,e,n){var r=Zf(t,e.name),i=Kf(e.updateTime),o=new Ch({mapValue:{fields:e.fields}});return new Ul(r,i,o,{hasCommittedMutations:!!n})}function rd(t,e){var n;if(e instanceof ef)n={update:ed(t,e.key,e.value)};else if(e instanceof lf)n={delete:Qf(t,e.key)};else if(e instanceof nf)n={update:ed(t,e.key,e.data),updateMask:yd(e.fieldMask)};else{if(!(e instanceof hf))return Qc();n={verify:Qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Mh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bh)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Qc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Gf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Qc()}(t,e.precondition)),n}function id(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?$h.updateTime(Kf(t.updateTime)):void 0!==t.exists?$h.exists(t.exists):$h.none()}(e.currentDocument):$h.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Zc("REQUEST_TIME"===e.setToServerValue),n=new Mh):"appendMissingElements"in e?n=new Fh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Vh(e.removeAllFromArray.values||[]):"increment"in e?n=new Bh(t,e.increment):Qc();var r=pl.fromServerFormat(e.fieldPath);return new Gh(r,n)}(t,e)}):[];if(e.update){var i=Zf(t,e.update.name),o=new Ch({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Th((t.fieldPaths||[]).map(function(t){return pl.fromServerFormat(t)}))}(e.updateMask);return new nf(i,o,s,n,r)}return new ef(i,o,n,r)}if(e.delete){var a=Zf(t,e.delete);return new lf(a,n)}if(e.verify){var u=Zf(t,e.verify);return new hf(u,n)}return Qc()}function od(t,e){return{documents:[Jf(t,e.path)]}}function sd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Jf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Jf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ll(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NAN"}};if(Pl(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ll(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NAN"}};if(Pl(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(t.field),op:fd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:dd(t.field),direction:hd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||sl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=cd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=cd(e.endAt)),n}function ad(t){var e=Yf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ud(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ih(pd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return sl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ld(n.startAt));var l=null;return n.endAt&&(l=ld(n.endAt)),ch(e,i,a,s,u,"F",c,l)}function ud(t){return t?void 0!==t.unaryFilter?[md(t)]:void 0!==t.fieldFilter?[gd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return ud(t)}).reduce(function(t,e){return t.concat(e)}):Qc():[]}function cd(t){return{before:t.before,values:t.position}}function ld(t){return new nh(t.values||[],!!t.before)}function hd(t){return Vf[t]}function fd(t){return qf[t]}function dd(t){return{fieldPath:t.canonicalString()}}function pd(t){return pl.fromServerFormat(t.fieldPath)}function gd(t){return $l.create(pd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Qc()}}(t.fieldFilter.op),t.fieldFilter.value)}function md(t){switch(t.unaryFilter.op){case"IS_NAN":var e=pd(t.unaryFilter.field);return $l.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=pd(t.unaryFilter.field);return $l.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pd(t.unaryFilter.field);return $l.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pd(t.unaryFilter.field);return $l.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Qc()}}function yd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function vd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function bd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=_d(e)),e=wd(t.get(n),e);return _d(e)}function wd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function _d(t){return t+"\x01\x01"}function Ed(t){var e=t.length;if(Zc(e>=2),2===e)return Zc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),fl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Qc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Qc()}o=s+2}return new fl(r)}var Sd=function(t,e){this.seconds=t,this.nanoseconds=e},Od=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Od.store="owner",Od.key="owner";var Id=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Id.store="mutationQueues",Id.keyPath="userId";var Td=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Td.store="mutations",Td.keyPath="batchId",Td.userMutationsIndex="userMutationsIndex",Td.userMutationsKeyPath=["userId","batchId"];var Cd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,bd(e)]},t.key=function(t,e,n){return[t,bd(e),n]},t}();Cd.store="documentMutations",Cd.PLACEHOLDER=new Cd;var xd=function(t,e){this.path=t,this.readTime=e},Ad=function(t,e){this.path=t,this.version=e},jd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};jd.store="remoteDocuments",jd.readTimeIndex="readTimeIndex",jd.readTimeIndexPath="readTime",jd.collectionReadTimeIndex="collectionReadTimeIndex",jd.collectionReadTimeIndexPath=["parentPath","readTime"];var kd=function(t){this.byteSize=t};kd.store="remoteDocumentGlobal",kd.key="remoteDocumentGlobalKey";var Nd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Nd.store="targets",Nd.keyPath="targetId",Nd.queryTargetsIndexName="queryTargetsIndex",Nd.queryTargetsKeyPath=["canonicalId","targetId"];var Rd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Rd.store="targetDocuments",Rd.keyPath=["targetId","path"],Rd.documentTargetsIndex="documentTargetsIndex",Rd.documentTargetsKeyPath=["path","targetId"];var Dd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Dd.key="targetGlobalKey",Dd.store="targetGlobal";var Pd=function(t,e){this.collectionId=t,this.parent=e};Pd.store="collectionParents",Pd.keyPath=["collectionId","parent"];var Ld=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ld.store="clientMetadata",Ld.keyPath="clientId";var Md=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Md.store="bundles",Md.keyPath="bundleId";var Fd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Fd.store="namedQueries",Fd.keyPath="name";var Ud=Object(qc.f)(Object(qc.f)([],Object(qc.f)(Object(qc.f)([],Object(qc.f)(Object(qc.f)([],Object(qc.f)(Object(qc.f)([],[Id.store,Td.store,Cd.store,jd.store,Nd.store,Od.store,Dd.store,Rd.store]),[Ld.store])),[kd.store])),[Pd.store])),[Md.store,Fd.store]),Vd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qd=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Bd=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Hd=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Qc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),zd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Bd,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new $d(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Yd(e.target.error);n.gt.reject(new $d(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new $d(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Gc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Qd(e)},t}(),Gd=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Uo.g)())&&Kc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Gc("SimpleDb","Removing database:",t),Zd(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Uo.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n=this;return Object(qc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Gc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new $d(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ll(cl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new $d(t,n))},i.onupgradeneeded=function(t){Gc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Gc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(qc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(qc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=zd.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Hd.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Gc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Kd=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Zd(this.xt.delete())},t}(),$d=function(t){function e(e,n){var r=this;return(r=t.call(this,cl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(qc.c)(e,t),e}(ll);function Wd(t){return"IndexedDbTransactionError"===t.name}var Qd=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Gc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Gc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zd(n)},t.prototype.add=function(t){return Gc("SimpleDb","ADD",this.store.name,t,t),Zd(this.store.add(t))},t.prototype.get=function(t){var e=this;return Zd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Gc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Gc("SimpleDb","DELETE",this.store.name,t),Zd(this.store.delete(t))},t.prototype.count=function(){return Gc("SimpleDb","COUNT",this.store.name),Zd(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Gc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Hd(function(n,r){e.onerror=function(t){var e=Yd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new Hd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Kd(i),s=e(i.primaryKey,i.value,o);if(s instanceof Hd){var a=s.catch(function(t){return o.done(),Hd.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return Hd.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Zd(t){return new Hd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Yd(t.target.error);n(e)}})}var Jd=!1;function Yd(t){var e=Gd.It(Object(Uo.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ll("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Jd||(Jd=!0,setTimeout(function(){throw r},0)),r}}return t}var Xd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(qc.c)(e,t),e}(qd);function tp(t,e){var n=Jc(t);return Gd.Pt(n.Qt,e)}var ep=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Zh(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Jh(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Jh(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},xf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&el(this.mutations,t.mutations,function(t,e){return Xh(t,e)})&&el(this.baseMutations,t.baseMutations,function(t,e){return Xh(t,e)})},t}(),np=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Zc(e.mutations.length===r.length);for(var i=Tf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),rp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ih.min()),void 0===o&&(o=Ih.min()),void 0===s&&(s=ml.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),ip=function(t){this.Kt=t};function op(t,e){if(e.document)return nd(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=gl.fromSegments(e.noDocument.path),r=lp(e.noDocument.readTime);return new Vl(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=gl.fromSegments(e.unknownDocument.path);return r=lp(e.unknownDocument.version),new ql(i,r)}return Qc()}function sp(t,e,n){var r=ap(n),i=e.key.path.popLast().toArray();if(e instanceof Ul){var o=function(t,e){return{name:Qf(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Hf(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new jd(null,null,o,s,r,i)}if(e instanceof Vl){var a=e.key.path.toArray(),u=cp(e.version);return s=e.hasCommittedMutations,new jd(null,new xd(a,u),null,s,r,i)}if(e instanceof ql){var c=e.key.path.toArray(),l=cp(e.version);return new jd(new Ad(c,l),null,null,!0,r,i)}return Qc()}function ap(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function up(t){var e=new _l(t[0],t[1]);return Ih.fromTimestamp(e)}function cp(t){var e=t.toTimestamp();return new Sd(e.seconds,e.nanoseconds)}function lp(t){var e=new _l(t.seconds,t.nanoseconds);return Ih.fromTimestamp(e)}function hp(t,e){for(var n=(e.baseMutations||[]).map(function(e){return id(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return id(t.Kt,e)}),o=_l.fromMillis(e.localWriteTimeMs);return new ep(e.batchId,o,n,i)}function fp(t){var e,n,r=lp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?lp(t.lastLimboFreeSnapshotVersion):Ih.min();return void 0!==t.query.documents?(Zc(1===(n=t.query).documents.length),e=yh(lh(Yf(n.documents[0])))):e=function(t){return yh(ad(t))}(t.query),new rp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ml.fromBase64String(t.resumeToken))}function dp(t,e){var n,r=cp(e.snapshotVersion),i=cp(e.lastLimboFreeSnapshotVersion);n=Kl(e.target)?od(t.Kt,e.target):sd(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Nd(e.targetId,zl(e.target),r,o,e.sequenceNumber,i,n)}function pp(t){var e=ad({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?vh(e,e.limit,"L"):e}var gp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return mp(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:lp(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return mp(t).put({bundleId:(n=e).id,createTime:cp(Kf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return yp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:pp(e.bundledQuery),readTime:lp(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return yp(t).put(function(t){return{name:t.name,readTime:cp(Kf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function mp(t){return tp(t,Md.store)}function yp(t){return tp(t,Fd.store)}var vp=function(){function t(){this.Wt=new bp}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Hd.resolve()},t.prototype.getCollectionParents=function(t,e){return Hd.resolve(this.Wt.getEntries(e))},t}(),bp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new vf(fl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new vf(fl.comparator)).toArray()},t}(),wp=function(){function t(){this.jt=new bp}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:bd(i)};return _p(t).put(o)}return Hd.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[nl(e),""],!1,!0);return _p(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ed(o.parent))}return n})},t}();function _p(t){return tp(t,Pd.store)}var Ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sp=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Op(t,e,n){var r=t.store(Td.store),i=t.store(Cd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Zc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Cd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Hd.waitFor(o).next(function(){return c})}function Ip(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Qc();e=t.noDocument}return JSON.stringify(e).length}Sp.DEFAULT_COLLECTION_PERCENTILE=10,Sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sp.DEFAULT=new Sp(41943040,Sp.DEFAULT_COLLECTION_PERCENTILE,Sp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sp.DISABLED=new Sp(-1,0,0);var Tp=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Zc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xp(t).qt({index:Td.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ap(t),s=xp(t);return s.add({}).next(function(a){Zc("number"==typeof a);for(var u=new ep(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return rd(t.Kt,e)}),i=n.mutations.map(function(e){return rd(t.Kt,e)});return new Td(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new vf(function(t,e){return tl(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Cd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Cd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),Hd.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return xp(t).get(e).next(function(t){return t?(Zc(t.userId===n.userId),hp(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Hd.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return xp(t).qt({index:Td.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Zc(e.batchId>=r),o=hp(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xp(t).qt({index:Td.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xp(t).kt(Td.userMutationsIndex,n).next(function(t){return t.map(function(t){return hp(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Cd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ap(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=Ed(r[1]);if(a===n.userId&&e.path.isEqual(c))return xp(t).get(u).next(function(t){if(!t)throw Qc();Zc(t.userId===n.userId),o.push(hp(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(tl),i=[];return e.forEach(function(e){var o=Cd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ap(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=Ed(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Hd.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new vf(tl);return Ap(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=Ed(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(xp(t).get(e).next(function(t){if(null===t)throw Qc();Zc(t.userId===n.userId),r.push(hp(n.D,t))}))}),Hd.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Op(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),Hd.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Hd.resolve();var r=IDBKeyRange.lowerBound(Cd.prefixForUser(e.userId)),i=[];return Ap(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=Ed(t[1]);i.push(o)}else r.done()}).next(function(){Zc(0===i.length)})})},t.prototype.containsKey=function(t,e){return Cp(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return jp(t).get(this.userId).next(function(t){return t||new Id(e.userId,-1,"")})},t}();function Cp(t,e,n){var r=Cd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ap(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function xp(t){return tp(t,Td.store)}function Ap(t){return tp(t,Cd.store)}function jp(t){return tp(t,Id.store)}var kp=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Np=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new kp(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Ih.fromTimestamp(new _l(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Rp(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Zc(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Rp(t).qt(function(s,a){var u=fp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Hd.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Rp(t).qt(function(t,n){var r=fp(n);e(r)})},t.prototype.se=function(t){return Dp(t).get(Dd.key).next(function(t){return Zc(null!==t),t})},t.prototype.ie=function(t,e){return Dp(t).put(Dd.key,e)},t.prototype.re=function(t,e){return Rp(t).put(dp(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=zl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Rp(t).qt({range:r,index:Nd.queryTargetsIndexName},function(t,n,r){var o=fp(n);Gl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Pp(t);return e.forEach(function(e){var s=bd(e.path);i.push(o.put(new Rd(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Hd.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Pp(t);return Hd.forEach(e,function(e){var o=bd(e.path);return Hd.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Pp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Pp(t),i=xf();return r.qt({range:n,Bt:!0},function(t,e,n){var r=Ed(t[1]),o=new gl(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=bd(e.path),r=IDBKeyRange.bound([n],[nl(n)],!1,!0),i=0;return Pp(t).qt({index:Rd.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return Rp(t).get(e).next(function(t){return t?fp(t):null})},t}();function Rp(t){return tp(t,Nd.store)}function Dp(t){return tp(t,Dd.store)}function Pp(t){return tp(t,Rd.store)}function Lp(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){if(t.code!==cl.FAILED_PRECONDITION||t.message!==Vd)throw t;return Gc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Mp(t,e){var n=t[1],r=e[1],i=tl(t[0],e[0]);return 0===i?tl(n,r):i}var Fp=function(){function t(t){this.ce=t,this.buffer=new vf(Mp),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Mp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Up=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Gc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(qc.b)(e,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Wd(e=n.sent())?(Gc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Lp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),Vp=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Hd.resolve(Bc.o);var r=new Fp(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Gc("LruGarbageCollector","Garbage collection skipped; disabled"),Hd.resolve(Ep)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Gc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ep):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Gc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),zc()<=Fo.a.DEBUG&&Gc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Hd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),qp=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Vp(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Bp(t,n)},t.prototype.removeReference=function(t,e,n){return Bp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Bp(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return jp(t).Ut(function(r){return Cp(t,r,e).next(function(t){return t&&(n=!0),Hd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Pp(t).delete([0,bd(s.path)])})});i.push(u)}}).next(function(){return Hd.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Bp(t,e)},t.prototype.pe=function(t,e){var n,r=Pp(t),i=Bc.o;return r.qt({index:Rd.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Bc.o&&e(new gl(Ed(n)),i),i=s,n=o):i=Bc.o}).next(function(){i!==Bc.o&&e(new gl(Ed(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Bp(t,e){return Pp(t).put(function(t,e){return new Rd(0,bd(t.path),e)}(e,t.currentSequenceNumber))}var Hp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){il(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ol(this.inner)},t}(),zp=function(){function t(){this.changes=new Hp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ih.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Hd.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Gp=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Wp(t).put(Qp(e),n)},t.prototype.removeEntry=function(t,e){var n=Wp(t),r=Qp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Wp(t).get(Qp(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Wp(t).get(Qp(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Ip(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=Ef();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=Ef(),i=new gf(gl.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Ip(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Hd.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Wp(t).qt({range:r},function(t,e,r){for(var s=gl.fromSegments(t);o&&gl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Of(),o=e.path.length+1,s={};if(n.isEqual(Ih.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ap(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=jd.collectionReadTimeIndex}return Wp(t).qt(s,function(t,n,s){if(t.length===o){var a=op(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Ul&&Eh(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Kp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $p(t).get(kd.key).next(function(t){return Zc(!!t),t})},t.prototype.Te=function(t,e){return $p(t).put(kd.key,e)},t.prototype.Ie=function(t){if(t){var e=op(this.D,t);return e instanceof Vl&&e.version.isEqual(Ih.min())?null:e}return null},t}(),Kp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Hp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(qc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new vf(function(t,e){return tl(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=sp(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ip(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=sp(e.Ve.D,new Vl(o,Ih.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),Hd.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(zp);function $p(t){return tp(t,kd.store)}function Wp(t){return tp(t,jd.store)}function Qp(t){return t.path.toArray()}var Zp=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Zc(n<r&&n>=0&&r<=11);var o=new zd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Od.store)}(t),function(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath}),t.createObjectStore(Td.store,{keyPath:Td.keyPath,autoIncrement:!0}).createIndex(Td.userMutationsIndex,Td.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cd.store)}(t),Jp(t),function(t){t.createObjectStore(jd.store)}(t));var s=Hd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Rd.store),t.deleteObjectStore(Nd.store),t.deleteObjectStore(Dd.store)}(t),Jp(t)),s=s.next(function(){return function(t){var e=t.store(Dd.store),n=new Dd(0,0,Ih.min().toTimestamp(),0);return e.put(Dd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Td.store).kt().next(function(n){t.deleteObjectStore(Td.store),t.createObjectStore(Td.store,{keyPath:Td.keyPath,autoIncrement:!0}).createIndex(Td.userMutationsIndex,Td.userMutationsKeyPath,{unique:!0});var r=e.store(Td.store),i=n.map(function(t){return r.put(t)});return Hd.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Ld.store,{keyPath:Ld.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(kd.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(jd.store);e.createIndex(jd.readTimeIndex,jd.readTimeIndexPath,{unique:!1}),e.createIndex(jd.collectionReadTimeIndex,jd.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Md.store,{keyPath:Md.keyPath})}(t),function(t){t.createObjectStore(Fd.store,{keyPath:Fd.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(jd.store).qt(function(t,n){e+=Ip(n)}).next(function(){var n=new kd(e);return t.store(kd.store).put(kd.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Id.store),r=t.store(Td.store);return n.kt().next(function(n){return Hd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Td.userMutationsIndex,i).next(function(r){return Hd.forEach(r,function(r){Zc(r.userId===n.userId);var i=hp(e.D,r);return Op(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Rd.store),n=t.store(jd.store);return t.store(Dd.store).get(Dd.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new fl(n),s=function(t){return[0,bd(t)]}(o);r.push(e.get(s).next(function(n){return n?Hd.resolve():function(n){return e.put(new Rd(0,bd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Hd.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Pd.store,{keyPath:Pd.keyPath});var n=e.store(Pd.store),r=new bp,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:bd(i)})}};return e.store(jd.store).qt({Bt:!0},function(t,e){var n=new fl(t);return i(n.popLast())}).next(function(){return e.store(Cd.store).qt({Bt:!0},function(t,e){var n=Ed(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Nd.store);return n.qt(function(t,r){var i=fp(r),o=dp(e.D,i);return n.put(o)})},t}();function Jp(t){t.createObjectStore(Rd.store,{keyPath:Rd.keyPath}).createIndex(Rd.documentTargetsIndex,Rd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Nd.store,{keyPath:Nd.keyPath}).createIndex(Nd.queryTargetsIndexName,Nd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Dd.store)}var Yp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new ll(cl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qp(this,i),this.We=n+"main",this.D=new ip(u),this.je=new Gd(this.We,11,new Zp(this.D)),this.Ge=new Np(this.referenceDelegate,this.D),this.Gt=new wp,this.ze=function(t,e){return new Gp(t,e)}(this.D,this.Gt),this.He=new gp,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&Kc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ll(cl.FAILED_PRECONDITION,Yp);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Bc(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(qc.b)(e,void 0,void 0,function(){return Object(qc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(qc.b)(e,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(qc.b)(e,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return eg(e).put(new Ld(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Wd(e))return Gc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Gc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return tg(t).get(Od.key).next(function(t){return Hd.resolve(e.cn(t))})},t.prototype.an=function(t){return eg(t).delete(this.clientId)},t.prototype.un=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(qc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=tp(t,Ld.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Hd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Hd.resolve(!0):tg(t).get(Od.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new ll(cl.FAILED_PRECONDITION,Yp);return!1}}return!(!e.networkEnabled||!e.inForeground)||eg(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Gc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(qc.b)(this,void 0,void 0,function(){var t=this;return Object(qc.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Od.store,Ld.store],function(e){var n=new Xd(e,Bc.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return eg(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Tp.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Gc("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ud,function(o){return r=new Xd(o,i.Me?i.Me.next():Bc.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw Kc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new ll(cl.FAILED_PRECONDITION,Vd);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return tg(t).get(Od.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ll(cl.FAILED_PRECONDITION,Yp)})},t.prototype.on=function(t){var e=new Od(this.clientId,this.allowTabSynchronization,Date.now());return tg(t).put(Od.key,e)},t.At=function(){return Gd.At()},t.prototype.rn=function(t){var e=this,n=tg(t);return n.get(Od.key).next(function(t){return e.cn(t)?(Gc("IndexedDbPersistence","Releasing primary lease."),n.delete(Od.key)):Hd.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Kc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Gc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Kc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){Kc("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function tg(t){return tp(t,Od.store)}function eg(t){return tp(t,Ld.store)}function ng(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var rg=function(t,e){this.progress=t,this.En=e},ig=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=Ef();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=_f();return i.forEach(function(t,e){e||(e=new Vl(t,Ih.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return gl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):gh(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new gl(e)).next(function(t){var e=Of();return t instanceof Ul&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Of();return this.Gt.getCollectionParents(t,i).next(function(s){return Hd.forEach(s,function(s){var a=function(t,e){return new uh(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Jh(u,r.get(c),o.localWriteTime);r=l instanceof Ul?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){Eh(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=xf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof nf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Ul&&(c=c.insert(t,e))}),c})},t}(),og=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=xf(),i=xf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),sg=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ih.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(hh(e)||fh(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(zc()<=Fo.a.DEBUG&&Gc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_h(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new vf(Sh(t));return e.forEach(function(e,r){r instanceof Ul&&Eh(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return zc()<=Fo.a.DEBUG&&Gc("QueryEngine","Using full collection scan to execute query:",_h(e)),this.Fn.getDocumentsMatchingQuery(t,e,Ih.min())},t}(),ag=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new gf(tl),this.qn=new Hp(function(t){return zl(t)},Gl),this.Un=Ih.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new ig(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function ug(t,e,n,r){return new ag(t,e,n,r)}function cg(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(qc.d)(this,function(s){switch(s.label){case 0:return n=Jc(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new ig(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=xf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function lg(t,e){var n=Jc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Hd.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Zc(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function hg(t){var e=Jc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function fg(t,e){var n=Jc(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Zc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=_f();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(dg(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Ih.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Hd.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function dg(t,e,n,r,i){var o=xf();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=_f();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Vl&&s.version.isEqual(Ih.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Gc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function pg(t,e){var n=Jc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function gg(t,e){var n=Jc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?Hd.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new rp(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function mg(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:r=Jc(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Wd(s=a.sent()))throw s;return Gc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function yg(t,e,n){var r=Jc(t),i=Ih.min(),o=xf();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Jc(t),i=r.qn.get(n);return void 0!==i?Hd.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,yh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Ih.min(),n?o:xf())}).next(function(t){return{documents:t,jn:o}})})}function vg(t,e){var n=Jc(t),r=Jc(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function bg(t){var e=Jc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Jc(t),i=_f(),o=ap(n),s=Wp(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:jd.readTimeIndex,range:a},function(t,e){var n=op(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:up(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function wg(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){return[2,(e=Jc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Wp(t),n=Ih.min();return e.qt({index:jd.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=up(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function _g(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(qc.d)(this,function(p){switch(p.label){case 0:for(i=Jc(t),o=xf(),s=_f(),a=Tf(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,gg(i,function(t){return yh(lh(fl.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return dg(t,f,s,Ih.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function Eg(t,e,n){return void 0===n&&(n=xf()),Object(qc.b)(this,void 0,void 0,function(){var r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return[4,gg(t,yh(pp(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Jc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Kf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(ml.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var Sg=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Hd.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Kf(n.createTime)}),Hd.resolve()},t.prototype.getNamedQuery=function(t,e){return Hd.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:pp(t.bundledQuery),readTime:Kf(t.readTime)}}(e)),Hd.resolve()},t}(),Og=function(){function t(){this.Xn=new vf(Ig.Zn),this.ts=new vf(Ig.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ig(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Ig(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new gl(new fl([])),r=new Ig(n,t),i=new Ig(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new gl(new fl([])),n=new Ig(e,t),r=new Ig(e,t+1),i=xf();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ig(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ig=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return gl.comparator(t.key,e.key)||tl(t.hs,e.hs)},t.es=function(t,e){return tl(t.hs,e.hs)||gl.comparator(t.key,e.key)},t}(),Tg=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new vf(Ig.Zn)}return t.prototype.checkEmpty=function(t){return Hd.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new ep(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Ig(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Hd.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Hd.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return Hd.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Hd.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Hd.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ig(e,0),i=new Ig(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),Hd.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(tl);return e.forEach(function(t){var e=new Ig(t,0),i=new Ig(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),Hd.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;gl.isDocumentKey(i)||(i=i.child(""));var o=new Ig(new gl(i),0),s=new vf(tl);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),Hd.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Zc(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Hd.forEach(e.mutations,function(i){var o=new Ig(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ig(e,0),r=this.fs.firstAfterOrEqual(n);return Hd.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Hd.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),Cg=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new gf(gl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Hd.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ef();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Hd.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Of(),i=new gl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Ul&&Eh(e,u)&&(r=r.insert(u.key,u))}return Hd.resolve(r)},t.prototype.ps=function(t,e){return Hd.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new xg(this)},t.prototype.getSize=function(t){return Hd.resolve(this.size)},t}(),xg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(qc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),Hd.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(zp),Ag=function(){function t(t){this.persistence=t,this.Es=new Hp(function(t){return zl(t)},Gl),this.lastRemoteSnapshotVersion=Ih.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Og,this.targetCount=0,this.As=kp.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),Hd.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Hd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Hd.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Hd.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Hd.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new kp(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Hd.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Hd.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Hd.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Hd.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Hd.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Hd.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Hd.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Hd.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Hd.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Hd.resolve(n)},t.prototype.containsKey=function(t,e){return Hd.resolve(this.Is.containsKey(e))},t}(),jg=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Bc(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Ag(this),this.Gt=new vp,this.ze=function(t,e){return new Cg(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new ip(e),this.He=new Sg(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new Tg(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Gc("MemoryPersistence","Starting transaction:",t);var i=new kg(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return Hd.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),kg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(qc.c)(e,t),e}(qd),Ng=function(){function t(t){this.persistence=t,this.Ss=new Og,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Qc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Hd.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Hd.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Hd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hd.forEach(this.xs,function(r){var i=gl.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Hd.or([function(){return Hd.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),Rg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Dg(t,e){return"firestore_clients_"+t+"_"+e}function Pg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Lg(t,e){return"firestore_targets_"+t+"_"+e}Rg.UNAUTHENTICATED=new Rg(null),Rg.GOOGLE_CREDENTIALS=new Rg("google-credentials-uid"),Rg.FIRST_PARTY=new Rg("first-party-uid");var Mg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ll(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Kc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ll(i.error.code,i.error.message)),o?new t(e,i.state,r):(Kc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ug=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=jf(),s=0;i&&s<r.activeTargetIds.length;++s)i=ul(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Kc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Vg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Kc("SharedClientState","Failed to parse online state: "+e),null)},t}(),qg=function(){function t(){this.activeTargetIds=jf()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Bg=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new gf(tl),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Dg(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new qg),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(qc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Dg(this.persistenceKey,r)))&&(o=Ug.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Lg(this.persistenceKey,t));if(n){var r=Fg.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Lg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Gc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Gc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Gc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Gc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Kc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(qc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(qc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Bc.o;if(null!=t)try{var n=JSON.parse(t);Zc("number"==typeof n),e=n}catch(t){Kc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Bc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Mg(this.currentUser,t,e,n),i=Pg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Pg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Lg(this.persistenceKey,t),i=new Fg(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Ug.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Mg.$s(new Rg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Fg.$s(r,e)},t.prototype.Ys=function(t){return Vg.$s(t)},t.prototype.hi=function(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Gc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=jf();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Hg=function(){function t(){this.yi=new qg,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new qg,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),zg=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Gg=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Gc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Gc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Kg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},$g=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Wg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(qc.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Vc;s.listenOnce(Mc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Lc.NO_ERROR:var e=s.getResponseJson();Gc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Lc.TIMEOUT:Gc("Connection",'RPC "'+t+'" timed out'),o(new ll(cl.DEADLINE_EXCEEDED,"Request time out"));break;case Lc.HTTP_ERROR:var n=s.getStatus();if(Gc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(cl).indexOf(e)>=0?e:cl.UNKNOWN}(r.status);o(new ll(a,r.message))}else o(new ll(cl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ll(cl.UNAVAILABLE,"Connection failed."));break;default:Qc()}}finally{Gc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new kc,i=Da(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Uo.l)()||Object(Uo.n)()||Object(Uo.j)()||Object(Uo.k)()||Object(Uo.o)()||Object(Uo.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Gc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new $g({vi:function(t){c?Gc("Connection","Not sending because WebChannel is closed:",t):(u||(Gc("Connection","Opening WebChannel transport."),a.open(),u=!0),Gc("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Uc.EventType.OPEN,function(){c||Gc("Connection","WebChannel transport opened.")}),h(a,Uc.EventType.CLOSE,function(){c||(c=!0,Gc("Connection","WebChannel transport closed"),l.$i())}),h(a,Uc.EventType.ERROR,function(t){c||(c=!0,$c("Connection","WebChannel transport errored:",t),l.$i(new ll(cl.UNAVAILABLE,"The operation could not be completed")))}),h(a,Uc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Zc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Gc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=uf[t];if(void 0!==e)return pf(e)}(i),s=r.message;void 0===o&&(o=cl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new ll(o,s)),a.close()}else Gc("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,Fc.STAT_EVENT,function(t){10===t.stat?Gc("Connection","Detected buffering proxy"):11===t.stat&&Gc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Gc("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Gc("RestConnection","Received: ",t),t},function(e){throw $c("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+Kg[t]},t}());function Qg(){return"undefined"!=typeof window?window:null}function Zg(){return"undefined"!=typeof document?document:null}function Jg(t){return new Bf(t,!0)}var Yg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Gc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Xg=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Yg(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===cl.RESOURCE_EXHAUSTED?(Kc(e.toString()),Kc("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===cl.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new ll(cl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(qc.b)(t,void 0,void 0,function(){return Object(qc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Gc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Gc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),tm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(qc.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Zc(void 0===e||"string"==typeof e),ml.fromBase64String(e||"")):(Zc(void 0===e||e instanceof Uint8Array),ml.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?cl.UNKNOWN:pf(t.code);return new ll(e,t.message||"")}(a);n=new Pf(r,i,o,s||null)}else if("documentChange"in e){i=Zf(t,(r=e.documentChange).document.name),o=Kf(r.document.updateTime);var a=new Ch({mapValue:{fields:r.document.fields}}),u=(s=new Ul(i,o,a,{}),r.targetIds||[]);n=new Rf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Zf(t,(r=e.documentDelete).document),o=r.readTime?Kf(r.readTime):Ih.min(),a=new Vl(i,o),n=new Rf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Zf(t,(r=e.documentRemove).document),n=new Rf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Qc();var c=e.filter;i=new ff(r=c.count||0),n=new Df(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Ih.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ih.min():e.readTime?Kf(e.readTime):Ih.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Xf(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Kl(r)?{documents:od(t,r)}:{query:sd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=zf(t,e.resumeToken):e.snapshotVersion.compareTo(Ih.min())>0&&(n.readTime=Hf(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Xf(this.D),e.removeTarget=t,this.wr(e)},e}(Xg),em=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Zc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Zc(void 0!==e),t.map(function(t){return function(t,e){var n=Kf(t.updateTime?t.updateTime:e);return n.isEqual(Ih.min())&&(n=Kf(e)),new Kh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Kf(t.commitTime);return this.listener.Pr(n,e)}return Zc(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Xf(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return rd(e.D,t)})};this.wr(n)},e}(Xg),nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(qc.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new ll(cl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===cl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===cl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),rm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(Kc(e),this.Fr=!1):Gc("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),im=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(qc.b)(o,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return dm(this)?(Gc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return(e=Jc(t)).Qr.add(4),[4,sm(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,om(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new rm(n,r)};function om(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:if(!dm(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function sm(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function am(t,e){var n=Jc(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),fm(n)?hm(n):xm(n).ar()&&cm(n,e))}function um(t,e){var n=Jc(t),r=xm(n);n.Ur.delete(e),r.ar()&&lm(n,e),0===n.Ur.size&&(r.ar()?r.lr():dm(n)&&n.jr.set("Unknown"))}function cm(t,e){t.Gr.H(e.targetId),xm(t).Ir(e)}function lm(t,e){t.Gr.H(e),xm(t).Ar(e)}function hm(t){t.Gr=new Mf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),xm(t).start(),t.jr.Or()}function fm(t){return dm(t)&&!xm(t).cr()&&t.Ur.size>0}function dm(t){return 0===Jc(t).Qr.size}function pm(t){t.Gr=void 0}function gm(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){return t.Ur.forEach(function(e,n){cm(t,e)}),[2]})})}function mm(t,e){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(n){return pm(t),fm(t)?(t.jr.Lr(e),hm(t)):t.jr.set("Unknown"),[2]})})}function ym(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o;return Object(qc.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Pf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(qc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Gc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,vm(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Rf?t.Gr.st(e):e instanceof Df?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Ih.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,hg(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(ml.EMPTY_BYTE_STRING,n.snapshotVersion)),lm(t,e);var r=new rp(n.target,e,1,n.sequenceNumber);cm(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Gc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,vm(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function vm(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r=this;return Object(qc.d)(this,function(i){switch(i.label){case 0:if(!Wd(e))throw e;return t.Qr.add(1),[4,sm(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return hg(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(qc.b)(r,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return Gc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,om(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function bm(t,e){return e().catch(function(n){return vm(t,n,e)})}function wm(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(qc.d)(this,function(s){switch(s.label){case 0:e=Jc(t),n=Am(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return dm(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,pg(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Am(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,vm(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return _m(e)&&Em(e),[2]}})})}function _m(t){return dm(t)&&!Am(t).cr()&&t.qr.length>0}function Em(t){Am(t).start()}function Sm(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){return Am(t).Sr(),[2]})})}function Om(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n,r;return Object(qc.d)(this,function(i){for(e=Am(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Im(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=np.from(r,e,n),[4,bm(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,wm(t)];case 2:return o.sent(),[2]}})})}function Tm(t,e){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(n){switch(n.label){case 0:return e&&Am(t).br?[4,function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:return df(r=e.code)&&r!==cl.ABORTED?(n=t.qr.shift(),Am(t).hr(),[4,bm(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,wm(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return _m(t)&&Em(t),[2]}})})}function Cm(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n;return Object(qc.d)(this,function(r){switch(r.label){case 0:return n=Jc(t),e?(n.Qr.delete(2),[4,om(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,sm(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function xm(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Jc(t);return r.Cr(),new tm(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:gm.bind(null,t),Di:mm.bind(null,t),Tr:ym.bind(null,t)}),t.Kr.push(function(n){return Object(qc.b)(e,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),fm(t)?hm(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),pm(t),e.label=3;case 3:return[2]}})})})),t.zr}function Am(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Jc(t);return r.Cr(),new em(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:Sm.bind(null,t),Di:Tm.bind(null,t),Vr:Om.bind(null,t),Pr:Im.bind(null,t)}),t.Kr.push(function(n){return Object(qc.b)(e,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,wm(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Gc("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var jm=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Bd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ll(cl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function km(t,e){if(Kc("AsyncQueue",e+": "+t),Wd(t))return new ll(cl.UNAVAILABLE,e+": "+t);throw t}var Nm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||gl.comparator(e.key,n.key)}:function(t,e){return gl.comparator(t.key,e.key)},this.keyedMap=Of(),this.sortedSet=new gf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Rm=function(){function t(){this.Jr=new gf(gl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Qc():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Dm=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Nm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Pm=function(){this.Xr=void 0,this.listeners=[]},Lm=function(){this.queries=new Hp(function(t){return wh(t)},bh),this.onlineState="Unknown",this.Zr=new Set};function Mm(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(qc.d)(this,function(c){switch(c.label){case 0:if(n=Jc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Pm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=km(a,"Initialization of query '"+_h(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&qm(n),[2]}})})}function Fm(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qc.d)(this,function(a){return n=Jc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Um(t,e){for(var n=Jc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&qm(n)}function Vm(t,e,n){var r=Jc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function qm(t){t.Zr.forEach(function(t){t.next()})}var Bm=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Dm(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Dm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),Hm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),zm=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Zf(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?nd(this.D,t.document,!1):new Vl(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Kf(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new zm(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||xf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return[4,_g(this.localStore,new zm(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Eg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new rg(Object.assign({},this.progress),t))]}})})}}();var Gm=function(t){this.key=t},Km=function(t){this.key=t},$m=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=xf(),this.mutatedKeys=xf(),this.po=Sh(t),this.Eo=new Nm(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new Rm,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=hh(this.query)&&i.size===this.query.limit?i.last():null,c=fh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Ul?e:null;h&&(h=Eh(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),hh(this.query)||fh(this.query))for(;s.size>this.query.limit;){var l=hh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qc()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Dm(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Rm,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=xf(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new Km(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new Gm(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=xf();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Dm.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Wm=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Qm=function(t){this.key=t,this.Co=!1},Zm=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Hp(function(t){return wh(t)},bh),this.$o=new Map,this.Fo=new Set,this.Oo=new gf(gl.comparator),this.ko=new Map,this.Mo=new Og,this.Lo={},this.Bo=new Map,this.qo=kp.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Jm(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:return n=Ty(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,gg(n.localStore,yh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Ym(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&am(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Ym(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(qc.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,yg(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(hy(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,yg(t.localStore,e,!0)];case 1:return i=l.sent(),o=new $m(e,i.jn),s=o.Io(i.documents),a=Nf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),hy(t,n,u.Po),c=new Wm(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Xm(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return n=Jc(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!bh(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,mg(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),um(n.remoteStore,r.targetId),cy(n,r.targetId)}).catch(Lp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return cy(n,r.targetId),[4,mg(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function ty(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:r=Cy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Jc(t),i=_l.now(),o=e.reduce(function(t,e){return t.add(e.key)},xf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Yh(c,n.get(c.key));null!=l&&s.push(new nf(c.key,l,Ah(l.proto.mapValue),$h.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new gf(tl)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,py(r,i.changes)];case 3:return a.sent(),[4,wm(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=km(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function ey(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:n=Jc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fg(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Zc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Zc(r.Co):t.removedDocuments.size>0&&(Zc(r.Co),r.Co=!1))}),[4,py(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Lp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ny(t,e,n){var r=Jc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Jc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&qm(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ry(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(qc.d)(this,function(c){switch(c.label){case 0:return(r=Jc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new gf(gl.comparator)).insert(o,new Vl(o,Ih.min())),a=xf().add(o),u=new kf(Ih.min(),new Map,new vf(tl),s,a),[4,ey(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),dy(r),[3,4];case 2:return[4,mg(r.localStore,e,!1).then(function(){return cy(r,e,n)}).catch(Lp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function iy(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:n=Jc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,lg(n.localStore,e)];case 2:return i=o.sent(),uy(n,r,null),ay(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,py(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function oy(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:r=Jc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Jc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Zc(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),uy(r,e,n),ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,py(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function sy(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:dm((n=Jc(t)).remoteStore)||Gc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Jc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=km(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ay(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function uy(t,e,n){var r=Jc(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function cy(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||ly(t,e)})}function ly(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(um(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),dy(t))}function hy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Gm?(t.Mo.addReference(o.key,e),fy(t,o)):o instanceof Km?(Gc("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||ly(t,o.key)):Qc()}}function fy(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Gc("SyncEngine","New document in limbo: "+n),t.Fo.add(r),dy(t))}function dy(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new gl(fl.fromString(e)),r=t.qo.next();t.ko.set(r,new Qm(n)),t.Oo=t.Oo.insert(n,r),am(t.remoteStore,new rp(yh(lh(n.path)),r,2,Bc.o))}}function py(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:return r=Jc(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=og.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(qc.d)(this,function(l){switch(l.label){case 0:n=Jc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Hd.forEach(e,function(e){return Hd.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Hd.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Wd(r=l.sent()))throw r;return Gc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function gy(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:return(n=Jc(t)).currentUser.isEqual(e)?[3,3]:(Gc("SyncEngine","User change. New user:",e.toKey()),[4,cg(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new ll(cl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,py(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function my(t,e){var n=Jc(t),r=n.ko.get(e);if(r&&r.Co)return xf().add(r.key);var i=xf(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function yy(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return[4,yg((n=Jc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&hy(n,e.targetId,i.Po),i)]}})})}function vy(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){return[2,bg((e=Jc(t)).localStore).then(function(t){return py(e,t)})]})})}function by(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o;return Object(qc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Jc(t),r=Jc(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):Hd.resolve(null)})})}((i=Jc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,wm(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(uy(i,e,r||null),ay(i,e),function(t,e){Jc(Jc(t).Tn).Xt(e)}(i.localStore,e)):Qc(),s.label=4;case 4:return[4,py(i,o)];case 5:return s.sent(),[3,7];case 6:Gc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function wy(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(qc.d)(this,function(c){switch(c.label){case 0:return Ty(n=Jc(t)),Cy(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,_y(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,Cm(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)am(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return cy(n,e),mg(n.localStore,e,!0)}),um(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,_y(n,a)];case 5:return c.sent(),function(t){var e=Jc(t);e.ko.forEach(function(t,n){um(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new gf(gl.comparator)}(n),n.Uo=!1,[4,Cm(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function _y(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(qc.d)(this,function(g){switch(g.label){case 0:n=Jc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,gg(n.localStore,yh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,yy(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,vg(n.localStore,a)];case 8:return p=g.sent(),[4,gg(n.localStore,p)];case 9:return u=g.sent(),[4,Ym(n,Ey(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function Ey(t){return ch(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Sy(t){var e=Jc(t);return Jc(Jc(e.localStore).persistence).gn()}function Oy(t,e,n,r){return Object(qc.b)(this,void 0,void 0,function(){var i,o,s;return Object(qc.d)(this,function(a){switch(a.label){case 0:return(i=Jc(t)).Uo?(Gc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,bg(i.localStore)];case 3:return o=a.sent(),s=kf.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,py(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,mg(i.localStore,e,!0)];case 6:return a.sent(),cy(i,e,r),[3,8];case 7:Qc(),a.label=8;case 8:return[2]}})})}function Iy(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(qc.d)(this,function(f){switch(f.label){case 0:if(!(r=Ty(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Gc("SyncEngine","Adding an already active target "+s),[3,5]):[4,vg(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,gg(r.localStore,a)];case 3:return u=f.sent(),[4,Ym(r,Ey(a),u.targetId,!1)];case 4:f.sent(),am(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(qc.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,mg(r.localStore,t,!1).then(function(){um(r.remoteStore,t),cy(r,t)}).catch(Lp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Ty(t){var e=Jc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ey.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=my.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ry.bind(null,e),e.xo.Tr=Um.bind(null,e.eventManager),e.xo.Ko=Vm.bind(null,e.eventManager),e}function Cy(t){var e=Jc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oy.bind(null,e),e}var xy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return this.D=Jg(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return ug(this.persistence,new sg,t.initialUser,this.D)},t.prototype.Go=function(t){return new jg(Ng.Cs,this.D)},t.prototype.jo=function(t){return new Hg},t.prototype.terminate=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ay=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(qc.c)(e,t),e.prototype.initialize=function(e){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,wg(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,Cy(this.Jo.syncEngine)];case 4:return n.sent(),[4,wm(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return ug(this.persistence,new sg,t.initialUser,this.D)},e.prototype.zo=function(t){return new Up(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sp.withCacheSize(this.cacheSizeBytes):Sp.DEFAULT;return new Xp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Qg(),Zg(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Hg},e}(xy),jy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(qc.c)(e,t),e.prototype.initialize=function(e){return Object(qc.b)(this,void 0,void 0,function(){var n,r=this;return Object(qc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Bg?(this.sharedClientState.syncEngine={wi:by.bind(null,n),_i:Oy.bind(null,n),mi:Iy.bind(null,n),gn:Sy.bind(null,n),di:vy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(qc.b)(r,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return[4,wy(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Qg();if(!Bg.At(e))throw new ll(cl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Bg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ay),ky=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n=this;return Object(qc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ny(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gy.bind(null,this.syncEngine),[4,Cm(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Lm},t.prototype.createDatastore=function(t){var e=Jg(t.databaseInfo.databaseId),n=new Wg(t.databaseInfo);return function(t,e,n){return new nm(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ny(s.syncEngine,t,0)},o=Gg.At()?new Gg:new zg,new im(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Zm(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return e=Jc(t),Gc("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,sm(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Ny=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Ry=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Bd,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new Hm(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n=this;return Object(qc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ll(cl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(qc.d)(this,function(u){switch(u.label){case 0:return n=Jc(t),r=Xf(n.D)+"/documents",i={documents:e.map(function(t){return Qf(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Zc(!!e.found);var n=Zf(t,e.found.name),r=Kf(e.found.updateTime),i=new Ch({mapValue:{fields:e.found.fields}});return new Ul(n,r,i,{})}(t,e):"missing"in e?function(t,e){Zc(!!e.missing),Zc(!!e.readTime);var n=Zf(t,e.missing),r=Kf(e.readTime);return new Vl(n,r)}(t,e):Qc()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Zc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Vl||t instanceof Ul?n.recordVersion(t):Qc()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new lf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e=this;return Object(qc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=gl.fromPath(n);e.mutations.push(new hf(r,e.precondition(r)))}),[4,function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return n=Jc(t),r=Xf(n.D)+"/documents",i={writes:e.map(function(t){return rd(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Ul)e=t.version;else{if(!(t instanceof Vl))throw Qc();e=Ih.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ll(cl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?$h.updateTime(e):$h.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ih.min()))throw new ll(cl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $h.updateTime(e)}return $h.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Dy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Yg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(qc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(qc.d)(this,function(r){return t=new Ry(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!sl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!df(e)}return!1},t}(),Py=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Rg.UNAUTHENTICATED,this.clientId=Xc.u(),this.credentialListener=function(){},this.receivedInitialUser=new Bd,this.credentials.setChangeListener(function(t){Gc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ll(cl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Bd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(qc.b)(t,void 0,void 0,function(){var t,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=km(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Ly(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(qc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Gc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(qc.b)(i,void 0,void 0,function(){return Object(qc.d)(this,function(t){switch(t.label){case 0:return[4,cg(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function My(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Fy(t)];case 1:return n=i.sent(),Gc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(qc.b)(this,void 0,void 0,function(){var n,r;return Object(qc.d)(this,function(i){switch(i.label){case 0:return(n=Jc(t)).asyncQueue.verifyOperationInProgress(),Gc("RemoteStore","RemoteStore received new credentials"),r=dm(n),n.Qr.add(3),[4,sm(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,om(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Fy(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Gc("FirestoreClient","Using default OfflineComponentProvider"),[4,Ly(t,new xy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Uy(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Gc("FirestoreClient","Using default OnlineComponentProvider"),[4,My(t,new ky)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Vy(t){return Fy(t).then(function(t){return t.persistence})}function qy(t){return Fy(t).then(function(t){return t.localStore})}function By(t){return Uy(t).then(function(t){return t.remoteStore})}function Hy(t){return Uy(t).then(function(t){return t.syncEngine})}function zy(t){return Object(qc.b)(this,void 0,void 0,function(){var e,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:return[4,Uy(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Jm.bind(null,e.syncEngine),n.onUnlisten=Xm.bind(null,e.syncEngine),n)]}})})}function Gy(t,e,n){var r=this;void 0===n&&(n={});var i=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(r,void 0,void 0,function(){var r;return Object(qc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ny({next:function(o){e.enqueueAndForget(function(){return Fm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ll(cl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ll(cl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Bm(lh(n.path),o,{includeMetadataChanges:!0,uo:!0});return Mm(t,s)},[4,zy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Ky(t,e,n){var r=this;void 0===n&&(n={});var i=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(r,void 0,void 0,function(){var r;return Object(qc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ny({next:function(n){e.enqueueAndForget(function(){return Fm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ll(cl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Bm(n,o,{includeMetadataChanges:!0,uo:!0});return Mm(t,s)},[4,zy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var $y=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Wy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Qy=new Map,Zy=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Jy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Rg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Yy=function(){function t(t){var e=this;this.fc=null,this.currentUser=Rg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Gc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Zc("string"==typeof n.accessToken),new Zy(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Zc(null===t||"string"==typeof t),new Rg(t)},t}(),Xy=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=Rg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),tv=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Xy(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(Rg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ev(t,e,n){if(!n)throw new ll(cl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function nv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ll(cl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function rv(t,e,n,r){if(!0===e&&!0===r)throw new ll(cl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function iv(t){if(!gl.isDocumentKey(t))throw new ll(cl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ov(t){if(gl.isDocumentKey(t))throw new ll(cl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function sv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Qc()}function av(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ll(cl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=sv(t);throw new ll(cl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function uv(t,e){if(e<=0)throw new ll(cl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var cv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ll(cl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ll(cl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,rv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),lv=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,t instanceof Wy?(this._databaseId=t,this._credentials=new Jy):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ll(cl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wy(t.options.projectId)}(t),this._credentials=new Yy(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ll(cl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ll(cl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Jy;switch(t.type){case"gapi":var e=t.client;return Zc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new tv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ll(cl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Qy.get(this))&&(Gc("ComponentProvider","Removing Datastore"),Qy.delete(this),t.terminate()),Promise.resolve();var t},t}(),hv=function(t){this._delegate=t},fv=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pv(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),dv=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,lh(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new fv(this.firestore,null,new gl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(dv);function gv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof hv&&(t=t._delegate),ev("collection","path",e),t instanceof lv)return ov(n=fl.fromString.apply(fl,Object(qc.f)([e],r))),new pv(t,null,n);if(!(t instanceof fv||t instanceof pv))throw new ll(cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ov(n=fl.fromString.apply(fl,Object(qc.f)([t.path],r)).child(fl.fromString(e))),new pv(t.firestore,null,n)}function mv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof hv&&(t=t._delegate),1===arguments.length&&(e=Xc.u()),ev("doc","path",e),t instanceof lv)return iv(n=fl.fromString.apply(fl,Object(qc.f)([e],r))),new fv(t,null,new gl(n));if(!(t instanceof fv||t instanceof pv))throw new ll(cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return iv(n=t._path.child(fl.fromString.apply(fl,Object(qc.f)([e],r)))),new fv(t.firestore,t instanceof pv?t._converter:null,new gl(n))}function yv(t,e){return t instanceof hv&&(t=t._delegate),e instanceof hv&&(e=e._delegate),(t instanceof fv||t instanceof pv)&&(e instanceof fv||e instanceof pv)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function vv(t,e){return t instanceof hv&&(t=t._delegate),e instanceof hv&&(e=e._delegate),t instanceof dv&&e instanceof dv&&t.firestore===e.firestore&&bh(t._query,e._query)&&t._converter===e._converter}var bv=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Yg(this,"async_queue_retry"),this.bc=function(){var e=Zg();e&&Gc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Zg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Zg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(qc.b)(this,void 0,void 0,function(){var t,e=this;return Object(qc.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Wd(t=n.sent()))throw t;return Gc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,Kc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=jm.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Qc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(qc.b)(this,void 0,void 0,function(){var t;return Object(qc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function wv(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Bd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var _v=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new bv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(qc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Sv(this),this._firestoreClient.terminate()},e}(lv);function Ev(t){return t._firestoreClient||Sv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Sv(t){var e=t._freezeSettings(),n=function(t,e,n){return new $y(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Py(t._credentials,t._queue,n)}function Ov(t,e,n){var r=this,i=new Bd;return t.asyncQueue.enqueue(function(){return Object(qc.b)(r,void 0,void 0,function(){var r;return Object(qc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ly(t,n)];case 1:return o.sent(),[4,My(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===cl.FAILED_PRECONDITION||t.code===cl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Iv(t){if(t._initialized||t._terminated)throw new ll(cl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Tv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ll(cl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Cv=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ml.fromBase64String(e))}catch(e){throw new ll(cl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ml.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),xv=function(t){this._methodName=t},Av=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ll(cl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ll(cl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return tl(this._lat,t._lat)||tl(this._long,t._long)},t}(),jv=/^__.*__$/,kv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new nf(t,this.data,this.fieldMask,e,this.fieldTransforms):new ef(t,this.data,e,this.fieldTransforms)},t}(),Nv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new nf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Rv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qc()}}var Dv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return tb(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Rv(this.Fc)&&jv.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Pv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Jg(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Dv({Fc:t,methodName:e,Kc:n,path:pl.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function Lv(t){var e=t._freezeSettings(),n=Jg(t._databaseId);return new Pv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Zv("Data must be an object, but it was:",s,r);var a,u,c=Wv(r,s);if(o.merge)a=new Th(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Jv(e,f[h],n);if(!s.contains(d))throw new ll(cl.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");eb(l,d)||l.push(d)}a=new Th(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new kv(new Ch(c),a,u)}var Fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(xv);function Uv(t,e,n){return new Dv({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype._toFieldTransform=function(t){return new Gh(t.path,new Mh)},e.prototype.isEqual=function(t){return t instanceof e},e}(xv),qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(qc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Uv(this,t,!0),n=this.jc.map(function(t){return $v(t,e)}),r=new Fh(n);return new Gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xv),Bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(qc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Uv(this,t,!0),n=this.jc.map(function(t){return $v(t,e)}),r=new Vh(n);return new Gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xv),Hv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(qc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Bh(t.D,Nh(t.D,this.Gc));return new Gh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(xv);function zv(t,e,n,r){var i=t.Wc(1,e,n);Zv("Data must be an object, but it was:",i,r);var o=[],s=new xh;il(r,function(t,r){var a=Xv(e,t,n);r instanceof hv&&(r=r._delegate);var u=i.Bc(a);if(r instanceof Fv)o.push(a);else{var c=$v(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Th(o);return new Nv(s.v(),a,i.fieldTransforms)}function Gv(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Jv(e,r,n)],u=[i];if(o.length%2!=0)throw new ll(cl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Jv(e,o[c])),u.push(o[c+1]);for(var l=[],h=new xh,f=a.length-1;f>=0;--f)if(!eb(l,a[f])){var d=a[f],p=u[f];p instanceof hv&&(p=p._delegate);var g=s.Bc(d);if(p instanceof Fv)l.push(d);else{var m=$v(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new Th(l);return new Nv(h.v(),y,s.fieldTransforms)}function Kv(t,e,n,r){return void 0===r&&(r=!1),$v(n,t.Wc(r?4:3,e))}function $v(t,e){if(t instanceof hv&&(t=t._delegate),Qv(t))return Zv("Unsupported field value:",e,t),Wv(t,e);if(t instanceof xv)return function(t,e){if(!Rv(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=$v(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof hv&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Nh(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_l.fromDate(t);return{timestampValue:Hf(e.D,n)}}if(t instanceof _l)return n=new _l(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Hf(e.D,n)};if(t instanceof Av)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cv)return{bytesValue:zf(e.D,t._byteString)};if(t instanceof fv){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:$f(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+sv(t))}(t,e)}function Wv(t,e){var n={};return ol(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(t,function(t,r){var i=$v(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Qv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _l||t instanceof Av||t instanceof Cv||t instanceof fv||t instanceof xv)}function Zv(t,e,n){if(!Qv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=sv(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Jv(t,e,n){if(e instanceof hv&&(e=e._delegate),e instanceof Tv)return e._internalPath;if("string"==typeof e)return Xv(t,e);throw tb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Yv=new RegExp("[~\\*/\\[\\]]");function Xv(t,e,n){if(e.search(Yv)>=0)throw tb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Tv.bind.apply(Tv,Object(qc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw tb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function tb(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ll(cl.INVALID_ARGUMENT,(a+=". ")+t+u)}function eb(t,e){return t.some(function(t){return t.isEqual(e)})}var nb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new fv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new rb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(ib("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),rb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(nb);function ib(t,e){return"string"==typeof e?Xv(t,e):e instanceof hv?e._delegate._internalPath:e._internalPath}var ob=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),sb=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(qc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(ib("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(nb),ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(sb),ub=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ob(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new ab(n._firestore,n._userDataWriter,r.key,r,new ob(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ll(cl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new ab(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ob(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new ab(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ob(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:cb(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function cb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qc()}}function lb(t,e){return t instanceof sb&&e instanceof sb?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ub&&e instanceof ub&&t._firestore===e._firestore&&vv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function hb(t){if(fh(t)&&0===t.explicitOrderBy.length)throw new ll(cl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fb=function(){};function db(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var pb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(qc.c)(e,t),e.prototype._apply=function(t){var e=Lv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ll(cl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){_b(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(wb(r,t,l[c]));a={arrayValue:{values:u}}}else a=wb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||_b(s,o),a=Kv(n,"where",s,"in"===o||"not-in"===o);var h=$l.create(i,o,a);return function(t,e){if(e.g()){var n=ph(t);if(null!==n&&!n.isEqual(e.field))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=dh(t);null!==r&&Eb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ll(cl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new dv(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(fb),gb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(qc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ll(cl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ll(cl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ih(e,n);return function(t,e){if(null===dh(t)){var n=ph(t);null!==n&&Eb(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new dv(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new uh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(fb),mb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(qc.c)(e,t),e.prototype._apply=function(t){return new dv(t.firestore,t._converter,vh(t._query,this.Xc,this.Zc))},e}(fb),yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(qc.c)(e,t),e.prototype._apply=function(t){var e=bb(t,this.type,this.ta,this.ea);return new dv(t.firestore,t._converter,function(t,e){return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(fb),vb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(qc.c)(e,t),e.prototype._apply=function(t){var e=bb(t,this.type,this.ta,this.ea);return new dv(t.firestore,t._converter,function(t,e){return new uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(fb);function bb(t,e,n,r){if(n[0]instanceof hv&&(n[0]=n[0]._delegate),n[0]instanceof nb)return function(t,e,n,r,i){if(!r)throw new ll(cl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=mh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Nl(e,r.key));else{var c=r.field(u.field);if(El(c))throw new ll(cl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ll(cl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new nh(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Lv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ll(cl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ll(cl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!gh(t)&&-1!==c.indexOf("/"))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(fl.fromString(c));if(!gl.isDocumentKey(l))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new gl(l);a.push(Nl(e,h))}else{var f=Kv(n,r,c);a.push(f)}}return new nh(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function wb(t,e,n){if(n instanceof hv&&(n=n._delegate),"string"==typeof n){if(""===n)throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!gh(e)&&-1!==n.indexOf("/"))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fl.fromString(n));if(!gl.isDocumentKey(r))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Nl(t,new gl(r))}if(n instanceof fv)return Nl(t,n._key);throw new ll(cl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+sv(n)+".")}function _b(t,e){if(!Array.isArray(t)||0===t.length)throw new ll(cl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ll(cl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Eb(t,e,n){if(!n.isEqual(e))throw new ll(cl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Sb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Il(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(wl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Qc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return il(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Av(bl(t.latitude),bl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Sl(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ol(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=vl(t);return new _l(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=fl.fromString(t);Zc(vd(n));var r=new Wy(n.get(1),n.get(3)),i=new gl(n.popFirst(5));return r.isEqual(e)||Kc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ob(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ib=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qc.c)(e,t),e.prototype.convertBytes=function(t){return new Cv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new fv(this.firestore,null,e)},e}(Sb),Tb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Lv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Cb(t,this._firestore),i=Ob(r._converter,e,n),o=Mv(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,$h.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Cb(t,this._firestore);return e instanceof hv&&(e=e._delegate),o="string"==typeof e||e instanceof Tv?Gv(this._dataReader,"WriteBatch.update",s._key,e,n,r):zv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,$h.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Cb(t,this._firestore);return this._mutations=this._mutations.concat(new lf(e._key,$h.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ll(cl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Cb(t,e){if(t instanceof hv&&(t=t._delegate),t.firestore!==e)throw new ll(cl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var xb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qc.c)(e,t),e.prototype.convertBytes=function(t){return new Cv(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new fv(this.firestore,null,e)},e}(Sb);function Ab(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=av(t,fv);var o=av(t.firestore,_v),s=Lv(o);return e instanceof hv&&(e=e._delegate),kb(o,[("string"==typeof e||e instanceof Tv?Gv(s,"updateDoc",t._key,e,n,r):zv(s,"updateDoc",t._key,e)).toMutation(t._key,$h.exists(!0))])}function jb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof hv&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||wv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(wv(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof fv)c=av(t.firestore,_v),l=lh(t._key.path),u={next:function(e){i[a]&&i[a](Nb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=av(t,dv);c=av(d.firestore,_v),l=d._query;var p=new xb(c);u={next:function(t){i[a]&&i[a](new ub(c,p,d,t))},error:i[a+1],complete:i[a+2]},hb(t._query)}return function(t,e,n,r){var i=this,o=new Ny(r),s=new Bm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(i,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return e=Mm,[4,zy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(i,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return e=Fm,[4,zy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Ev(c),l,h,u)}function kb(t,e){return function(t,e){var n=this,r=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var n;return Object(qc.d)(this,function(i){switch(i.label){case 0:return n=ty,[4,Hy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Ev(t),e)}function Nb(t,e,n){var r=n.docs.get(e._key),i=new xb(t);return new sb(t,i,e._key,r,new ob(n.hasPendingWrites,n.fromCache),e._converter)}var Rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(qc.c)(e,t),e.prototype.get=function(e){var n=this,r=Cb(e,this._firestore),i=new xb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new sb(n._firestore,i,r._key,t._document,new ob(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Lv(t)}return t.prototype.get=function(t){var e=this,n=Cb(t,this._firestore),r=new Ib(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Qc();var i=t[0];if(i instanceof Vl)return new nb(e._firestore,r,n._key,null,n._converter);if(i instanceof Ul)return new nb(e._firestore,r,i.key,i,n._converter);throw Qc()})},t.prototype.set=function(t,e,n){var r=Cb(t,this._firestore),i=Ob(r._converter,e,n),o=Mv(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Cb(t,this._firestore);return e instanceof hv&&(e=e._delegate),o="string"==typeof e||e instanceof Tv?Gv(this._dataReader,"Transaction.update",s._key,e,n,r):zv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Cb(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Db(){if("undefined"==typeof Uint8Array)throw new ll(cl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Pb(){if("undefined"==typeof atob)throw new ll(cl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.fromBase64String=function(t){return Pb(),new e(Cv.fromBase64String(t))},e.fromUint8Array=function(t){return Db(),new e(Cv.fromUint8Array(t))},e.prototype.toBase64=function(){return Pb(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Db(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(hv),Mb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Iv(t=av(t,_v));var n=Ev(t),r=t._freezeSettings(),i=new ky;return Ov(n,i,new Ay(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Iv(t=av(t,_v));var e=Ev(t),n=t._freezeSettings(),r=new ky;return Ov(e,r,new jy(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ll(cl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Bd;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(qc.b)(e,void 0,void 0,function(){var e;return Object(qc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(qc.b)(this,void 0,void 0,function(){return Object(qc.d)(this,function(e){switch(e.label){case 0:return Gd.At()?[4,Gd.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(ng(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Fb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Wy||(i.sa=e),i}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=av(t,lv))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&$c("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(qc.b)(e,void 0,void 0,function(){var e,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:return[4,Vy(t)];case 1:return e=r.sent(),[4,By(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Jc(t);return e.Qr.delete(0),om(e)}(n))]}})})})}(Ev(av(this._delegate,_v)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(qc.b)(e,void 0,void 0,function(){var e,n;return Object(qc.d)(this,function(r){switch(r.label){case 0:return[4,Vy(t)];case 1:return e=r.sent(),[4,By(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(qc.b)(this,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return(e=Jc(t)).Qr.add(0),[4,sm(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(Ev(av(this._delegate,_v)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&rv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(e,void 0,void 0,function(){var e;return Object(qc.d)(this,function(r){switch(r.label){case 0:return e=sy,[4,Hy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Ev(av(this._delegate,_v)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ny(e);return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jc(t).Zr.add(e),e.next()},[4,zy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var e;return Object(qc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Jc(t).Zr.delete(e)},[4,zy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Ev(t=av(t,_v)),wv(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new ll(cl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Yb(this,gv(this._delegate,t))}catch(t){throw zb(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Hb(this,mv(this._delegate,t))}catch(t){throw zb(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Qb(this,function(t,e){if(t=av(t,lv),ev("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ll(cl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new dv(t,null,function(t){return new uh(fl.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw zb(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var n;return Object(qc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Uy(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Dy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Ev(t),function(n){return e(new Rb(t,n))})}(this._delegate,function(n){return t(new Vb(e,n))})},e.prototype.batch=function(){var t=this;return Ev(this._delegate),new qb(new Tb(this._delegate,function(e){return kb(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new ll(cl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new ll(cl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(hv),Ub=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(qc.c)(e,t),e.prototype.convertBytes=function(t){return new Lb(new Cv(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Hb.ia(e,this.firestore,null)},e}(Sb),Vb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Ub(e),r}return Object(qc.c)(e,t),e.prototype.get=function(t){var e=this,n=Xb(t);return this._delegate.get(n).then(function(t){return new $b(e._firestore,new sb(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Xb(t);return n?(nv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(qc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xb(t);return this._delegate.delete(e),this},e}(hv),qb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.set=function(t,e,n){var r=Xb(t);return n?(nv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(qc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xb(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(hv),Bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(qc.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new ab(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Wb(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Ub(t),n),i.set(n,o)),o},e}(hv);Bb.oa=new WeakMap;var Hb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Ub(e),r}return Object(qc.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new ll(cl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new fv(n._delegate,r,new gl(t)))},e.ia=function(t,n,r){return new e(n,new fv(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Yb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Yb(this.firestore,gv(this._delegate,t))}catch(t){throw zb(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof hv&&(t=t._delegate),t instanceof fv&&yv(this._delegate,t)},e.prototype.set=function(t,e){e=nv("DocumentReference.set",e);try{return function(t,e,n){t=av(t,fv);var r=av(t.firestore,_v),i=Ob(t._converter,e,n);return kb(r,[Mv(Lv(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,$h.none())])}(this._delegate,t,e)}catch(t){throw zb(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ab(this._delegate,t):Ab.apply(void 0,Object(qc.f)([this._delegate,t,e],n))}catch(t){throw zb(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return kb(av((t=this._delegate).firestore,_v),[new lf(t._key,$h.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Gb(e),i=Kb(e,function(e){return new $b(t.firestore,new sb(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return jb(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=av(t,fv);var e=av(t.firestore,_v),n=Ev(e),r=new xb(e);return function(t,e){var n=this,r=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var n;return Object(qc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i;return Object(qc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Jc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Ul?n.resolve(i):i instanceof Vl?n.resolve(null):n.reject(new ll(cl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=km(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,qy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new sb(e,r,t._key,n,new ob(n instanceof Ul&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=av(t,fv);var e=av(t.firestore,_v);return Gy(Ev(e),t._key,{source:"server"}).then(function(n){return Nb(e,t,n)})}(this._delegate):function(t){t=av(t,fv);var e=av(t.firestore,_v);return Gy(Ev(e),t._key).then(function(n){return Nb(e,t,n)})}(this._delegate)).then(function(t){return new $b(e.firestore,new sb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Bb.ra(this.firestore,t):null))},e}(hv);function zb(t,e,n){return t.message=t.message.replace(e,n),t}function Gb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!wv(r))return r}return{}}function Kb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=wv(t[0])?t[0]:wv(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var $b=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Hb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return lb(this._delegate,t._delegate)},e}(hv),Wb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}($b),Qb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Ub(e),r}return Object(qc.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,db(this._delegate,function(t,e,n){var r=e,i=ib("where",t);return new pb(i,r,n)}(t,n,r)))}catch(t){throw zb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,db(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=ib("orderBy",t);return new gb(r,n)}(t,n)))}catch(t){throw zb(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,db(this._delegate,function(t){return uv("limit",t),new mb("limit",t,"F")}(t)))}catch(t){throw zb(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,db(this._delegate,function(t){return uv("limitToLast",t),new mb("limitToLast",t,"L")}(t)))}catch(t){throw zb(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw zb(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw zb(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vb("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw zb(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vb("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw zb(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return vv(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=av(t,dv);var e=av(t.firestore,_v),n=Ev(e),r=new xb(e);return function(t,e){var n=this,r=new Bd;return t.asyncQueue.enqueueAndForget(function(){return Object(qc.b)(n,void 0,void 0,function(){var n;return Object(qc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(qc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(qc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,yg(t,e,!0)];case 1:return a=u.sent(),r=new $m(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=km(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,qy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new ub(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=av(t,dv);var e=av(t.firestore,_v),n=Ev(e),r=new xb(e);return Ky(n,t._query,{source:"server"}).then(function(n){return new ub(e,r,t,n)})}(this._delegate):function(t){t=av(t,dv);var e=av(t.firestore,_v),n=Ev(e),r=new xb(e);return hb(t._query),Ky(n,t._query).then(function(n){return new ub(e,r,t,n)})}(this._delegate)).then(function(t){return new Jb(e.firestore,new ub(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Gb(e),i=Kb(e,function(e){return new Jb(t.firestore,new ub(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return jb(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Bb.ra(this.firestore,t):null))},e}(hv),Zb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Wb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(hv),Jb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Qb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Wb(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Zb(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Wb(n._firestore,r))})},e.prototype.isEqual=function(t){return lb(this._delegate,t._delegate)},e}(hv),Yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(qc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Hb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Hb(this.firestore,void 0===t?mv(this._delegate):mv(this._delegate,t))}catch(t){throw zb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=av(t.firestore,_v),r=mv(t),i=Ob(t._converter,e);return kb(n,[Mv(Lv(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,$h.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Hb(e.firestore,t)})},e.prototype.isEqual=function(t){return yv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Bb.ra(this.firestore,t):null))},e}(Qb);function Xb(t){return t instanceof hv&&(t=t._delegate),av(t,fv)}var tw,ew=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Tv.bind.apply(Tv,Object(qc.f)([void 0],e))))||this}return Object(qc.c)(e,t),e.documentId=function(){return new e(pl.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof hv&&(t=t._delegate),t instanceof Tv&&this._delegate._internalPath.isEqual(t._internalPath)},e}(hv),nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(qc.c)(e,t),e.serverTimestamp=function(){var t=new Vv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Fv("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qv("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bv("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Hv("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(hv),rw=n("/6Yf"),iw={Firestore:Fb,GeoPoint:Av,Timestamp:_l,Blob:Lb,Transaction:Vb,WriteBatch:qb,DocumentReference:Hb,DocumentSnapshot:$b,Query:Qb,QueryDocumentSnapshot:Wb,QuerySnapshot:Jb,CollectionReference:Yb,FieldPath:ew,FieldValue:nw,setLogLevel:function(t){Hc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new rw.a("firestore",function(t){return function(t,e){return new Fb(t,new _v(t,e),new Mb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},iw)))})(tw=Mo.a),tw.registerVersion("@firebase/firestore","2.2.1");var ow=n("qgXg"),sw=n("Ylt2");class aw extends vt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new uw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new bt.a;if(this.isStopped||this.hasError?o=we.a.EMPTY:(this.observers.push(t),o=new sw.a(this,t)),r&&t.add(t=new Po.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ow.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class uw{constructor(t,e){this.time=t,this.value=e}}function cw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new aw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function lw(t,e){return e?qt(()=>t,e):qt(()=>t)}var hw=n("tf+s");const fw=new r.r("angularfire2.auth.use-emulator"),dw=new r.r("angularfire2.auth.settings"),pw=new r.r("angularfire2.auth.tenant-id"),gw=new r.r("angularfire2.auth.langugage-code"),mw=new r.r("angularfire2.auth.use-device-language"),yw=new r.r("angularfire.auth.persistence");let vw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ko.d(i),f=Object(ko.h)(h),d=new vt.a,p=Object(yt.a)(void 0).pipe(Object(Po.b)(h.outsideAngular),qt(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(Ut.a)(()=>Object(ko.g)(t,i,e)),Object(Ut.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ko.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),cw({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(yt.a)(null);else{p.pipe(ye()).subscribe();const t=p.pipe(qt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,cw({bufferSize:1,refCount:!1})),e=t=>new Ct.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(qt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(qt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(lw(n),Object(hw.a)(h.outsideAngular),Object(Po.b)(h.insideAngular)),this.user=t.pipe(lw(r),Object(hw.a)(h.outsideAngular),Object(Po.b)(h.insideAngular)),this.idToken=this.user.pipe(qt(t=>t?Object(mt.a)(t.getIdToken()):Object(yt.a)(null))),this.idTokenResult=this.user.pipe(qt(t=>t?Object(mt.a)(t.getIdTokenResult()):Object(yt.a)(null))),this.credential=Object(Ai.a)(t,d,this.authState.pipe(Yt(t=>!t))).pipe(Object(Ut.a)(t=>(null==t?void 0:t.user)?t:null),Object(hw.a)(h.outsideAngular),Object(Po.b)(h.insideAngular))}return Object(ko.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ko.c),r.Zb(ko.b,8),r.Zb(r.C),r.Zb(r.A),r.Zb(fw,8),r.Zb(dw,8),r.Zb(pw,8),r.Zb(gw,8),r.Zb(mw,8),r.Zb(yw,8))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(ko.c),Object(r.Zb)(ko.b,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(fw,8),Object(r.Zb)(dw,8),Object(r.Zb)(pw,8),Object(r.Zb)(gw,8),Object(r.Zb)(mw,8),Object(r.Zb)(yw,8))},token:t,providedIn:"any"}),t})();function bw(t,e){return function(t,e=yi.b){return new Ct.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ww(t,e){return bw(t,e).pipe(Object(Ut.a)(t=>({payload:t,type:"query"})))}function _w(t,e){return ww(t,e).pipe(Wt(void 0),No(),Object(Ut.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Ew(t,e,n){return _w(t,n).pipe(Qt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Sw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Ri(void 0,void 0)),Object(Ut.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Sw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Ow(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(ko.e)(vw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Iw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=_w(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ut.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Wt(void 0),No(),Yt(([t,e])=>e.length>0||!t),Object(Ut.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ow(t);return Ew(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Po.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Tw(this.ref.doc(t),this.afs)}}class Tw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Nw(n,e);return new Iw(r,i,this.afs)}snapshotChanges(){return bw(this.ref,this.afs.schedulers.outsideAngular).pipe(Wt(void 0),No(),Object(Ut.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ut.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(mt.a)(this.ref.get(t)).pipe(Object(Po.b)(this.afs.schedulers.insideAngular))}}class Cw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?_w(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Yt(t=>t.length>0),this.afs.keepUnstableUntilFirst):_w(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Qt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ow(t);return Ew(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ww(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ut.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(mt.a)(this.query.get(t)).pipe(Object(Po.b)(this.afs.schedulers.insideAngular))}}const xw=new r.r("angularfire2.enableFirestorePersistence"),Aw=new r.r("angularfire2.firestore.persistenceSettings"),jw=new r.r("angularfire2.firestore.settings"),kw=new r.r("angularfire2.firestore.use-emulator");function Nw(t,e=(t=>t)){return{query:e(t),ref:t}}let Rw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ko.d(o),this.keepUnstableUntilFirst=Object(ko.h)(this.schedulers);const c=Object(ko.g)(t,o,e);!Lo.a.auth&&u&&Object(ko.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ko.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(tw){return"undefined"!=typeof console&&console.warn(tw),Object(yt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(yt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Nw(n,e),o=this.schedulers.ngZone.run(()=>r);return new Iw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Cw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Tw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ko.c),r.Zb(ko.b,8),r.Zb(xw,8),r.Zb(jw,8),r.Zb(r.C),r.Zb(r.A),r.Zb(Aw,8),r.Zb(kw,8),r.Zb(fw,8))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(ko.c),Object(r.Zb)(ko.b,8),Object(r.Zb)(xw,8),Object(r.Zb)(jw,8),Object(r.Zb)(r.C),Object(r.Zb)(r.A),Object(r.Zb)(Aw,8),Object(r.Zb)(kw,8),Object(r.Zb)(fw,8))},token:t,providedIn:"any"}),t})(),Dw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:xw,useValue:!0},{provide:Aw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[Rw]}),t})();class Pw{}class Lw{}class Mw{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Mw?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Mw;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Mw?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Fw{encodeKey(t){return Uw(t)}encodeValue(t){return Uw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Uw(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Vw{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Fw,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Vw({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function qw(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Bw(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Hw(t){return"undefined"!=typeof FormData&&t instanceof FormData}class zw{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Mw),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Vw,this.urlWithParams=e}serializeBody(){return null===this.body?null:qw(this.body)||Bw(this.body)||Hw(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vw?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Hw(this.body)?null:Bw(this.body)?this.body.type||null:qw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vw?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new zw(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Gw=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Kw{constructor(t,e=200,n="OK"){this.headers=t.headers||new Mw,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class $w extends Kw{constructor(t={}){super(t),this.type=Gw.ResponseHeader}clone(t={}){return new $w({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ww extends Kw{constructor(t={}){super(t),this.type=Gw.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Ww({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Qw extends Kw{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zw(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Jw=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof zw)r=t;else{let i,o;i=n.headers instanceof Mw?n.headers:new Mw(n.headers),n.params&&(o=n.params instanceof Vw?n.params:new Vw({fromObject:n.params})),r=new zw(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(yt.a)(r).pipe(oe(t=>this.handler.handle(t)));if(t instanceof zw||"events"===n.observe)return i;const o=i.pipe(Yt(t=>t instanceof Ww));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Ut.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Ut.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Vw).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Zw(n,e))}post(t,e,n={}){return this.request("POST",t,Zw(n,e))}put(t,e,n={}){return this.request("PUT",t,Zw(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Pw))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();class Yw{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Xw=new r.r("HTTP_INTERCEPTORS");let t_=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const e_=/^\)\]\}',?\n/;class n_{}let r_=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),i_=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ct.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Mw(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new $w({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(e_,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Ww({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Qw({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Qw({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Gw.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Gw.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Gw.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(n_))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const o_=new r.r("XSRF_COOKIE_NAME"),s_=new r.r("XSRF_HEADER_NAME");class a_{}let u_=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s),r.Zb(r.C),r.Zb(o_))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),c_=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a_),r.Zb(s_))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),l_=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Xw,[]);this.chain=t.reduceRight((t,e)=>new Yw(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Lw),r.Zb(r.s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),h_=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:c_,useClass:t_}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:o_,useValue:e.cookieName}:[],e.headerName?{provide:s_,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[c_,{provide:Xw,useExisting:c_,multi:!0},{provide:a_,useClass:u_},{provide:o_,useValue:"XSRF-TOKEN"},{provide:s_,useValue:"X-XSRF-TOKEN"}]}),t})(),f_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[Jw,{provide:Pw,useClass:l_},i_,{provide:Lw,useExisting:i_},r_,{provide:n_,useExisting:r_}],imports:[[h_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var d_=n("z6cu");let p_=(()=>{class t{constructor(t){this.httpClient=t,this.urlConnection="https://www.strava.com/oauth/authorize?client_id=36102&redirect_uri=https://plr2388.github.io/HuaweiToStrava/strava&response_type=code&scope=activity:write"}getToken(t){if(null!=t){const e={headers:new Mw({"Content-Type":"application/json"})};return this.httpClient.post("https://www.strava.com/oauth/token?client_id=36102&client_secret=d4ca7b238820272379613358d5fbe5e9a4571e68&code="+t+"&grant_type=authorization_code",null,e).pipe(ee(this.handleError))}}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Object(d_.a)("Something bad happened; please try again later.")}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Jw))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const g_={apiKey:"AIzaSyDvoK8xNki9xglDT_iNBonCGKbdCogMY6o",authDomain:"huaweiexporter.firebaseapp.com",databaseURL:"https://huaweiexporter-default-rtdb.firebaseio.com",projectId:"huaweiexporter",storageBucket:"huaweiexporter.appspot.com",messagingSenderId:"420687984337",appId:"1:420687984337:web:f6ec3e21f266d02bde77f0",measurementId:"G-18FH7EVG9J"};let m_=(()=>{class t{constructor(t,e,n){this.route=t,this.stravaService=e,this.router=n,this.data={},this.code="",this.stravaSuccess=new r.n}ngOnInit(){this.code$=this.route.queryParamMap.pipe(Object(Ut.a)(t=>t.get("code"))),this.code$.subscribe(t=>{const e=this.stravaService.getToken(t);void 0!==e&&e.subscribe(t=>{const e=t.refresh_token;console.log(e),this.stravaSuccess.emit(e),this.router.navigate(["/"])})})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(xn),r.Nb(p_),r.Nb($r))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-receive-token-strava"]],outputs:{stravaSuccess:"stravaSuccess"},decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),y_=(()=>{class t{constructor(t,e){this.db=t,this.firebaseAuth=e,this.isLoggedIn=!1,this.dbPath="/User",this.usersRef=t.collection(this.dbPath)}signIn(t,e){return Object(qc.b)(this,void 0,void 0,function*(){yield this.firebaseAuth.signInWithEmailAndPassword(t,e).then(t=>{var e;this.isLoggedIn=!0,this.userId=null===(e=t.user)||void 0===e?void 0:e.uid})})}signUp(t,e){return Object(qc.b)(this,void 0,void 0,function*(){yield this.firebaseAuth.createUserWithEmailAndPassword(t,e).then(t=>{var e;this.isLoggedIn=!0,this.userId=null===(e=t.user)||void 0===e?void 0:e.uid})})}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user")}getAll(){return this.usersRef}create(t){return this.usersRef.add(Object.assign({},t))}update(t,e){return this.usersRef.doc(t).update(e)}delete(t){return this.usersRef.doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Rw),r.Zb(vw))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class v_{constructor(){this.userId="",this.stravaRefreshToken="",this.huaweiRefreshToken=""}}const b_=["*"];let w_=(()=>{class t{constructor(){this.stepIndex=0,this.isActive=!1}set activeState(t){this.isActive=t===this}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-progress-step"]],hostVars:2,hostBindings:function(t,e){2&t&&r.Fb("activeStep",e.isActive)},inputs:{activeState:"activeState"},ngContentSelectors:b_,decls:1,vars:0,template:function(t,e){1&t&&(r.kc(),r.jc(0))},styles:[".activeStep[_nghost-%COMP%]{display:inline-block;padding:10px;visibility:visible;opacity:1;position:absolute;top:0;left:0;right:0;width:100%;height:100%;transform:translateY(0);transition:all .6s cubic-bezier(.45,0,.55,1)}[_nghost-%COMP%]:not(.activeStep){visibility:hidden;padding:10px;transform:translateY(-8px);opacity:0}"]}),t})();var __=function(t){return t.PENDING="pending",t.IN_PROGRESS="in progress",t.COMPLETED="completed",t}({});let E_=(()=>{class t{constructor(){this.eventHelper=new vt.a}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const S_=function(t,e){return{complete:t,active:e}};function O_(t,e){if(1&t&&(r.fc(),r.ec(),r.Sb(0,"div",13),r.Ob(1,"div",14),r.Rb()),2&t){const t=r.gc().$implicit;r.lc("ngClass",r.pc(1,S_,"completed"===t.status,"in progress"===t.status))}}const I_=function(t,e){return{completed:t,"in-progress":e}};function T_(t,e){if(1&t&&(r.Qb(0),r.Sb(1,"div",5),r.fc(),r.Sb(2,"svg",6),r.Ob(3,"circle",7),r.Ob(4,"polyline",8),r.Rb(),r.xc(5,O_,2,4,"div",9),r.ec(),r.Sb(6,"div",10),r.Sb(7,"span",11),r.zc(8),r.Rb(),r.Sb(9,"span",12),r.zc(10),r.Rb(),r.Rb(),r.Rb(),r.Pb()),2&t){const t=e.$implicit,n=e.index,i=r.gc();r.Bb(1),r.lc("ngClass",r.pc(5,S_,"completed"===t.status,"in progress"===t.status)),r.Bb(4),r.lc("ngIf",n!==i.itemLength-1),r.Bb(3),r.Bc("step ",n+1,""),r.Bb(1),r.lc("ngClass",r.pc(8,I_,"completed"===t.status,"in progress"===t.status)),r.Bb(1),r.Ac(t.status)}}const C_=[[["app-progress-step"]]],x_=["app-progress-step"];let A_=(()=>{class t extends class{constructor(t){this.progressHelper=t,this.itemProgressList=[],this.activeIndex=0}completeLastStep(){this.itemProgressList[this.activeIndex].status=__.COMPLETED}undoLastComplete(){this.itemProgressList[this.activeIndex].status=__.IN_PROGRESS}switchStatusNext(t){this.itemProgressList[this.activeIndex-1].status=__.COMPLETED,this.itemProgressList[t].status=__.IN_PROGRESS}switchStatusPrev(t){this.itemProgressList[this.activeIndex+1].status=__.PENDING,this.itemProgressList[t].status=__.IN_PROGRESS}}{constructor(t){super(t),this.progressHelper=t,this.itemLength=0,this.stateChange=new r.n,this.steps=new r.E}set selectedIndex(t){this.activeIndex=t||0}ngOnInit(){this.progressHelper.eventHelper.subscribe({next:({prev:t,next:e})=>{e&&this.next(),t&&this.prev()}})}ngAfterContentInit(){this.initProgress(this.progressSteps.length),this.setActiveActiveStep(this.activeIndex),this.initStepIndex()}next(){this.increaseStep()}prev(){this.decreaseStep()}increaseStep(){this.activeIndex===this.itemLength-1&&this.itemProgressList[this.activeIndex].status!==__.COMPLETED&&this.completeLastStep(),this.activeIndex<this.itemLength-1&&(this.activeIndex++,this.switchStatusNext(this.activeIndex),this.setActiveActiveStep(this.activeIndex),this.emitStateChange())}decreaseStep(){this.activeIndex===this.itemLength-1&&this.itemProgressList[this.activeIndex].status===__.COMPLETED?this.undoLastComplete():this.activeIndex>0&&(this.activeIndex--,this.switchStatusPrev(this.activeIndex),this.setActiveActiveStep(this.activeIndex),this.emitStateChange())}emitStateChange(){this.stateChange.emit({activeIndex:this.activeIndex,activeStep:this.activeStep})}setActiveActiveStep(t){this.stepsExists&&(this.removeActiveStep(),this.updateActiveStep(t))}updateActiveStep(t){this.progressSteps[t].activeState=this.progressSteps[t]}removeActiveStep(){this.progressSteps.map(t=>{t.isActive&&(t.isActive=!1)})}initStepIndex(){this.progressSteps.forEach((t,e)=>t.stepIndex=e)}get activeStep(){return this.progressSteps[this.activeIndex]}get stepsExists(){return this.progressSteps&&Array.isArray(this.progressSteps)}get progressSteps(){return this.steps.toArray()}generateProgressArray(t){return[...Array(t).keys()].map(t=>({stepIndex:t,status:t===this.activeIndex?__.IN_PROGRESS:__.PENDING}))}initProgress(t){this.itemLength=t||0,this.itemProgressList=this.generateProgressArray(this.itemLength)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(E_))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-progress"]],contentQueries:function(t,e,n){if(1&t&&r.Gb(n,w_,0),2&t){let t;r.rc(t=r.dc())&&(e.steps=t)}},inputs:{selectedIndex:"selectedIndex"},outputs:{stateChange:"stateChange"},features:[r.yb],ngContentSelectors:x_,decls:6,vars:1,consts:[[1,"step-progress"],[1,"container"],["container",""],[4,"ngFor","ngForOf"],[1,"step-content"],[1,"check-box",3,"ngClass"],["id","checkbox","viewBox","0 0 100 100"],["cx","50.5","cy","49","r","45",1,"circle"],["points","28.5,51.9 41.9,65.3 72.5,32.8 ",1,"check"],["class","progress-line",3,"ngClass",4,"ngIf"],[1,"info"],[1,"step"],[1,"progress-info",3,"ngClass"],[1,"progress-line",3,"ngClass"],[1,"progress-percent"]],template:function(t,e){1&t&&(r.kc(C_),r.Sb(0,"div",0),r.Sb(1,"div",1,2),r.xc(3,T_,11,11,"ng-container",3),r.Rb(),r.Rb(),r.Sb(4,"div",4),r.jc(5),r.Rb()),2&t&&(r.Bb(3),r.lc("ngForOf",e.itemProgressList))},directives:[k,A,R],styles:["[_nghost-%COMP%]{margin-top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:grid;grid-template-rows:80px 1fr;grid-row-gap:100px;justify-content:center;grid-template-columns:-webkit-min-content;grid-template-columns:min-content}[_nghost-%COMP%]   .step-progress[_ngcontent-%COMP%]{margin-top:120px;padding:15px 15px 60px 0;box-shadow:0 15px 20px rgba(0,0,0,.1);border-radius:15px;grid-row:1/2;grid-column:1/-1;align-self:center}[_nghost-%COMP%]   .step-content[_ngcontent-%COMP%]{margin-top:40px;position:relative;align-self:start;grid-row:2/-1;grid-column:1/-1}.container[_ngcontent-%COMP%]{display:inline-flex;padding:30px;position:relative}.container[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]{width:48px;height:48px;stroke:#23c274;stroke-width:6}.container[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke-dasharray:320;stroke-dashoffset:320;fill:#d2d2d2;transition:stroke-dashoffset .5s,fill .5s cubic-bezier(.45,0,.55,1) .3s}.container[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{stroke-dasharray:70;stroke-dashoffset:70;stroke:#fff;fill:none;transition:all .5s cubic-bezier(.45,0,.55,1) .5s}.check-box[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.check-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{position:absolute;bottom:-60px;display:grid;grid-template-columns:-webkit-max-content;grid-template-columns:max-content}.check-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span.progress-info[_ngcontent-%COMP%]{text-transform:capitalize;font-size:11px;display:inline-block;margin-left:5px;padding:2px 10px;transform:translateY(6px);font-weight:500;color:currentColor;background:#eee;border-radius:20px;transition:background-color .1s ease-in-out}.check-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span.progress-info.in-progress[_ngcontent-%COMP%]{background-color:#234dc2;color:#fff}.check-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span.progress-info.completed[_ngcontent-%COMP%]{background-color:#23c274;color:#fff}.check-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span.step[_ngcontent-%COMP%]{margin-left:10px;text-transform:uppercase;font-weight:400;letter-spacing:.5px;font-size:11px;color:#777}.progress-line[_ngcontent-%COMP%]{width:140px;margin:0 10px;height:4px;overflow:hidden;display:inline-block;background:#d2d2d2;border-radius:10px}.progress-line[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{height:inherit;width:0;transition:all .5s cubic-bezier(.45,0,.55,1) .5s}.progress-line.active[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{background:#234dc2;width:50%}.progress-line.complete[_ngcontent-%COMP%]   .progress-percent[_ngcontent-%COMP%]{width:100%;background:#23c274}.check-box.active[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{fill:#234dc2}.check-box.complete[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke-dashoffset:0;fill:#23c274}.check-box.complete[_ngcontent-%COMP%]   svg#checkbox[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{stroke-dashoffset:0}"]}),t})(),j_=(()=>{class t{constructor(t,e){this.progressHelper=t,this.el=e,this.methods={next:!1,prev:!1}}listen(t){this.progressHelper.eventHelper.next(this.methods)}ngOnInit(){this.initMethods()}initMethods(){"next"in this&&(this.methods=Object.assign(Object.assign({},this.methods),{next:!0})),"prev"in this&&(this.methods=Object.assign(Object.assign({},this.methods),{prev:!0}))}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(E_),r.Nb(r.l))},t.\u0275dir=r.Ib({type:t,selectors:[["","progressStepNext",""],["","progressStepPrev",""]],hostBindings:function(t,e){1&t&&r.cc("click",function(t){return e.listen(t)})},inputs:{next:["progressStepNext","next"],prev:["progressStepPrev","prev"]}}),t})();function k_(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"h2"),r.zc(2,"Sign In"),r.Rb(),r.Sb(3,"label",3),r.zc(4,"Email: "),r.Rb(),r.Ob(5,"input",4,5),r.Ob(7,"br"),r.Sb(8,"label",6),r.zc(9,"Password:"),r.Rb(),r.Ob(10,"input",7,8),r.Ob(12,"br"),r.Sb(13,"button",9),r.cc("click",function(){r.tc(t);const e=r.sc(6),n=r.sc(11);return r.gc().onSignin(e.value,n.value)}),r.zc(14,"Sign in"),r.Rb(),r.Ob(15,"br"),r.Sb(16,"div"),r.zc(17,"You're not registered yet?"),r.Rb(),r.Sb(18,"button",9),r.cc("click",function(){return r.tc(t),r.gc().onShouldRegister()}),r.zc(19,"Click here"),r.Rb(),r.Rb()}}function N_(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div"),r.Sb(1,"h2"),r.zc(2,"Sign up"),r.Rb(),r.Sb(3,"label",10),r.zc(4,"Email:"),r.Rb(),r.Ob(5,"input",11,12),r.Ob(7,"br"),r.Sb(8,"label",13),r.zc(9,"Password:"),r.Rb(),r.Ob(10,"input",14,15),r.Ob(12,"br"),r.Sb(13,"button",9),r.cc("click",function(){r.tc(t);const e=r.sc(6),n=r.sc(11);return r.gc().onSignup(e.value,n.value)}),r.zc(14,"Sign up"),r.Rb(),r.Ob(15,"br"),r.Sb(16,"div"),r.zc(17,"You already have an account?"),r.Rb(),r.Sb(18,"button",9),r.cc("click",function(){return r.tc(t),r.gc().onShouldLogin()}),r.zc(19,"Click here"),r.Rb(),r.Rb()}}function R_(t,e){1&t&&(r.Sb(0,"p"),r.zc(1,"You successully log in! Click on Next to continue"),r.Rb())}function D_(t,e){1&t&&(r.Sb(0,"button",16),r.zc(1,"Next"),r.Rb())}let P_=(()=>{class t{constructor(t){this.firebaseService=t,this.isSignedIn=!1,this.isRegistered=!0,this.signInSuccess=new r.n}ngOnInit(){this.isSignedIn=this.firebaseService.isLoggedIn}onSignup(t,e){return Object(qc.b)(this,void 0,void 0,function*(){yield this.firebaseService.signUp(t,e),this.firebaseService.isLoggedIn&&(this.isSignedIn=!0,this.signInSuccess.emit(this.firebaseService.userId))})}onSignin(t,e){return Object(qc.b)(this,void 0,void 0,function*(){yield this.firebaseService.signIn(t,e),this.firebaseService.isLoggedIn&&(this.isSignedIn=!0,this.signInSuccess.emit(this.firebaseService.userId))})}onShouldRegister(){this.isRegistered=!1}onShouldLogin(){this.isRegistered=!0}handleLogout(){this.isSignedIn=!1}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(y_))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-login"]],outputs:{signInSuccess:"signInSuccess"},decls:6,vars:4,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x","crossorigin","anonymous"],[4,"ngIf"],["progressStepNext","","class","button",4,"ngIf"],["for","email1"],["type","text","id","email1"],["email",""],["for","password1"],["type","text","id","password1"],["password",""],[3,"click"],["for","email2"],["type","text","id","email2"],["emailSignup",""],["for","password2"],["type","text","id","password2"],["passwordSignup",""],["progressStepNext","",1,"button"]],template:function(t,e){1&t&&(r.Sb(0,"head"),r.Ob(1,"link",0),r.Rb(),r.xc(2,k_,20,0,"div",1),r.xc(3,N_,20,0,"div",1),r.xc(4,R_,2,0,"p",1),r.xc(5,D_,2,0,"button",2)),2&t&&(r.Bb(2),r.lc("ngIf",!e.isSignedIn&&e.isRegistered),r.Bb(1),r.lc("ngIf",!e.isSignedIn&&!e.isRegistered),r.Bb(1),r.lc("ngIf",e.isSignedIn),r.Bb(1),r.lc("ngIf",e.isSignedIn))},directives:[R,j_],styles:[""]}),t})(),L_=(()=>{class t{constructor(t){this.stravaService=t,this.stravaURLConnection="",this.connectionToStrava=new r.n}ngOnInit(){this.stravaURLConnection=this.stravaService.urlConnection}registerDataFromStrava(t){this.connectionToStrava.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(p_))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-connect-strava"]],outputs:{connectionToStrava:"connectionToStrava"},decls:3,vars:1,consts:[[3,"href"],[3,"stravaSuccess"]],template:function(t,e){1&t&&(r.Sb(0,"a",0),r.zc(1,"Click here to connect to Strava"),r.Rb(),r.Sb(2,"app-receive-token-strava",1),r.cc("stravaSuccess",function(t){return e.registerDataFromStrava(t)}),r.Rb()),2&t&&r.mc("href",e.stravaURLConnection,r.uc)},directives:[m_],styles:[""]}),t})();const M_=[{path:"strava",component:m_},{path:"",component:(()=>{class t{constructor(){this.currentUser=new v_}ngOnInit(){}setUserId(t){this.currentUser.userId=t}setStravaRefreshToken(t){this.currentUser.stravaRefreshToken=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-home"]],decls:13,vars:0,consts:[[3,"signInSuccess"],[3,"connectionToStrava"]],template:function(t,e){1&t&&(r.Sb(0,"app-progress"),r.Sb(1,"app-progress-step"),r.Sb(2,"h1"),r.zc(3,"Connect to your Huawei To Strava Account"),r.Rb(),r.Sb(4,"app-login",0),r.cc("signInSuccess",function(t){return e.setUserId(t)}),r.Rb(),r.Rb(),r.Sb(5,"app-progress-step"),r.Sb(6,"h1"),r.zc(7,"Connect to Strava"),r.Rb(),r.Sb(8,"app-connect-strava",1),r.cc("connectionToStrava",function(t){return e.setStravaRefreshToken(t)}),r.Rb(),r.Rb(),r.Sb(9,"app-progress-step"),r.Sb(10,"h1"),r.zc(11,"Connect to Huawei"),r.Rb(),r.Ob(12,"app-connect-strava"),r.Rb(),r.Rb())},directives:[A_,w_,P_,L_],styles:[""]}),t})()}];let F_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t,bootstrap:[di]}),t.\u0275inj=r.Kb({providers:[p_,y_],imports:[[gt,jo,ko.a.initializeApp(g_),Dw,f_,ii.forRoot(M_)],ii]}),t})();Object(r.U)(),dt().bootstrapModule(F_).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);