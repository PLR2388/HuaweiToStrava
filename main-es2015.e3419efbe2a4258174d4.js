(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?"[DEFAULT]":e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return on}),n.d(e,"b",function(){return Hc}),n.d(e,"c",function(){return Fc}),n.d(e,"d",function(){return Lc}),n.d(e,"e",function(){return Mc}),n.d(e,"f",function(){return Ll}),n.d(e,"g",function(){return Sl}),n.d(e,"h",function(){return Ru}),n.d(e,"i",function(){return tl}),n.d(e,"j",function(){return iu}),n.d(e,"k",function(){return Gc}),n.d(e,"l",function(){return uu}),n.d(e,"m",function(){return br}),n.d(e,"n",function(){return yc}),n.d(e,"o",function(){return bo}),n.d(e,"p",function(){return Tn}),n.d(e,"q",function(){return k}),n.d(e,"r",function(){return rn}),n.d(e,"s",function(){return Po}),n.d(e,"t",function(){return xu}),n.d(e,"u",function(){return Au}),n.d(e,"v",function(){return Kc}),n.d(e,"w",function(){return Ku}),n.d(e,"x",function(){return Cl}),n.d(e,"y",function(){return zu}),n.d(e,"z",function(){return _l}),n.d(e,"A",function(){return rl}),n.d(e,"B",function(){return On}),n.d(e,"C",function(){return Bc}),n.d(e,"D",function(){return Uc}),n.d(e,"E",function(){return hu}),n.d(e,"F",function(){return lu}),n.d(e,"G",function(){return Or}),n.d(e,"H",function(){return du}),n.d(e,"I",function(){return pr}),n.d(e,"J",function(){return Sn}),n.d(e,"K",function(){return jl}),n.d(e,"L",function(){return qu}),n.d(e,"M",function(){return ll}),n.d(e,"N",function(){return sn}),n.d(e,"O",function(){return yu}),n.d(e,"P",function(){return pu}),n.d(e,"Q",function(){return Wu}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return El}),n.d(e,"T",function(){return bl}),n.d(e,"U",function(){return d}),n.d(e,"V",function(){return vl}),n.d(e,"W",function(){return Rl}),n.d(e,"X",function(){return dl}),n.d(e,"Y",function(){return zc}),n.d(e,"Z",function(){return _o}),n.d(e,"ab",function(){return ea}),n.d(e,"bb",function(){return fr}),n.d(e,"cb",function(){return Qn}),n.d(e,"db",function(){return Ln}),n.d(e,"eb",function(){return Fn}),n.d(e,"fb",function(){return Bn}),n.d(e,"gb",function(){return qn}),n.d(e,"hb",function(){return Vn}),n.d(e,"ib",function(){return Un}),n.d(e,"jb",function(){return Js}),n.d(e,"kb",function(){return Dl}),n.d(e,"lb",function(){return Xs}),n.d(e,"mb",function(){return Zs}),n.d(e,"nb",function(){return Mn}),n.d(e,"ob",function(){return U}),n.d(e,"pb",function(){return Ko}),n.d(e,"qb",function(){return hs}),n.d(e,"rb",function(){return cs}),n.d(e,"sb",function(){return ls}),n.d(e,"tb",function(){return $s}),n.d(e,"ub",function(){return Tt}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Pn}),n.d(e,"xb",function(){return Mo}),n.d(e,"yb",function(){return vt}),n.d(e,"zb",function(){return eu}),n.d(e,"Ab",function(){return wi}),n.d(e,"Bb",function(){return $o}),n.d(e,"Cb",function(){return As}),n.d(e,"Db",function(){return Ks}),n.d(e,"Eb",function(){return Cs}),n.d(e,"Fb",function(){return Ac}),n.d(e,"Gb",function(){return Z}),n.d(e,"Hb",function(){return st}),n.d(e,"Ib",function(){return _}),n.d(e,"Jb",function(){return E}),n.d(e,"Kb",function(){return rt}),n.d(e,"Lb",function(){return at}),n.d(e,"Mb",function(){return ts}),n.d(e,"Nb",function(){return os}),n.d(e,"Ob",function(){return as}),n.d(e,"Pb",function(){return ss}),n.d(e,"Qb",function(){return is}),n.d(e,"Rb",function(){return rs}),n.d(e,"Sb",function(){return us}),n.d(e,"Tb",function(){return Ze}),n.d(e,"Ub",function(){return Gs}),n.d(e,"Vb",function(){return Ka}),n.d(e,"Wb",function(){return Wa}),n.d(e,"Xb",function(){return Ga}),n.d(e,"Yb",function(){return _n}),n.d(e,"Zb",function(){return en}),n.d(e,"ac",function(){return Pc}),n.d(e,"bc",function(){return fs}),n.d(e,"cc",function(){return kc}),n.d(e,"dc",function(){return ys}),n.d(e,"ec",function(){return dc}),n.d(e,"fc",function(){return pc}),n.d(e,"gc",function(){return vs}),n.d(e,"hc",function(){return gs}),n.d(e,"ic",function(){return es}),n.d(e,"jc",function(){return bs}),n.d(e,"kc",function(){return ws}),n.d(e,"lc",function(){return uc}),n.d(e,"mc",function(){return cc}),n.d(e,"nc",function(){return lc}),n.d(e,"oc",function(){return xc}),n.d(e,"pc",function(){return Zo}),n.d(e,"qc",function(){return zt}),n.d(e,"rc",function(){return yr}),n.d(e,"sc",function(){return it}),n.d(e,"tc",function(){return xs}),n.d(e,"uc",function(){return Xo}),n.d(e,"vc",function(){return Rc}),n.d(e,"wc",function(){return Us}),n.d(e,"xc",function(){return Bs}),n.d(e,"yc",function(){return Hs}),n.d(e,"zc",function(){return zs}),n.d(e,"Ac",function(){return Cc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function g(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():g(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function I(t){return T(t,S)||T(t,C)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function O(t){return t&&(t.hasOwnProperty(x)||t.hasOwnProperty(A))?t[x]:null}const S=u({"\u0275prov":u}),x=u({"\u0275inj":u}),C=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var k=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function N(t){const e=j;return j=t,e}function D(t,e,n){const r=I(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,U=M||q||F||V,B={},H=[],z=[],K=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),W=u({"\u0275pipe":u}),Q=u({"\u0275mod":u}),Y=u({"\u0275loc":u}),$=u({"\u0275fac":u}),J=u({__NG_ELEMENT_ID__:u});let X=0;function Z(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[G]||null}(t)}function et(t){return function(t){return t[W]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{nt[t.id]=t.type}),e}function it(t,e){return R(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=Z;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[K]||null}function ct(t,e){const n=t[Q]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty($)?t[$]:null}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gt(u&&u.currentValue,e,s===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let It;function Tt(t){It=t}function Ot(){return void 0!==It?It:"undefined"!=typeof document?document:void 0}function St(t){return!!t.listen}vt.ngInherit=!0;const xt={createRenderer:(t,e)=>Ot()};function Ct(t){for(;Array.isArray(t);)t=t[0];return t}function At(t,e){return Ct(e[t])}function kt(t,e){return Ct(e[t.index])}function jt(t,e){return t.data[e]}function Nt(t,e){return t[e]}function Dt(t,e){const n=e[t];return lt(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Lt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return qt.bindingsEnabled}function Bt(){return qt.lFrame.lView}function Ht(){return qt.lFrame.tView}function zt(t){qt.lFrame.contextLView=t}function Kt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return qt.lFrame.currentTNode}function Wt(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Qt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Yt(){return qt.lFrame.isParent}function $t(){qt.lFrame.isParent=!1}function Jt(){return qt.isInCheckNoChangesMode}function Xt(t){qt.isInCheckNoChangesMode=t}function Zt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex}function ee(){return qt.lFrame.bindingIndex++}function ne(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t){qt.lFrame.inI18n=t}function ie(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,oe(e)}function oe(t){qt.lFrame.currentDirectiveIndex=t}function se(){return qt.lFrame.currentQueryIndex}function ae(t){qt.lFrame.currentQueryIndex=t}function ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ce(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=he();return r.currentTNode=e,r.lView=t,!0}function le(t){const e=he(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function he(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?fe(t):e}function fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function de(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const pe=de;function ye(){const t=de();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function me(){return qt.lFrame.selectedIndex}function ge(t){qt.lFrame.selectedIndex=t}function ve(){const t=qt.lFrame;return jt(t.tView,t.selectedIndex)}function be(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Ie(t,e,3,n)}function _e(t,e,n,r){(3&t[2])===n&&Ie(t,e,n,r)}function Ee(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ie(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Oe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Se(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ce(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function xe(t){return 3===t||4===t||6===t}function Ce(t){return 64===t.charCodeAt(0)}function Ae(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ke(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ke(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function je(t){return-1!==t}function Ne(t){return 32767&t}function De(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Re=!0;function Pe(t){const e=Re;return Re=t,e}let Le=0;function Me(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Fe(r.data,t),Fe(e,null),Fe(r.blueprint,null));const i=qe(t,e),o=t.injectorIndex;if(je(i)){const t=Ne(i),n=De(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Fe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ue(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Le++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Be(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function He(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&k.Optional):D(e,r,n&k.Optional)}finally{N(o)}}return Be(r,e,n)}function ze(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!ce(e,t,r))return r&k.Host?Be(i,n,r):He(e,n,r,i);try{const t=o();if(null!=t||r&k.Optional)return t;b(n)}finally{pe()}}else if("number"==typeof o){let i=null,s=Ve(t,e),a=-1,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?qe(t,e):e[s+8],-1!==a&&Je(r,!1)?(i=e[1],s=Ne(a),e=De(a,e)):s=-1);-1!==s;){const t=e[1];if($e(o,s,t.data)){const t=We(s,e,n,i,r,u);if(t!==Ke)return t}a=e[s+8],-1!==a&&Je(r,e[1].data[s+8]===u)&&$e(o,s,e)?(i=t,s=Ne(a),e=De(a,e)):s=-1}}}return He(e,n,r,i)}const Ke={};function Ge(){return new Xe(Kt(),Bt())}function We(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Qe(a,s,n,null==r?dt(a)&&Re:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Ye(e,s,u,a):Ke}function Qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function Ye(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Oe){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Pe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;ce(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Pe(a),s.resolving=!1,pe()}}return i}function $e(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&k.Self||t&k.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ze(this._tNode,this._lView,t,void 0,e)}}function Ze(t){return R(()=>{const e=t.prototype.constructor,n=e[$]||tn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||tn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function tn(t){return y(t)?()=>{const e=tn(p(t));return e&&e()}:mt(t)}function en(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(xe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}function nn(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const on=new rn("AnalyzeForEntryComponents"),sn=Function;function an(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),an(r,e)):e!==t&&e.push(r)}return e}function un(t,e){t.forEach(t=>Array.isArray(t)?un(t,e):e(t))}function cn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ln(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function fn(t,e,n){let r=pn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dn(t,e){const n=pn(t,e);if(n>=0)return t[1|n]}function pn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},mn=/\n/gm,gn=u({provide:String,useValue:u});let vn;function bn(t){const e=vn;return vn=t,e}function wn(t,e=k.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?D(t,void 0,e):vn.get(t,e&k.Optional?null:void 0,e)}function _n(t,e=k.Default){return(j||wn)(p(t),e)}function En(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(_n(t,n))}else e.push(_n(r))}return e}function In(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=In(nn("Inject",t=>({token:t})),-1),On=In(nn("Optional"),8),Sn=In(nn("SkipSelf"),4);let xn;function Cn(t){var e;return(null===(e=function(){if(void 0===xn&&(xn=null,U.trustedTypes))try{xn=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xn}())||void 0===e?void 0:e.createHTML(t))||t}class An{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kn extends An{getTypeName(){return"HTML"}}class jn extends An{getTypeName(){return"Style"}}class Nn extends An{getTypeName(){return"Script"}}class Dn extends An{getTypeName(){return"URL"}}class Rn extends An{getTypeName(){return"ResourceURL"}}function Pn(t){return t instanceof An?t.changingThisBreaksApplicationSecurity:t}function Ln(t,e){const n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mn(t){return t instanceof An&&t.getTypeName()||null}function Fn(t){return new kn(t)}function Vn(t){return new jn(t)}function qn(t){return new Nn(t)}function Un(t){return new Dn(t)}function Bn(t){return new Rn(t)}function Hn(t){const e=new Kn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Cn(""),"text/html")}catch(t){return!1}}()?new zn(e):e}class zn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Cn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Kn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Cn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Cn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Gn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Qn(t){return(t=String(t)).match(Gn)||t.match(Wn)?t:"unsafe:"+t}function Yn(t){return(t=String(t)).split(",").map(t=>Qn(t.trim())).join(", ")}function $n(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Jn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Xn=$n("area,br,col,hr,img,wbr"),Zn=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tr=$n("rp,rt"),er=Jn(tr,Zn),nr=Jn(Xn,Jn(Zn,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(tr,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),er),rr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ir=$n("srcset"),or=Jn(rr,ir,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),sr=$n("script,style,template");class ar{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!nr.hasOwnProperty(e))return this.sanitizedSomething=!0,!sr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!or.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;rr[i]&&(o=Qn(o)),ir[i]&&(o=Yn(o)),this.buf.push(" ",e,'="',lr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();nr.hasOwnProperty(e)&&!Xn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(lr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ur=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cr=/([^\#-~ |!])/g;function lr(t){return t.replace(/&/g,"&amp;").replace(ur,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(cr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hr;function fr(t,e){let n=null;try{hr=hr||Hn(t);let r=e?String(e):"";n=hr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=hr.getInertBodyElement(r)}while(r!==o);return Cn((new ar).sanitizeChildren(dr(n)||n))}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function yr(t){const e=function(){const t=Bt();return t&&t[12]}();return e?e.sanitize(pr.URL,t)||"":Ln(t,"URL")?Pn(t):Qn(g(t))}function mr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function vr(t,...e){t.error(...e)}class br{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||vr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?mr(t)?mr(t):this._findContext(gr(t)):null}_findOriginalError(t){let e=gr(t);for(;e&&gr(e);)e=gr(e);return e}}const wr=/^>|^->|<!--|-->|--!>|<!-$/g,_r=/(<|>)/;function Er(t,e){t.__ngContext__=e}const Ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function Tr(t){return t instanceof Function?t():t}var Or=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Sr;function xr(t,e){return Sr(t,e)}function Cr(t){const e=t[3];return ht(e)?e[3]:e}function Ar(t){return jr(t[13])}function kr(t){return jr(t[4])}function jr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Nr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=Ct(r);0===t&&null!==n?null==i?zr(e,n,a):Hr(e,n,a,i||null,!0):1===t&&null!==n?Hr(e,n,a,i||null,!0):2===t?ni(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ct(n)&&Nr(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];ii(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Dr(t,e){return St(t)?t.createText(e):t.createTextNode(e)}function Rr(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}function Pr(t,e){return t.createComment(function(t){return t.replace(wr,t=>t.replace(_r,"\u200b$1\u200b"))}(e))}function Lr(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Mr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Fr(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Mr(o,r),e>0&&(t[n-1][4]=r[4]);const s=ln(t,10+e);ii(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Vr(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&ii(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&qr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Oe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Ct(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Mr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ur(t,e,n){return Br(t,e.parent,n)}function Br(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return kt(r,n)}function Hr(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function zr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Kr(t,e,n,r,i){null!==r?Hr(t,e,n,r,i):zr(t,e,n)}function Gr(t,e){return St(t)?t.parentNode(e):e.parentNode}function Wr(t,e,n){return $r(t,e,n)}function Qr(t,e,n){return 40&t.type?kt(t,n):null}let Yr,$r=Qr;function Jr(t,e){$r=t,Yr=e}function Xr(t,e,n,r){const i=Ur(t,r,e),o=e[11],s=Wr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Kr(o,i,n[a],s,!1);else Kr(o,i,n,s,!1);void 0!==Yr&&Yr(o,r,e,n,i)}function Zr(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return ei(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Zr(t,n);{const n=t[e.index];return ht(n)?ei(-1,n):Ct(n)}}if(32&n)return xr(e,t)()||Ct(t[e.index]);{const n=ti(t,e);return null!==n?Array.isArray(n)?n[0]:Zr(Cr(t[16]),n):Zr(t,e.next)}}return null}function ti(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ei(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Zr(t,r)}return e[7]}function ni(t,e,n){const r=Gr(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function ri(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Er(Ct(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)ri(t,e,n.child,r,i,o,!1),Nr(e,t,i,a,o);else if(32&u){const s=xr(n,r);let u;for(;u=s();)Nr(e,t,i,u,o);Nr(e,t,i,a,o)}else 16&u?oi(t,e,r,n,i,o):Nr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ii(t,e,n,r,i,o){ri(n,r,t.firstChild,e,i,o,!1)}function oi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Nr(e,t,i,a[u],o);else ri(t,e,a,s[3],i,o,!0)}function si(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ai(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ui(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function ci(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ui(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function li(t){return 4===t.type&&"ng-template"!==t.value}function hi(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function fi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(xe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!hi(t,u,n)||""===u&&1===e.length){if(di(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ci(t.attrs,c,n)){if(di(r))return!1;s=!0}continue}const l=pi(8&r?"class":u,i,li(t),n);if(-1===l){if(di(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ui(e,c,0)||2&r&&c!==t){if(di(r))return!1;s=!0}}}}else{if(!s&&!di(r)&&!di(u))return!1;if(s&&di(u))continue;s=!1,r=u|1&r}}return di(r)||s}function di(t){return 0==(1&t)}function pi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function yi(t,e,n=!1){for(let r=0;r<e.length;r++)if(fi(t,e[r],n))return!0;return!1}function mi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function gi(t,e){return t?":not("+e.trim()+")":e}function vi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||di(s)||(e+=gi(o,i),i=""),r=s,o=o||!di(r);n++}return""!==i&&(e+=gi(o,i)),e}const bi={};function wi(t){_i(Ht(),Bt(),me()+t,Jt())}function _i(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&_e(e,r,0,n)}ge(n)}function Ei(t,e){return t<<17|e<<2}function Ii(t){return t>>17&32767}function Ti(t){return 2|t}function Oi(t){return(131068&t)>>2}function Si(t,e){return-131069&t|e<<2}function xi(t){return 1|t}function Ci(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ae(i),n.contentQueries(2,e[o],o)}}}function Ai(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ki(t,e,n,r,i){let o=t.data[e];if(null===o)o=ji(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Wt();o.injectorIndex=null===t?-1:t.injectorIndex}return Qt(o,!0),o}function ji(t,e,n,r,i){const o=Gt(),s=Yt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Ni(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Di(t,e,n){le(e);try{const r=t.viewQuery;null!==r&&lo(1,r,n);const i=t.template;null!==i&&Li(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ci(t,e),t.staticViewQueries&&lo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)oo(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ye()}}function Ri(t,e,n,r){const i=e[2];if(256==(256&i))return;le(e);const o=Jt();try{Ft(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Li(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&_e(e,n,0,null),Ee(e,0)}if(function(t){for(let e=Ar(t);null!==e;e=kr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ar(t);null!==e;e=kr(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Lt(n)&&Ri(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ci(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&_e(e,n,1),Ee(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ge(~r);else{const i=r,o=n[++t],s=n[++t];ie(o,i),s(2,e[i])}}}finally{ge(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ro(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&lo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&_e(e,n,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{ye()}}function Pi(t,e,n,r){const i=e[10],o=!Jt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&Di(t,e,r),Ri(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Li(t,e,n,r,i){const o=me();try{ge(-1),2&r&&e.length>20&&_i(t,e,20,Jt()),n(r,i)}finally{ge(o)}}function Mi(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Fi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Me(n,e),Er(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Xi(e,n,r);const u=Ye(e,t,a,n);Er(u,e),null!==s&&to(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{ge(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];oe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Wi(r,i)}}finally{ge(-1),oe(s)}}(t,e,n))}function Vi(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function qi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ui(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ui(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:bi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Bi(t,e,n,r){const i=fo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&po(t).push(r,i.length-1))}function Hi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function zi(t,e,n,r,i,o,s,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(mo(t,n,c,r,i),dt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):Ce(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ki(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];yi(n,s.selectors,!1)&&(i||(i=[]),Ue(Me(n,e),t,s.type),yt(s)?(Qi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,$i(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ni(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ae(n.mergedAttrs,c.hostAttrs),Ji(t,n,e,u,c),Yi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||li(e)?null:eo(n,i);o.push(c),s=Hi(n,u,s),a=Hi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ae(n.mergedAttrs,n.attrs),i}function Gi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Wi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Qi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Yi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function $i(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ji(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new Oe(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Gi(t,e,0,r,Ni(t,n,i.hostVars,bi),i)}function Xi(t,e,n){const r=kt(e,t),i=qi(n),o=t[10],s=so(t,Ai(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Zi(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?g(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function to(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function eo(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function no(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ro(t,e){const n=Dt(e,t);if(Lt(n)){const t=n[1];80&n[2]?Ri(t,n,t.template,n[8]):n[5]>0&&io(n)}}function io(t){for(let n=Ar(t);null!==n;n=kr(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ri(t,e,t.template,e[8])}else e[5]>0&&io(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Lt(r)&&r[5]>0&&io(r)}}function oo(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Di(r,n,n[8])}function so(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ao(t){for(;t;){t[2]|=64;const e=Cr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function uo(t,e,n){const r=e[10];r.begin&&r.begin();try{Ri(t,e,t.template,n)}catch(i){throw yo(e,i),i}finally{r.end&&r.end()}}function co(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];Pi(i,r,i.template,n)}}(t[8])}function lo(t,e,n){ae(0),e(t,n)}const ho=(()=>Promise.resolve(null))();function fo(t){return t[7]||(t[7]=[])}function po(t){return t.cleanup||(t.cleanup=[])}function yo(t,e){const n=t[9],r=n?n.get(br,null):null;r&&r.handleError(e)}function mo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function go(t,e,n){const r=At(e,t);Rr(t[11],r,n)}function vo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const bo=new rn("INJECTOR",-1);class wo{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const _o=new rn("Set Injector scope."),Eo={},Io={},To=[];let Oo;function So(){return void 0===Oo&&(Oo=new wo),Oo}function xo(t,e=null,n=null,r){return new Co(t,n,e||So(),r)}class Co{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&un(e,n=>this.processProvider(n,t,e)),un([t],t=>this.processInjectorType(t,[],i)),this.records.set(bo,jo(void 0,this));const o=this.records.get(_o);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=k.Default){this.assertNotDestroyed();const r=bn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof rn)&&I(t);e=n&&this.injectableDefInScope(n)?jo(Ao(t),Eo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?So():this.parent).get(t,e=n&k.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(mn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{bn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=O(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=O(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{un(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];un(r,t=>this.processProvider(t,n,r||To))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,jo(a,Eo));const u=r.providers;if(null!=u&&!s){const e=t;un(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Do(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return No(t)?jo(void 0,t.useValue):jo(ko(t),Eo)}(t);if(Do(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=jo(void 0,Eo,!0),e.factory=()=>En(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Eo&&(e.value=Io,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Ao(t){const e=I(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof rn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=hn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[C]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ko(t,e,n){let r;if(Do(t)){const e=p(t);return mt(e)||Ao(e)}if(No(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...En(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>_n(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||Ao(e);r=()=>new e(...En(t.deps))}var i;return r}function jo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function No(t){return null!==t&&"object"==typeof t&&gn in t}function Do(t){return"function"==typeof t}const Ro=function(t,e,n){return function(t,e=null,n=null,r){const i=xo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Po=(()=>{class t{static create(t,e){return Array.isArray(t)?Ro(t,e,""):Ro(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=yn,t.NULL=new wo,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>_n(bo)}),t.__NG_ELEMENT_ID__=-1,t})();function Lo(t,e){be(Rt(t)[1],Kt())}function Mo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Fo(t.inputs),e.declaredInputs=Fo(t.declaredInputs),e.outputs=Fo(t.outputs);const n=i.hostBindings;n&&Uo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Vo(t,o),s&&qo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Mo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ae(i.hostAttrs,n=Ae(n,i.hostAttrs))}}(r)}function Fo(t){return t===B?{}:t===z?[]:t}function Vo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function qo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Uo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Bo=null;function Ho(){if(!Bo){const t=U.Symbol;if(t&&t.iterator)Bo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Bo=n)}}}return Bo}class zo{constructor(t){this.wrapped=t}static wrap(t){return new zo(t)}static unwrap(t){return zo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof zo}}function Ko(t){return!!Go(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ho()in t)}function Go(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Wo(t,e,n){return t[e]=n}function Qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Yo(t,e,n,r){const i=Qo(t,e,n);return Qo(t,e+1,r)||i}function $o(t,e,n,r){const i=Bt();return Qo(i,ee(),e)&&(Ht(),function(t,e,n,r,i,o){const s=kt(t,e);Zi(e[11],s,o,t.value,n,r,i)}(ve(),i,t,e,n,r)),$o}function Jo(t,e,n,r){return Qo(t,ee(),n)?e+g(n)+r:bi}function Xo(t,e,n,r,i,o,s,a){const u=Bt(),c=Ht(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ki(e,t,4,s||null,Mt(c,a));Ki(e,n,l,Mt(c,u)),be(e,l);const h=l.tViews=Ui(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Qt(h,!1);const f=u[11].createComment("");Xr(c,u,f,h),Er(f,u),so(u,u[l]=no(f,u,f,h)),pt(h)&&Fi(c,u,h),null!=s&&Vi(u,h,a)}function Zo(t){return Nt(qt.lFrame.contextLView,20+t)}function ts(t,e=k.Default){const n=Bt();return null===n?_n(t,e):ze(Kt(),n,p(t),e)}function es(t,e,n){const r=Bt();return Qo(r,ee(),e)&&zi(Ht(),ve(),r,t,e,r[11],n,!1),es}function ns(t,e,n,r,i){const o=i?"class":"style";mo(t,n,e.inputs[o],o,r)}function rs(t,e,n,r){const i=Bt(),o=Ht(),s=20+t,a=i[11],u=i[s]=Lr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ki(e,t,2,i,Mt(a,o));return Ki(e,n,u,Mt(a,s)),null!==u.attrs&&vo(u,u.attrs,!1),null!==u.mergedAttrs&&vo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Qt(c,!0);const l=c.mergedAttrs;null!==l&&Se(a,u,l);const h=c.classes;null!==h&&ai(a,u,h);const f=c.styles;null!==f&&si(a,u,f),64!=(64&c.flags)&&Xr(o,i,u,c),0===qt.lFrame.elementDepthCount&&Er(u,i),qt.lFrame.elementDepthCount++,pt(c)&&(Fi(o,i,c),Mi(o,c,i)),null!==r&&Vi(i,c)}function is(){let t=Kt();Yt()?$t():(t=t.parent,Qt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(be(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ns(n,e,Bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ns(n,e,Bt(),e.stylesWithoutHost,!1)}function os(t,e,n,r){rs(t,e,n,r),is()}function ss(t,e,n){const r=Bt(),i=Ht(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Mt(o,r),a=ki(e,t,8,"ng-container",s);return null!==s&&vo(a,s,!0),Ki(e,n,a,Mt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Qt(s,!0);const a=r[o]=r[11].createComment("");Xr(i,r,a,s),Er(a,r),pt(s)&&(Fi(i,r,s),Mi(i,s,r)),null!=n&&Vi(r,s)}function as(){let t=Kt();const e=Ht();Yt()?$t():(t=t.parent,Qt(t,!1)),e.firstCreatePass&&(be(e,t),ft(t)&&e.queries.elementEnd(t))}function us(){return Bt()}function cs(t){return!!t&&"function"==typeof t.then}function ls(t){return!!t&&"function"==typeof t.subscribe}const hs=ls;function fs(t,e,n=!1,r){const i=Bt(),o=Ht(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=pt(r),c=t.firstCreatePass&&po(t),l=fo(e);let h=!0;if(3&r.type){const f=kt(r,e),d=a?a(f):B,p=d.target||f,y=l.length,m=a?t=>a(Ct(t[r.index])).target:r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ps(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,y,y+1)}}else o=ps(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,y,s)}else o=ps(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),fs}function ds(t,e,n){try{return!1!==e(n)}catch(r){return yo(t,r),!1}}function ps(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&ao(s);let a=ds(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=ds(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ys(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function ms(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?yi(t,o,!0):mi(r,o))return i}else n=i}return n}function gs(t){const e=Bt()[16][6];if(!e.projection){const n=e.projection=hn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ms(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function vs(t,e=0,n){const r=Bt(),i=Ht(),o=ki(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),$t(),64!=(64&o.flags)&&function(t,e,n){oi(e[11],0,e,n,Ur(t,n,e),Wr(n.parent||e[6],n,e))}(i,r,o)}function bs(t,e,n){return ws(t,"",e,"",n),bs}function ws(t,e,n,r,i){const o=Bt(),s=Jo(o,e,n,r);return s!==bi&&zi(Ht(),ve(),o,t,s,o[11],i,!1),ws}function _s(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ii(o):Oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Es(t[a],e)&&(u=!0,t[a+1]=r?xi(n):Ti(n)),a=r?Ii(n):Oi(n)}u&&(t[n+1]=r?Ti(o):xi(o))}function Es(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pn(t,e)>=0}const Is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ts(t){return t.substring(Is.key,Is.keyEnd)}function Os(t,e){const n=Is.textEnd;return n===e?-1:(e=Is.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Is.key=e,n),Ss(t,e,n))}function Ss(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function xs(t,e,n){return js(t,e,n,!1),xs}function Cs(t,e){return js(t,e,null,!0),Cs}function As(t){Ns(fn,ks,t,!0)}function ks(t,e){for(let n=function(t){return function(t){Is.key=0,Is.keyEnd=0,Is.value=0,Is.valueEnd=0,Is.textEnd=t.length}(t),Os(t,Ss(t,0,Is.textEnd))}(e);n>=0;n=Os(e,n))fn(t,Ts(e),!0)}function js(t,e,n,r){const i=Bt(),o=Ht(),s=ne(2);o.firstUpdatePass&&Rs(o,t,s,r),e!==bi&&Qo(i,s,e)&&Ms(o,o.data[me()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Pn(t)))),t}(e,n),r,s)}function Ns(t,e,n,r){const i=Ht(),o=ne(2);i.firstUpdatePass&&Rs(i,null,o,r);const s=Bt();if(n!==bi&&Qo(s,o,n)){const a=i.data[me()];if(qs(a,r)&&!Ds(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),ns(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===bi&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let p,y=null;l===h?(u+=2,c+=2,f!==d&&(y=h,p=d)):null===h||null!==l&&l<h?(u+=2,y=l):(c+=2,y=h,p=d),null!==y&&Ms(t,e,n,r,y,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Pn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ds(t,e){return e>=t.expandoStartIndex}function Rs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[me()],s=Ds(t,n);qs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ls(n=Ps(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Ps(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Oi(r))return t[Ii(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Ps(null,t,e,n[1],r),n=Ls(n,e.attrs,r),function(t,e,n,r){t[Ii(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ls(r,t[o].hostAttrs,n);return Ls(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ii(s),u=Oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||pn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ii(t[a+1]);t[r+1]=Ei(e,a),0!==e&&(t[e+1]=Si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ei(a,0),0!==a&&(t[a+1]=Si(t[a+1],r)),a=r;else t[r+1]=Ei(u,0),0===a?a=r:t[u+1]=Si(t[u+1],r),u=r;l&&(t[r+1]=Ti(t[r+1])),_s(t,c,r,!0),_s(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&pn(o,e)>=0&&(n[r+1]=xi(n[r+1]))}(e,c,t,r,o),s=Ei(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Ps(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ls(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ls(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),fn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ms(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Vs(1==(1&c)?Fs(u,e,n,i,Oi(c),s):void 0)||(Vs(o)||2==(2&c)&&(o=Fs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=St(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Or.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Or.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,At(me(),n),i,o))}function Fs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===bi&&(l=c?H:void 0);let h=c?dn(l,r):u===r?l:void 0;if(o&&!Vs(h)&&(h=dn(e,r)),Vs(h)&&(a=h,s))return a;const f=t[i+1];i=s?Ii(f):Oi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dn(t,r))}return a}function Vs(t){return void 0!==t}function qs(t,e){return 0!=(t.flags&(e?16:32))}function Us(t,e=""){const n=Bt(),r=Ht(),i=t+20,o=r.firstCreatePass?ki(r,i,1,e,null):r.data[i],s=n[i]=Dr(n[11],e);Xr(r,n,s,o),Qt(o,!1)}function Bs(t){return Hs("",t,""),Bs}function Hs(t,e,n){const r=Bt(),i=Jo(r,t,e,n);return i!==bi&&go(r,me(),i),Hs}function zs(t,e,n,r,i){const o=Bt(),s=function(t,e,n,r,i,o){const s=Yo(t,te(),n,i);return ne(2),s?e+g(n)+r+g(i)+o:bi}(o,t,e,n,r,i);return s!==bi&&go(o,me(),s),zs}function Ks(t,e,n,r,i,o,s,a,u){Ns(fn,ks,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Yo(t,e,n,r);return Yo(t,e+2,i,o)||s}(t,te(),n,i,s,u);return ne(4),l?e+g(n)+r+g(i)+o+g(s)+a+g(u)+c:bi}(Bt(),t,e,n,r,i,o,s,a,u),!0)}function Gs(t,e,n){const r=Bt();return Qo(r,ee(),e)&&zi(Ht(),ve(),r,t,e,r[11],n,!0),Gs}const Ws=void 0;var Qs=["en",[["a","p"],["AM","PM"],Ws],[["AM","PM"],Ws,Ws],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ws,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ws,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ws,"{1} 'at' {0}",Ws],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ys={};function $s(t,e,n){"string"!=typeof e&&(n=e,e=t[ea.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Ys[e]=t,n&&(Ys[e][ea.ExtraData]=n)}function Js(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ta(e);if(n)return n;const r=e.split("-")[0];if(n=ta(r),n)return n;if("en"===r)return Qs;throw new Error(`Missing locale data for the locale "${t}".`)}function Xs(t){return Js(t)[ea.CurrencyCode]||null}function Zs(t){return Js(t)[ea.PluralCase]}function ta(t){return t in Ys||(Ys[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),Ys[t]}var ea=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const na=["zero","one","two","few","many"],ra={marker:"element"},ia={marker:"ICU"};var oa=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let sa="en-US";function aa(t){var e;null==(e=t)&&w("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(sa=t.toLowerCase().replace(/_/g,"-"))}function ua(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Qr(t,0,n):Ct(n[i])}function ca(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Hr(t,s,n[o[e]],a,!1)}}function la(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];ha(r)||fa(r,e)&&null===da(r)&&pa(r,e.index)}}function ha(t){return!(64&t.type)}function fa(t,e){return ha(e)||t.index>e.index}function da(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function pa(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(Jr(ua,ca),t.insertBeforeIndex=e)}function ya(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function ma(t,e,n){const r=ji(t,n,64,null,null);return la(e,r),r}function ga(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let va=0,ba=0;function wa(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Dr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=Gr(i,r)),c===s?(l=r,h=o):(l=null,h=Ct(n[c])),null!==h){const e=(131070&u)>>>1;Hr(i,h,n[e],l,!1);const r=ya(t,e);if(null!==r&&"object"==typeof r){const e=ga(r,n);null!==e&&wa(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const f=e[++a],d=e[++a];Zi(i,At(u>>>1,n),null,null,f,d,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case ia:const t=e[++a],r=e[++a];null===n[r]&&Er(n[r]=Pr(i,t),n);break;case ra:const o=e[++a],s=e[++a];null===n[s]&&Er(n[s]=Lr(i,o,null),n)}}}function _a(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=g(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?Zi(e[11],e[a],null,c,o,i,u):zi(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Rr(e[11],l,i);break;case 2:Ia(t,ya(t,a),e,i);break;case 3:Ea(t,ya(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=ya(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Ea(t,n,r,e)}}o+=a}}function Ea(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=va;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),_a(t,r,e.update[i],n,o)}}function Ia(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=Zs(e)(parseInt(t,10)),r=na[n];return void 0!==r?r:"other"}(e,sa);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(ga(e,n)!==i&&(Ta(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&wa(t,e.create[i],n,r)}}function Ta(t,e,n){let r=ga(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=At(r,n);null!==t&&ni(n[11],t)}else Ta(t,ya(t,~r),n)}}}const Oa=/\ufffd(\d+):?\d*\ufffd/gi,Sa=/\ufffd(\d+)\ufffd/,xa=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ca=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Aa=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ka=/\uE500/g;function ja(t,e,n,r,i,o,s){const a=Ni(t,r,1,null);let u=a<<oa.SHIFT,c=Wt();e===c&&(c=null),null===c&&(u|=oa.APPEND_EAGERLY),s&&(u|=oa.COMMENT,void 0===Sr&&(Sr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=ga(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=ji(t,a,s?32:1,null===o?"":o,null);la(n,l);const h=l.index;return Qt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(Jr(ua,ca),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Na(t,e,n,r,i,o,s){const a=s.match(Oa),u=ja(t,e,n,o,r,a?null:s,!1);a&&Da(i,s,u.index)}function Da(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split(Oa);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=Ra(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function Ra(t){return 1<<Math.min(t,31)}function Pa(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Ca.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function La(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Ni(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Ra(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=Va(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Ma(t){const e=[],n=[];let r=1,i=0;const o=Fa(t=t.replace(xa,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Fa(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Fa(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);xa.test(n)?r.push(Ma(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function Va(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Hn(Ot()).getInertBodyElement(s),f=dr(h)||h;return f?qa(t,e,n,r,u,c,l,f,i,a,0):0}function qa(t,e,n,r,i,o,s,a,u,c,l){let h=0,f=a.firstChild;for(;f;){const a=Ni(t,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const d=f,p=d.tagName.toLowerCase();if(nr.hasOwnProperty(p)){Ha(i,ra,p,u,a),t.data[a]=p;const y=d.attributes;for(let t=0;t<y.length;t++){const e=y.item(t),n=e.name.toLowerCase();e.value.match(Oa)?or.hasOwnProperty(n)&&(rr[n]?Da(s,e.value,a,e.name,Qn):ir[n]?Da(s,e.value,a,e.name,Yn):Da(s,e.value,a,e.name)):za(i,a,e)}h=qa(t,e,n,r,i,o,s,f,a,c,l+1)|h,Ua(o,a,l)}break;case Node.TEXT_NODE:const y=f.textContent||"",m=y.match(Oa);Ha(i,null,m?"":y,u,a),Ua(o,a,l),m&&(h=Da(s,y,a)|h);break;case Node.COMMENT_NODE:const g=Sa.exec(f.textContent||"");if(g){const e=c[parseInt(g[1],10)];Ha(i,ia,"",u,a),La(t,n,r,u,e,a),Ba(o,a,l)}}f=f.nextSibling}return h}function Ua(t,e,n){0===n&&t.push(e)}function Ba(t,e,n){0===n&&(t.push(~e),t.push(e))}function Ha(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function za(t,e,n){t.push(e<<1|1,n.name,n.value)}function Ka(t,e,n){(function(t,e,n=-1){const r=Ht(),i=Bt(),o=20+t,s=Mt(r.consts,e),a=Wt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Wt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Pa(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Pa(t.substring(n,r))}}(i,o),h.replace(ka," ")).split(Aa);var h;for(let f=0;f<l.length;f++){let r=l[f];if(0==(1&f)){const o=Fa(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Na(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);La(t,n,u,e,r,ja(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),20+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Qt(Wt(),!1);else{const e=ma(t,c[0],n);c.unshift([]),Qt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=Br(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&oa.COMMENT)===oa.COMMENT,c=(s&oa.APPEND_EAGERLY)===oa.APPEND_EAGERLY,l=s>>>oa.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Dr(i,a)),c&&null!==n&&Hr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),re(!0)})(t,e,n),re(!1)}function Ga(t){return Qo(Bt(),ee(),t)&&(va|=1<<Math.min(ba,31)),ba++,Ga}function Wa(t){!function(t,e,n){if(ba>0){const r=t.data[n];_a(t,e,Array.isArray(r)?r:r.update,te()-ba-1,va)}va=0,ba=0}(Ht(),Bt(),t+20)}function Qa(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Qa(t[o],e,n,r,i);else{const o=Ht(),s=Bt();let a=Do(t)?t:p(t.provide),u=ko(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Do(t)||!t.multi){const r=new Oe(u,i,ts),d=Ja(a,e,i?l:l+f,h);-1===d?(Ue(Me(c,s),o,a),Ya(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ja(a,e,l+f,h),p=Ja(a,e,l,l+f),y=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!y){Ue(Me(c,s),o,a);const l=function(t,e,n,r,i){const o=new Oe(t,n,ts);return o.multi=[],o.index=e,o.componentProviders=0,$a(o,i,r&&!n),o}(i?Za:Xa,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Ya(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ya(o,t,d>-1?d:p,$a(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ya(t,e,n,r){const i=Do(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function $a(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ja(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Xa(t,e,n,r){return tu(this.multi,[])}function Za(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ye(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),tu(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],tu(i,o);return o}function tu(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function eu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=yt(t);Qa(n,r.data,r.blueprint,i,!0),Qa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class nu{}class ru{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let iu=(()=>{class t{}return t.NULL=new ru,t})();function ou(...t){}function su(t,e){return new uu(kt(t,e))}const au=function(){return su(Kt(),Bt())};let uu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=au,t})();function cu(t){return t instanceof uu?t.nativeElement:t}class lu{}let hu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>fu(),t})();const fu=function(){const t=Bt(),e=Dt(Kt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let du=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class pu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const yu=new pu("11.2.6");class mu{constructor(){}supports(t){return Ko(t)}create(t){return new vu(t)}}const gu=(t,e)=>e;class vu{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||gu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Eu(n,r,i)?e:n,s=Eu(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ko(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ho()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new bu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new _u),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _u),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class bu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class _u{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new wu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Eu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Iu{constructor(){}supports(t){return t instanceof Map||Go(t)}create(){return new Tu}}class Tu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Go(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ou(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ou{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Su(){return new xu([new mu])}let xu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Su()),deps:[[t,new Sn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Su}),t})();function Cu(){return new Au([new Iu])}let Au=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Cu()),deps:[[t,new Sn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Cu}),t})();function ku(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ct(o)),ht(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ku(e[1],e,n,r)}const s=n.type;if(8&s)ku(t,e,n.child,r);else if(32&s){const t=xr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ti(e,n);if(Array.isArray(t))r.push(...t);else{const n=Cr(e[16]);ku(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ju{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ku(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Fr(t,n),ln(e,n))}this._attachedToViewContainer=!1}Vr(this._lView[1],this._lView)}onDestroy(t){Bi(this._lView[1],this._lView,null,t)}markForCheck(){ao(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uo(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{uo(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ii(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Nu extends ju{constructor(t){super(t),this._view=t}detectChanges(){co(this._view)}checkNoChanges(){!function(t){Xt(!0);try{co(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const Du=Pu;let Ru=(()=>{class t{}return t.__NG_ELEMENT_ID__=Du,t.__ChangeDetectorRef__=!0,t})();function Pu(t=!1){return function(t,e,n){if(!n&&dt(t)){const n=Dt(t.index,e);return new ju(n,n)}return 47&t.type?new ju(e[16],e):null}(Kt(),Bt(),t)}const Lu=[new Iu],Mu=new xu([new mu]),Fu=new Au(Lu),Vu=function(){return Hu(Kt(),Bt())};let qu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vu,t})();const Uu=qu,Bu=class extends Uu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ai(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Di(e,n,t),new ju(n)}};function Hu(t,e){return 4&t.type?new Bu(e,t,su(t,e)):null}class zu{}class Ku{}const Gu=function(){return Xu(Kt(),Bt())};let Wu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Gu,t})();const Qu=Wu,Yu=class extends Qu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return su(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(je(t)){const e=De(t,this._hostLView),n=Ne(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=$u(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(zu,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Yu(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],cn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ei(i,o),a=n[11],u=Gr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ii(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),cn(Ju(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=$u(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Fr(this._lContainer,e);n&&(ln(Ju(this._lContainer),e),Vr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Fr(this._lContainer,e);return n&&null!=ln(Ju(this._lContainer),e)?new ju(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function $u(t){return t[8]}function Ju(t){return t[8]||(t[8]=[])}function Xu(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=Ct(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Hr(n,Gr(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=no(r,e,i,t),so(e,n)}return new Yu(n,t,e)}const Zu={};class tc extends iu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new rc(e,this.ngModule)}}function ec(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const nc=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ir});class rc extends nu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(vi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ec(this.componentDef.inputs)}get outputs(){return ec(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Zu,i);return o!==Zu||r===Zu?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(lu,xt),s=i.get(du,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Lr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ir,clean:ho,playerHandler:null,flags:0},f=Ui(0,null,null,1,0,null,null,null,null,null),d=Ai(null,f,h,l,null,null,o,a,s,i);let p,y;le(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ki(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(vo(a,u,!0),null!==t&&(Se(i,t,u),null!==a.classes&&ai(i,t,a.classes),null!==a.styles&&si(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ai(n,qi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Ue(Me(a,n),s,e.type),Qi(s,a),$i(a,n.length,1)),so(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Se(a,c,["ng-version",yu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!di(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Se(a,c,t),e&&e.length>0&&ai(a,c,e.join(" "))}if(y=jt(f,20),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ji(t,r,e,Ni(t,e,1,null),n));const i=Ye(e,t,r.directiveStart,r);Er(i,e);const o=kt(r,e);return o&&Er(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ge(a.index),Gi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Wi(e,s)),s}(t,this.componentDef,d,h,[Lo]),Di(f,d,null)}finally{ye()}return new ic(this.componentType,p,su(y,d),d,y)}}class ic extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Nu(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const oc=new Map;class sc extends zu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tc(this);const n=ct(t),r=t[Y]||null;r&&aa(r),this._bootstrapComponents=Tr(n.bootstrap),this._r3Injector=xo(t,e,[{provide:zu,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Po.THROW_IF_NOT_FOUND,n=k.Default){return t===Po||t===zu||t===bo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ac extends Ku{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,oc.get(i),n),oc.set(i,n));const o=Tr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new sc(this.moduleType,t)}}function uc(t,e,n,r){return fc(Bt(),Zt(),t,e,n,r)}function cc(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Yo(t,a,i,o)?Wo(t,a+2,s?r.call(s,i,o):r(i,o)):hc(t,a+2)}(Bt(),Zt(),t,e,n,r,i)}function lc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=Yo(t,e,n,r);return Qo(t,e+2,i)||o}(t,u,i,o,s)?Wo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):hc(t,u+3)}(Bt(),Zt(),t,e,n,r,i,o)}function hc(t,e){const n=t[e];return n===bi?void 0:n}function fc(t,e,n,r,i,o){const s=e+n;return Qo(t,s,i)?Wo(t,s+1,o?r.call(o,i):r(i)):hc(t,s+1)}function dc(t,e){const n=Ht();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=mt(r.type)),s=N(ts);try{const t=Pe(!1),e=o();return Pe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Bt(),i,e),e}finally{N(s)}}function pc(t,e,n){const r=t+20,i=Bt(),o=Nt(i,r);return function(t,e){return zo.isWrapped(e)&&(e=zo.unwrap(e),t[te()]=bi),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?fc(i,Zt(),e,o.transform,n,o):o.transform(n))}const yc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function mc(){return this._results[Ho()]()}class gc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ho(),n=gc.prototype;n[e]||(n[e]=mc)}get changes(){return this._changes||(this._changes=new yc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=an(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class vc{constructor(t){this.queryList=t,this.matches=null}clone(){return new vc(this.queryList)}setDirty(){this.queryList.setDirty()}}class bc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new bc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Dc(t,e).matches&&this.queries[e].setDirty()}}class wc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class _c{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new _c(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ec{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ec(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ic(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===qu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===uu||r===Wu||r===qu&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ic(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Tc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?su(t,e):4&t.type?Hu(t,e):null}(e,t):-2===n?function(t,e,n){return n===uu?su(e,t):n===qu?Hu(e,t):n===Wu?Xu(e,t):void 0}(t,e,r):Ye(t,t[1],n,e)}function Oc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Tc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Sc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Oc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&Sc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Sc(n[1],n,i,r)}}}}}return r}function xc(t){const e=Bt(),n=Ht(),r=se();ae(r+1);const i=Dc(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Sc(n,e,r,[]):Oc(n,e,i,r);t.reset(o,cu),t.notifyOnChanges()}return!0}return!1}function Cc(t,e,n){const r=Ht();r.firstCreatePass&&(Nc(r,new wc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),jc(r,Bt(),e)}function Ac(t,e,n,r){const i=Ht();if(i.firstCreatePass){const o=Kt();Nc(i,new wc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}jc(i,Bt(),n)}function kc(){return t=Bt(),e=se(),t[19].queries[e].queryList;var t,e}function jc(t,e,n){const r=new gc(4==(4&n));Bi(t,e,r,r.destroy),null===e[19]&&(e[19]=new bc),e[19].queries.push(new vc(r))}function Nc(t,e,n){null===t.queries&&(t.queries=new _c),t.queries.track(new Ec(e,n))}function Dc(t,e){return t.queries.getByIndex(e)}function Rc(t,e){return Hu(t,e)}function Pc(t=k.Default){const e=Pu(!0);if(null!=e||t&k.Optional)return e;b("ChangeDetectorRef")}const Lc=new rn("Application Initializer");let Mc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ou,this.reject=ou,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();cs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(_n(Lc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Fc=new rn("AppId"),Vc={provide:Fc,useFactory:function(){return`${qc()}${qc()}${qc()}`},deps:[]};function qc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uc=new rn("Platform Initializer"),Bc=new rn("Platform ID"),Hc=new rn("appBootstrapListener");let zc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Kc=new rn("LocaleId"),Gc=new rn("DefaultCurrencyCode");class Wc{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Qc=function(t){return new ac(t)},Yc=Qc,$c=function(t){return Promise.resolve(Qc(t))},Jc=function(t){const e=Qc(t),n=Tr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new rc(n)),t},[]);return new Wc(e,n)},Xc=Jc,Zc=function(t){return Promise.resolve(Jc(t))};let tl=(()=>{class t{constructor(){this.compileModuleSync=Yc,this.compileModuleAsync=$c,this.compileModuleAndAllComponentsSync=Xc,this.compileModuleAndAllComponentsAsync=Zc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const el=(()=>Promise.resolve(0))();function nl(t){"undefined"==typeof Zone?el.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class rl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yc(!1),this.onMicrotaskEmpty=new yc(!1),this.onStable=new yc(!1),this.onError=new yc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sl(t),ol(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return al(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ul(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return al(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ul(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,sl(t),ol(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,il,ou,ou);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const il={};function ol(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function al(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ul(t){t._nesting--,ol(t)}class cl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yc,this.onMicrotaskEmpty=new yc,this.onStable=new yc,this.onError=new yc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ll=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rl.assertNotInAngularZone(),nl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(_n(rl))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),hl=(()=>{class t{constructor(){this._applications=new Map,yl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return yl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class fl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function dl(t){yl=t}let pl,yl=new fl,ml=!0,gl=!1;function vl(){return gl=!0,ml}function bl(){if(gl)throw new Error("Cannot enable prod mode after platform setup.");ml=!1}const wl=new rn("AllowMultipleToken");class _l{constructor(t,e){this.name=t,this.token=e}}function El(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(e=[])=>{let o=Il();if(!o||o.injector.get(wl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:_o,useValue:"platform"});!function(t){if(pl&&!pl.destroyed&&!pl.injector.get(wl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pl=t.get(Tl);const e=t.get(Uc,null);e&&e.forEach(t=>t())}(Po.create({providers:t,name:r}))}return function(t){const e=Il();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Il(){return pl&&!pl.destroyed?pl:null}let Tl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new cl:("zone.js"===t?void 0:t)||new rl({enableLongStackTrace:vl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:rl,useValue:n}];return n.run(()=>{const e=Po.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(br,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{xl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return cs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Mc);return t.runInitializers(),t.donePromise.then(()=>(aa(i.injector.get(Kc,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ol({},e);return function(t,e,n){const r=new ac(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Sl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(_n(Po))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ol(t,e){return Array.isArray(e)?e.reduce(Ol,t):Object.assign(Object.assign({},t),e)}let Sl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{rl.assertNotInAngularZone(),nl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{rl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof nu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(zu),i=n.create(Po.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ll,null),a=s&&i.injector.get(hl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),xl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;xl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Hc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(_n(rl),_n(Po),_n(br),_n(iu),_n(Mc))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function xl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Cl{}class Al{}const kl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let jl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||kl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Nl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Nl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(_n(tl),_n(Al,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Nl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Dl=function(t){return null},Rl=El(null,"core",[{provide:Bc,useValue:"unknown"},{provide:Tl,deps:[Po]},{provide:hl,deps:[]},{provide:zc,deps:[]}]),Pl=[{provide:Sl,useClass:Sl,deps:[rl,Po,br,iu,Mc]},{provide:nc,deps:[rl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Mc,useClass:Mc,deps:[[new On,Lc]]},{provide:tl,useClass:tl,deps:[]},Vc,{provide:xu,useFactory:function(){return Mu},deps:[]},{provide:Au,useFactory:function(){return Fu},deps:[]},{provide:Kc,useFactory:function(t){return aa(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new Tn(Kc),new On,new Sn]]},{provide:Gc,useValue:"USD"}];let Ll=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(_n(Sl))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:Pl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return g}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return y});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return Object(r.c)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new E(t,e);return n.subscribe.bind(n)}var E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function I(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return S}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return T}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return E});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),g=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&I("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const E=()=>{I("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},I=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&I("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let S=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(u.C))},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("Y7HM");class y extends r.a{constructor(t,e=0,n=d){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var v=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),v.apply(void 0,t)};var b=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.mb;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function h(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[{provide:c,useClass:l}]}),t})();function d(t){return"server"===t}class p extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new p,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=m||(m=document.querySelector("base"),m)?m.getAttribute("href"):null;return null==e?null:(n=e,y||(y=document.createElement("a")),y.setAttribute("href",n),"/"===y.pathname.charAt(0)?y.pathname:"/"+y.pathname);var n}resetBaseElement(){m=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return h(document.cookie,t)}}let y,m=null;const g=new r.r("TRANSITION_ID"),v=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[g,s,r.s],multi:!0}];class b{static init(){Object(r.X)(new b)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const w=new r.r("EventManagerPlugins");let _=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(w),r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class E{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let I=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),T=(()=>{class t extends I{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const O={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},S=/%COMP%/g;function x(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?x(t,i,n):(i=i.replace(S,t),n.push(i))}return n}function C(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let A=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new k(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new j(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new N(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=x(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(_),r.Yb(T),r.Yb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class k{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(O[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=O[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=O[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,C(n)):this.eventManager.addEventListener(t,e,C(n))}}class j extends k{constructor(t,e,n,r){super(t),this.component=n;const i=x(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(S,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(S,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class N extends k{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=x(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let D=(()=>{class t extends E{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const R=["alt","control","meta","shift"],P={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},L={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},M={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let F=(()=>{class t extends E{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(R.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&L.hasOwnProperty(e)&&(e=L[e]))}return P[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),R.forEach(r=>{r!=n&&(0,M[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const V=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){p.makeCurrent(),b.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],q=Object(r.S)(r.W,"browser",V),U=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:w,useClass:D,multi:!0,deps:[s,r.A,r.C]},{provide:w,useClass:F,multi:!0,deps:[s]},[],{provide:A,useClass:A,deps:[_,T,r.c]},{provide:r.F,useExisting:A},{provide:I,useExisting:T},{provide:T,useClass:T,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:_,useClass:_,deps:[w,r.A]},[]];let B=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:g,useExisting:r.c},v]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(t,12))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:U,imports:[f,r.f]}),t})();"undefined"!=typeof window&&window;var H=n("z6cu"),z=n("zx2A");class K{constructor(t){this.selector=t}call(t,e){return e.subscribe(new G(t,this.selector,this.caught))}}class G extends z.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new z.a(this);this.add(r);const i=Object(z.c)(n,r);i!==r&&this.add(i)}}}var W=n("LRne"),Q=n("HDdC"),Y=n("5+tZ"),$=n("7o/Q");function J(t,e){return function(n){return n.lift(new X(t,e))}}class X{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Z(t,this.predicate,this.thisArg))}}class Z extends $.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var tt=n("lJxs");class et{}class nt{}class rt{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof rt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new rt;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof rt?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class it{encodeKey(t){return ot(t)}encodeValue(t){return ot(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function ot(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class st{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new it,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new st({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function at(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ut(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ct(t){return"undefined"!=typeof FormData&&t instanceof FormData}class lt{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new rt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new st,this.urlWithParams=e}serializeBody(){return null===this.body?null:at(this.body)||ut(this.body)||ct(this.body)||"string"==typeof this.body?this.body:this.body instanceof st?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ct(this.body)?null:ut(this.body)?this.body.type||null:at(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof st?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new lt(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var ht=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class ft{constructor(t,e=200,n="OK"){this.headers=t.headers||new rt,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class dt extends ft{constructor(t={}){super(t),this.type=ht.ResponseHeader}clone(t={}){return new dt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class pt extends ft{constructor(t={}){super(t),this.type=ht.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new pt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class yt extends ft{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function mt(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let gt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof lt)r=t;else{let i,o;i=n.headers instanceof rt?n.headers:new rt(n.headers),n.params&&(o=n.params instanceof st?n.params:new st({fromObject:n.params})),r=new lt(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(W.a)(r).pipe((o=t=>this.handler.handle(t),Object(Y.a)(o,undefined,1)));var o;if(t instanceof lt||"events"===n.observe)return i;const s=i.pipe(J(t=>t instanceof pt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(Object(tt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(Object(tt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(Object(tt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(Object(tt.a)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new st).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,mt(n,e))}post(t,e,n={}){return this.request("POST",t,mt(n,e))}put(t,e,n={}){return this.request("PUT",t,mt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(et))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class vt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const bt=new r.r("HTTP_INTERCEPTORS");let wt=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const _t=/^\)\]\}',?\n/;class Et{}let It=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Tt=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Q.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new rt(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new dt({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(_t,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new pt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new yt({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new yt({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:ht.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:ht.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:ht.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Et))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Ot=new r.r("XSRF_COOKIE_NAME"),St=new r.r("XSRF_HEADER_NAME");class xt{}let Ct=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=h(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s),r.Yb(r.C),r.Yb(Ot))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),At=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(xt),r.Yb(St))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),kt=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(bt,[]);this.chain=t.reduceRight((t,e)=>new vt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(nt),r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),jt=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:At,useClass:wt}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Ot,useValue:e.cookieName}:[],e.headerName?{provide:St,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[At,{provide:bt,useExisting:At,multi:!0},{provide:xt,useClass:Ct},{provide:Ot,useValue:"XSRF-TOKEN"},{provide:St,useValue:"X-XSRF-TOKEN"}]}),t})(),Nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[gt,{provide:et,useClass:kt},Tt,{provide:nt,useExisting:Tt},It,{provide:Et,useExisting:It}],imports:[[jt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Dt=(()=>{class t{constructor(t){this.httpClient=t,this.urlConnection="https://www.strava.com/oauth/authorize?client_id=36102&redirect_uri=https://plr2388.github.io/HuaweiToStrava/strava&response_type=code&scope=activity:write"}getToken(t){return this.httpClient.post("https://www.strava.com/oauth/token?client_id=36102&client_secret=d4ca7b238820272379613358d5fbe5e9a4571e68&code="+t+"&grant_type=authorization_code",null,{observe:"body"}).pipe((e=this.handleError,function(t){const n=new K(e),r=t.lift(n);return n.caught=r}));var e}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Object(H.a)("Something bad happened; please try again later.")}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(gt))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Rt=(()=>{class t{constructor(t){this.stravaService=t,this.stravaURLConnection="",this.stravaURLConnection=t.urlConnection}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Dt))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-connect-strava"]],decls:2,vars:1,consts:[[3,"href"]],template:function(t,e){1&t&&(r.Rb(0,"a",0),r.wc(1,"Click here to connect to Strava"),r.Qb()),2&t&&r.jc("href",e.stravaURLConnection,r.rc)},styles:[""]}),t})(),Pt=(()=>{class t{constructor(){this.title="huaweiToStrava"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-xs-12"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"h2"),r.wc(4,"Connect your Strava account"),r.Qb(),r.Nb(5,"app-connect-strava"),r.Qb(),r.Qb(),r.Qb())},directives:[Rt],styles:[""]}),t})();var Lt=n("EY2u"),Mt=n("XNiG"),Ft=n("DH7j"),Vt=n("n6bG");function qt(t,e,n,r){return Object(Vt.a)(n)&&(r=n,n=void 0),r?qt(t,e,n).pipe(Object(tt.a)(t=>Object(Ft.a)(t)?r(...t):r(t))):new Q.a(r=>{Ut(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Ut(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)Ut(t[o],e,n,r,i)}r.add(o)}var Bt=n("D0XW"),Ht=n("Y7HM"),zt=n("z+Ro");function Kt(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var Gt=n("yCtX");class Wt extends $.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Qt extends $.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Yt=n("SeVD");function $t(t,e,n,r,i=new Qt(t,n,r)){if(!i.closed)return e instanceof Q.a?e.subscribe(i):Object(Yt.a)(e)(i)}class Jt{call(t,e){return e.subscribe(new Xt(t))}}class Xt extends Wt{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=$t(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}var Zt=n("9ppp");n("KqfI");var te=n("Lhse");function ee(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(Gt.a)(t,void 0).lift(new ne(e))}class ne{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new re(t,this.resultSelector))}}class re extends $.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(Ft.a)(t)?e.push(new oe(t)):e.push("function"==typeof t[te.a]?new ie(t[te.a]()):new se(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class ie{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class oe{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[te.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class se extends z.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[te.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(z.c)(this.observable,new z.a(this))}}var ae=n("VRyK"),ue=n("bHdf");function ce(...t){return Object(ue.a)(1)(Object(W.a)(...t))}function le(t){return e=>e.lift(new he(t))}class he{constructor(t){this.notifier=t}call(t,e){const n=new fe(t),r=Object(z.c)(this.notifier,new z.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class fe extends z.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const de=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function pe(t){return e=>0===t?Object(Lt.b)():e.lift(new ye(t))}class ye{constructor(t){if(this.total=t,this.total<0)throw new de}call(t,e){return e.subscribe(new me(t,this.total))}}class me extends $.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ge(...t){const e=t[t.length-1];return Object(zt.a)(e)?(t.pop(),n=>ce(t,n,e)):e=>ce(t,e)}class ve{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new be(t,this.compare,this.keySelector))}}class be extends $.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var we=n("Cfvw");function _e(t,e){return"function"==typeof e?n=>n.pipe(_e((n,r)=>Object(we.a)(t(n,r)).pipe(Object(tt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ee(t))}class Ee{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ie(t,this.project))}}class Ie extends z.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new z.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(z.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Te=n("vkgz");function Oe(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Se(t,n))}}class Se{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new xe(t,this.observables,this.project))}}class xe extends Wt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add($t(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n("WMd4"),n("w1tV"),n("XoHu");let Ce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),Ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[Ce]]}),t})(),ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[Ae]}),t})();const je=["*"],Ne=["dialog"];function De(t){return null!=t}function Re(t){return(t||document.body).offsetHeight}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const Pe={animation:!0,transitionTimerDelayMs:5};let Le=(()=>{class t{constructor(){this.animation=Pe.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Me=()=>{},{transitionTimerDelayMs:Fe}=Pe,Ve=new Map,qe=(t,e,n,r)=>{let i=r.context||{};const o=Ve.get(e);if(o)switch(r.runningTransition){case"continue":return Lt.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Ve.delete(e)}const s=n(e,r.animation,i)||Me;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(W.a)(void 0).pipe(function(t){return e=>new Q.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new Mt.a,u=new Mt.a,c=a.pipe(function(...t){return e=>ce(e,Object(W.a)(...t))}(!0));Ve.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=qt(e,"transitionend").pipe(le(c),J(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(Ft.a)(t[0]))return t[0];t=t[0]}return Object(Gt.a)(t,void 0).lift(new Jt)})(function(t=0,e,n){let r=-1;return Object(Ht.a)(e)?r=Number(e)<1?1:Number(e):Object(zt.a)(e)&&(n=e),Object(zt.a)(n)||(n=Bt.a),new Q.a(e=>{const i=Object(Ht.a)(t)?t:+t-n.now();return n.schedule(Kt,i,{index:0,period:r,subscriber:e})})}(l+Fe).pipe(le(c)),n,u).pipe(le(c)).subscribe(()=>{Ve.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let Ue=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),Be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),He=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),Ke=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();var Ge=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const We=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Qe(t){const e=Array.from(t.querySelectorAll(We)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let f=0,d=0;switch(i){case"top":f=s.top-(e.offsetHeight+u+c);break;case"bottom":f=s.top+s.height;break;case"left":d=s.left-(e.offsetWidth+l+h);break;case"right":d=s.left+s.width}switch(o){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":d=s.left;break;case"right":d=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?d=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(d)}px, ${Math.round(f)}px)`;const p=e.getBoundingClientRect(),y=document.documentElement,m=window.innerHeight||y.clientHeight,g=window.innerWidth||y.clientWidth;return p.left>=0&&p.top>=0&&p.right<=g&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let Ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f,ke]]}),t})(),$e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),Je=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Le))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Le))},token:t,providedIn:"root"}),t})();class Xe{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Ze=()=>{};let tn=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Ze}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(s))},token:t,providedIn:"root"}),t})(),en=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(pe(1)).subscribe(()=>{qe(this._zone,this._el.nativeElement,(t,e)=>{e&&Re(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return qe(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Cb("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Eb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class nn{close(t){}dismiss(t){}}class rn{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new Mt.a,this._dismissed=new Mt.a,this._hidden=new Mt.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(le(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(le(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(W.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ee(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var on=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let sn=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new Mt.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new Mt.a,this.hidden=new Mt.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=ee(qe(this._zone,t,()=>t.classList.remove("show"),e),qe(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};ee(qe(this._zone,this._elRef.nativeElement,(t,e)=>{e&&Re(t),t.classList.add("show")},t),qe(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{qt(t,"keydown").pipe(le(this._closed$),J(t=>t.which===Ge.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(on.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;qt(this._dialogEl.nativeElement,"mousedown").pipe(le(this._closed$),Object(Te.a)(()=>e=!1),_e(()=>qt(t,"mouseup").pipe(le(this._closed$),pe(1))),J(({target:e})=>t===e)).subscribe(()=>{e=!0}),qt(t,"click").pipe(le(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(on.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Qe(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&qe(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Ac(Ne,3),2&t){let t;r.oc(t=r.cc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Bb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Cb("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Eb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:je,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.hc(),r.Rb(0,"div",0,1),r.Rb(2,"div",2),r.gc(3),r.Qb(),r.Qb()),2&t&&r.Cb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),an=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new Mt.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=qt(e,"focusin").pipe(le(n),Object(tt.a)(t=>t.target));qt(e,"keydown").pipe(le(n),J(t=>t.which===Ge.Tab),Oe(t)).subscribe(([t,n])=>{const[r,i]=Qe(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&qt(e,"click").pipe(le(n),Oe(t),Object(tt.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:De(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new nn,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),f=new rn(h,c,l,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.result.then(s,s),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),f}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(en).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(sn).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{De(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{De(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.L?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new Xe([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Xe([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Xe([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:nn,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Xe([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.g),r.Yb(r.s),r.Yb(s),r.Yb(tn),r.Yb(r.F),r.Yb(r.A))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.g),Object(r.Yb)(r.o),Object(r.Yb)(s),Object(r.Yb)(tn),Object(r.Yb)(r.F),Object(r.Yb)(r.A))},token:t,providedIn:"root"}),t})(),un=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.j),r.Yb(r.s),r.Yb(an),r.Yb(Je))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.j),Object(r.Yb)(r.o),Object(r.Yb)(an),Object(r.Yb)(Je))},token:t,providedIn:"root"}),t})(),cn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[un]}),t})(),ln=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),hn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),fn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),dn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),pn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),yn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),mn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})(),gn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let vn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[f]]}),t})();const bn=[Ue,Be,He,ze,Ke,Ye,$e,cn,ln,hn,fn,dn,pn,yn,mn,gn,vn];let wn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[bn,Ue,Be,He,ze,Ke,Ye,$e,cn,ln,hn,fn,dn,pn,yn,mn,gn,vn]}),t})();var _n=n("spgP");function En(){return t=>t.lift(new In)}class In{call(t,e){return e.subscribe(new Tn(t))}}class Tn extends $.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function On(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Sn(t,e,n))}}class Sn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new xn(t,this.accumulator,this.seed,this.hasSeed))}}class xn extends $.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}var Cn=n("pxpQ"),An=n("Jgta"),kn=n("zIRd"),jn=n("q/0M"),Nn=n("qOnz"),Dn=function(t,e){return(Dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Rn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Pn,Ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Mn=Mn||{},Fn=Ln||self;function Vn(){}function qn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Un(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bn="closure_uid_"+(1e9*Math.random()>>>0),Hn=0;function zn(t,e,n){return t.call.apply(t.bind,arguments)}function Kn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Gn(t,e,n){return(Gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zn:Kn).apply(null,arguments)}function Wn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Qn(){return Date.now()}function Yn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $n(){this.j=this.j,this.i=this.i}$n.prototype.j=!1,$n.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Bn)&&t[Bn]||(t[Bn]=++Hn)}(this)},$n.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Jn=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Xn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Zn(t){return Array.prototype.concat.apply([],arguments)}function tr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function er(t){return/^[\s\xa0]*$/.test(t)}var nr,rr=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ir(t,e){return-1!=t.indexOf(e)}function or(t,e){return t<e?-1:t>e?1:0}t:{var sr=Fn.navigator;if(sr){var ar=sr.userAgent;if(ar){nr=ar;break t}}nr=""}function ur(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function cr(t){var e={};for(var n in t)e[n]=t[n];return e}var lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hr(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<lr.length;o++)n=lr[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function fr(t){return fr[" "](t),t}fr[" "]=Vn;var dr,pr,yr=ir(nr,"Opera"),mr=ir(nr,"Trident")||ir(nr,"MSIE"),gr=ir(nr,"Edge"),vr=gr||mr,br=ir(nr,"Gecko")&&!(ir(nr.toLowerCase(),"webkit")&&!ir(nr,"Edge"))&&!(ir(nr,"Trident")||ir(nr,"MSIE"))&&!ir(nr,"Edge"),wr=ir(nr.toLowerCase(),"webkit")&&!ir(nr,"Edge");function _r(){var t=Fn.document;return t?t.documentMode:void 0}t:{var Er="",Ir=(pr=nr,br?/rv:([^\);]+)(\)|;)/.exec(pr):gr?/Edge\/([\d\.]+)/.exec(pr):mr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(pr):wr?/WebKit\/(\S+)/.exec(pr):yr?/(?:Version)[ \/]?(\S+)/.exec(pr):void 0);if(Ir&&(Er=Ir?Ir[1]:""),mr){var Tr=_r();if(null!=Tr&&Tr>parseFloat(Er)){dr=String(Tr);break t}}dr=Er}var Or={};function Sr(t){return function(t,e){var n=Or;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=rr(String(dr)).split("."),r=rr(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=or(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||or(0==s[2].length,0==a[2].length)||or(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var xr=Fn.document&&mr&&(_r()||parseInt(dr,10))||void 0,Cr=!mr||9<=Number(xr),Ar=mr&&!Sr("9"),kr=function(){if(!Fn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Fn.addEventListener("test",Vn,e),Fn.removeEventListener("test",Vn,e)}catch(n){}return t}();function jr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Nr(t,e){if(jr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(br){t:{try{fr(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}jr.prototype.b=function(){this.defaultPrevented=!0},Yn(Nr,jr);var Dr={2:"touch",3:"pen",4:"mouse"};Nr.prototype.b=function(){Nr.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ar)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Rr="closure_listenable_"+(1e6*Math.random()|0),Pr=0;function Lr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Pr,this.Y=this.Z=!1}function Mr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Fr(t){this.src=t,this.a={},this.b=0}function Vr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Jn(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Mr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function qr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Fr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=qr(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Lr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ur="closure_lm_"+(1e6*Math.random()|0),Br={};function Hr(t,e,n,r,i){if(r&&r.once)return Kr(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Hr(t,e[o],n,r,i);return null}return n=Zr(n),t&&t[Rr]?t.va(e,n,Un(r)?!!r.capture:!!r,i):zr(t,e,n,!1,r,i)}function zr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Un(i)?!!i.capture:!!i;if(s&&!Cr)return null;var a=Jr(t);if(a||(t[Ur]=a=new Fr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=$r,e=Cr?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)kr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Qr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Kr(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Kr(t,e[o],n,r,i);return null}return n=Zr(n),t&&t[Rr]?t.wa(e,n,Un(r)?!!r.capture:!!r,i):zr(t,e,n,!0,r,i)}function Gr(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Gr(t,e[o],n,r,i);else r=Un(r)?!!r.capture:!!r,n=Zr(n),t&&t[Rr]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=qr(o=t.a[e],n,r,i))&&(Mr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Jr(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qr(e,n,r,i)),(n=-1<t?e[t]:null)&&Wr(n))}function Wr(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Rr])Vr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Qr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jr(e))?(Vr(n,t),0==n.b&&(n.src=null,e[Ur]=null)):Mr(t)}}}function Qr(t){return t in Br?Br[t]:Br[t]="on"+t}function Yr(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Wr(t),n.call(r,e)}function $r(t,e){if(t.Y)return!0;if(!Cr){if(!e)t:{e=["window","event"];for(var n=Fn,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Yr(t,e=new Nr(e,this))}return Yr(t,new Nr(e,this))}function Jr(t){return(t=t[Ur])instanceof Fr?t:null}var Xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zr(t){return"function"==typeof t?t:(t[Xr]||(t[Xr]=function(e){return t.handleEvent(e)}),t[Xr])}function ti(){$n.call(this),this.c=new Fr(this),this.J=this,this.C=null}function ei(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new jr(e,t);else if(e instanceof jr)e.target=e.target||t;else{var i=e;hr(e=new jr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ni(s,r,!0,e)&&i}if(i=ni(s=e.a=t,r,!0,e)&&i,i=ni(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ni(s=e.a=n[o],r,!1,e)&&i}function ni(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Vr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Yn(ti,$n),ti.prototype[Rr]=!0,(Pn=ti.prototype).addEventListener=function(t,e,n,r){Hr(this,t,e,n,r)},Pn.removeEventListener=function(t,e,n,r){Gr(this,t,e,n,r)},Pn.G=function(){if(ti.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Mr(n[r]);delete e.a[t],e.b--}}this.C=null},Pn.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Pn.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ri=Fn.JSON.stringify;function ii(){this.b=this.a=null}var oi,si=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ui},function(t){t.reset()});function ai(){var t=fi,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ui(){this.next=this.b=this.a=null}function ci(t){Fn.setTimeout(function(){throw t},0)}function li(t,e){oi||function(){var t=Fn.Promise.resolve(void 0);oi=function(){t.then(di)}}(),hi||(oi(),hi=!0),fi.add(t,e)}ii.prototype.add=function(t,e){var n=si.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ui.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ui.prototype.reset=function(){this.next=this.b=this.a=null};var hi=!1,fi=new ii;function di(){for(var t;t=ai();){try{t.a.call(t.b)}catch(n){ci(n)}var e=si;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}hi=!1}function pi(t,e){ti.call(this),this.b=t||1,this.a=e||Fn,this.f=Gn(this.Za,this),this.g=Qn()}function yi(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function mi(t,e,n){if("function"==typeof t)n&&(t=Gn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Gn(t.handleEvent,t)}return 2147483647<Number(e)?-1:Fn.setTimeout(t,e||0)}function gi(t){t.a=mi(function(){t.a=null,t.c&&(t.c=!1,gi(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Yn(pi,ti),(Pn=pi.prototype).aa=!1,Pn.M=null,Pn.Za=function(){if(this.aa){var t=Qn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ei(this,"tick"),this.aa&&(yi(this),this.start()))}},Pn.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Qn())},Pn.G=function(){pi.X.G.call(this),yi(this),delete this.a};var vi=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Dn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:gi(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Fn.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}($n);function bi(t){$n.call(this),this.b=t,this.a={}}Yn(bi,$n);var wi=[];function _i(t,e,n,r){Array.isArray(n)||(n&&(wi[0]=n.toString()),n=wi);for(var i=0;i<n.length;i++){var o=Hr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ei(t){ur(t.a,function(t,e){this.a.hasOwnProperty(e)&&Wr(t)},t),t.a={}}function Ii(){this.a=!0}function Ti(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ri(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}bi.prototype.G=function(){bi.X.G.call(this),Ei(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ii.prototype.info=function(){};var Oi={},Si=null;function xi(){return Si=Si||new ti}function Ci(t){jr.call(this,Oi.Fa,t)}function Ai(t){var e=xi();ei(e,new Ci(e,t))}function ki(t,e){jr.call(this,Oi.STAT_EVENT,t),this.stat=e}function ji(t){var e=xi();ei(e,new ki(e,t))}function Ni(t){jr.call(this,Oi.Ga,t)}function Di(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Fn.setTimeout(function(){t()},e)}Oi.Fa="serverreachability",Yn(Ci,jr),Oi.STAT_EVENT="statevent",Yn(ki,jr),Oi.Ga="timingevent",Yn(Ni,jr);var Ri={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Pi={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Li(){}function Mi(){}Li.prototype.a=null;var Fi,Vi={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function qi(){jr.call(this,"d")}function Ui(){jr.call(this,"c")}function Bi(){}function Hi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new bi(this),this.P=zi,this.R=new pi(t=vr?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Yn(qi,jr),Yn(Ui,jr),Yn(Bi,Li),Fi=new Bi;var zi=45e3,Ki={},Gi={};function Wi(t,e,n){t.H=1,t.i=mo(co(e)),t.j=n,t.I=!0,Qi(t,null)}function Qi(t,e){t.u=Qn(),Ji(t),t.l=co(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ao(n.b,"t",r),t.D=0,t.a=Is(t.g,t.g.C?e:null),0<t.O&&(t.F=new vi(Gn(t.Ca,t,t.a),t.O)),_i(t.J,t.a,"readystatechange",t.Xa),e=t.B?cr(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ai(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Yi(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=$i(t,n);if(i==Gi){4==e&&(t.h=4,ji(14),r=!1),Ti(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ki){t.h=4,ji(15),Ti(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Ti(t.c,t.f,i,null),no(t,i)}4==e&&0==n.length&&(t.h=1,ji(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ys(e),e.F=!0,ji(11))):(Ti(t.c,t.f,n,"[Invalid Chunked Response]"),eo(t),to(t))}function $i(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Gi:(n=Number(e.substring(n,r)),isNaN(n)?Ki:(r+=1)+n>e.length?Gi:(e=e.substr(r,n),t.D=r+n,e))}function Ji(t){t.T=Qn()+t.P,Xi(t,t.P)}function Xi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Di(Gn(t.Va,t),e)}function Zi(t){t.o&&(Fn.clearTimeout(t.o),t.o=null)}function to(t){0==t.g.v||t.A||vs(t.g,t)}function eo(t){Zi(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,yi(t.R),Ei(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function no(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Lo(n.b,t)))if(n.I=t.N,!t.C&&Lo(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(am){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;gs(n),ss(n)}ps(n),ji(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Di(Gn(n.Sa,n),6e3));if(1>=Po(n.b)&&n.ea){try{n.ea()}catch(am){}n.ea=void 0}}else ws(n,11)}else if((t.C||n.a==t)&&gs(n),!er(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ir(l,"spdy")||ir(l,"quic")||ir(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Mo(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,yo(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Qn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Es(u,u.C?u.ga:null,u.fa),d.C){Fo(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Zi(p),Ji(p)),u.a=d}else ds(u);0<n.g.length&&cs(n)}else"stop"!=i[0]&&"close"!=i[0]||ws(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ws(n,7):os(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ai(4)}catch(am){}}function ro(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(qn(t)||"string"==typeof t)Xn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(qn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(qn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function io(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof io)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function oo(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];so(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)so(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function so(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Pn=Hi.prototype).setTimeout=function(t){this.P=t},Pn.Xa=function(t){t=t.target;var e=this.F;e&&3==es(t)?e.f():this.Ca(t)},Pn.Ca=function(t){try{if(t==this.a)t:{var e=es(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!vr&&!this.a.$())){this.A||4!=e||7==n||Ai(8==n||0>=r?3:2),Zi(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!er(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ji(12),eo(this),to(this);break t}Ti(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,no(this,u)}this.I?(Yi(this,e,o),vr&&this.b&&3==e&&(_i(this.J,this.R,"tick",this.Wa),this.R.start())):(Ti(this.c,this.f,o,null),no(this,o)),4==e&&eo(this),this.b&&!this.A&&(4==e?vs(this.g,this):(this.b=!1,Ji(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ji(12)):(this.h=0,ji(13)),eo(this),to(this)}}}catch(c){}},Pn.Wa=function(){if(this.a){var t=es(this.a),e=this.a.$();this.D<e.length&&(Zi(this),Yi(this,t,e),this.b&&4!=t&&Ji(this))}},Pn.cancel=function(){this.A=!0,eo(this)},Pn.Va=function(){this.o=null;var t=Qn();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Ai(3),ji(17)),eo(this),this.h=2,to(this)):Xi(this,this.T-t)},(Pn=io.prototype).K=function(){oo(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Pn.L=function(){return oo(this),this.a.concat()},Pn.get=function(t,e){return so(this.b,t)?this.b[t]:e},Pn.set=function(t,e){so(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Pn.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ao=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uo(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof uo){this.a=void 0!==e?e:t.a,lo(this,t.f),this.j=t.j,ho(this,t.c),fo(this,t.h),this.g=t.g,e=t.b;var n=new Oo;n.c=e.c,e.a&&(n.a=new io(e.a),n.b=e.b),po(this,n),this.i=t.i}else t&&(n=String(t).match(ao))?(this.a=!!e,lo(this,n[1]||"",!0),this.j=go(n[2]||""),ho(this,n[3]||"",!0),fo(this,n[4]),this.g=go(n[5]||"",!0),po(this,n[6]||"",!0),this.i=go(n[7]||"")):(this.a=!!e,this.b=new Oo(null,this.a))}function co(t){return new uo(t)}function lo(t,e,n){t.f=n?go(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ho(t,e,n){t.c=n?go(e,!0):e}function fo(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function po(t,e,n){e instanceof Oo?(t.b=e,function(t,e){e&&!t.f&&(So(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(xo(this,e),Ao(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=vo(e,Io)),t.b=new Oo(e,t.a))}function yo(t,e,n){t.b.set(e,n)}function mo(t){return yo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Qn()).toString(36)),t}function go(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vo(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,bo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}uo.prototype.toString=function(){var t=[],e=this.f;e&&t.push(vo(e,wo,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(vo(e,wo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(vo(n,"/"==n.charAt(0)?Eo:_o,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",vo(n,To)),t.join("")};var wo=/[#\/\?@]/g,_o=/[#\?:]/g,Eo=/[#\?]/g,Io=/[#\?@]/g,To=/#/g;function Oo(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function So(t){t.a||(t.a=new io,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function xo(t,e){So(t),e=ko(t,e),so(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,so((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&oo(t)))}function Co(t,e){return So(t),e=ko(t,e),so(t.a.b,e)}function Ao(t,e,n){xo(t,e),0<n.length&&(t.c=null,t.a.set(ko(t,e),tr(n)),t.b+=n.length)}function ko(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Pn=Oo.prototype).add=function(t,e){So(this),this.c=null,t=ko(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Pn.forEach=function(t,e){So(this),this.a.forEach(function(n,r){Xn(n,function(n){t.call(e,n,r,this)},this)},this)},Pn.L=function(){So(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Pn.K=function(t){So(this);var e=[];if("string"==typeof t)Co(this,t)&&(e=Zn(e,this.a.get(ko(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Zn(e,t[n])}return e},Pn.set=function(t,e){return So(this),this.c=null,Co(this,t=ko(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Pn.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Pn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var jo=function(){return function(t,e){this.b=t,this.a=e}}();function No(t){this.g=t||Do,t=Fn.PerformanceNavigationTiming?0<(t=Fn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Fn.ia&&Fn.ia.ya&&Fn.ia.ya()&&Fn.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Do=10;function Ro(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Po(t){return t.b?1:t.a?t.a.size:0}function Lo(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Mo(t,e){t.a?t.a.add(e):t.b=e}function Fo(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Vo(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Rn(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return tr(t.c)}function qo(){}function Uo(){this.a=new qo}function Bo(t,e,n){var r=n||"";try{ro(t,function(t,n){var i=t;Un(t)&&(i=ri(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Qm){throw e.push(r+"type="+encodeURIComponent("_badmap")),Qm}}function Ho(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}No.prototype.cancel=function(){var t,e;if(this.c=Vo(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Rn(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},qo.prototype.stringify=function(t){return Fn.JSON.stringify(t,void 0)},qo.prototype.parse=function(t){return Fn.JSON.parse(t,void 0)};var zo=Fn.JSON.parse;function Ko(t){ti.call(this),this.headers=new io,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Go,this.D=this.F=!1}Yn(Ko,ti);var Go="",Wo=/^https?$/i,Qo=["POST","PUT"];function Yo(t){return"content-type"==t.toLowerCase()}function $o(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Jo(t),Zo(t)}function Jo(t){t.u||(t.u=!0,ei(t,"complete"),ei(t,"error"))}function Xo(t){if(t.b&&void 0!==Mn&&(!t.s[1]||4!=es(t)||2!=t.W()))if(t.l&&4==es(t))mi(t.za,0,t);else if(ei(t,"readystatechange"),4==es(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ao)[1]||null;if(!o&&Fn.self&&Fn.self.location){var s=Fn.self.location.protocol;o=s.substr(0,s.length-1)}i=!Wo.test(o?o.toLowerCase():"")}e=i}if(e)ei(t,"complete"),ei(t,"success");else{t.h=6;try{var a=2<es(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Jo(t)}}finally{Zo(t)}}}function Zo(t,e){if(t.a){ts(t);var n=t.a,r=t.s[0]?Vn:null;t.a=null,t.s=null,e||ei(t,"ready");try{n.onreadystatechange=r}catch(Qm){}}}function ts(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Fn.clearTimeout(t.m),t.m=null)}function es(t){return t.a?t.a.readyState:0}function ns(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ur(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):yo(t,e,n))}function rs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function is(t){this.pa=0,this.g=[],this.c=new Ii,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=rs("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=rs("baseRetryDelayMs",5e3,t),this.Ra=rs("retryDelaySeedMs",1e4,t),this.Ma=rs("forwardChannelMaxRetries",2,t),this.ma=rs("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new No(t&&t.concurrentRequestLimit),this.ka=new Uo,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function os(t){if(as(t),3==t.v){var e=t.R++,n=co(t.B);yo(n,"SID",t.J),yo(n,"RID",e),yo(n,"TYPE","terminate"),hs(t,n),(e=new Hi(t,t.c,e,void 0)).H=2,e.i=mo(co(n)),n=!1,Fn.navigator&&Fn.navigator.sendBeacon&&(n=Fn.navigator.sendBeacon(e.i.toString(),"")),!n&&Fn.Image&&((new Image).src=e.i,n=!0),n||(e.a=Is(e.g,null),e.a.ba(e.i)),e.u=Qn(),Ji(e)}_s(t)}function ss(t){t.a&&(ys(t),t.a.cancel(),t.a=null)}function as(t){ss(t),t.j&&(Fn.clearTimeout(t.j),t.j=null),gs(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Fn.clearTimeout(t.h),t.h=null)}function us(t,e){t.g.push(new jo(t.Oa++,e)),3==t.v&&cs(t)}function cs(t){Ro(t.b)||t.h||(t.h=!0,li(t.Ba,t),t.u=0)}function ls(t,e){var n;n=e?e.f:t.R++;var r=co(t.B);yo(r,"SID",t.J),yo(r,"RID",n),yo(r,"AID",t.P),hs(t,r),t.i&&t.l&&ns(r,t.i,t.l),n=new Hi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=fs(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Mo(t.b,n),Wi(n,r,e)}function hs(t,e){t.f&&ro({},function(t,n){yo(e,n,t)})}function fs(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Gn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Bo(l,s,"req"+c+"_")}catch(na){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ds(t){t.a||t.j||(t.T=1,li(t.Aa,t),t.o=0)}function ps(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Di(Gn(t.Aa,t),bs(t,t.o)),t.o++,0))}function ys(t){null!=t.s&&(Fn.clearTimeout(t.s),t.s=null)}function ms(t){t.a=new Hi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=co(t.la);yo(e,"RID","rpc"),yo(e,"SID",t.J),yo(e,"CI",t.H?"0":"1"),yo(e,"AID",t.P),hs(t,e),yo(e,"TYPE","xmlhttp"),t.i&&t.l&&ns(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=mo(co(e)),n.j=null,n.I=!0,Qi(n,t)}function gs(t){null!=t.m&&(Fn.clearTimeout(t.m),t.m=null)}function vs(t,e){var n=null;if(t.a==e){gs(t),ys(t),t.a=null;var r=2}else{if(!Lo(t.b,e))return;n=e.s,Fo(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Qn()-e.u;var i=t.u;ei(r=xi(),new Ni(r,n,e,i)),cs(t)}else ds(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Po(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Di(Gn(t.Ba,t,e),bs(t,t.u)),t.u++,0)))}(t,e)||2==r&&ps(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ws(t,5);break;case 4:ws(t,10);break;case 3:ws(t,6);break;default:ws(t,2)}}function bs(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function ws(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Gn(t.Ya,t);n||(n=new uo("//www.google.com/images/cleardot.gif"),Fn.location&&"http"==Fn.location.protocol||lo(n,"https"),mo(n)),function(t,e){var n=new Ii;if(Fn.Image){var r=new Image;r.onload=Wn(Ho,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Wn(Ho,n,r,"TestLoadImage: error",!1,e),r.onabort=Wn(Ho,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wn(Ho,n,r,"TestLoadImage: timeout",!1,e),Fn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ji(2);t.v=0,t.f&&t.f.ra(e),_s(t),as(t)}function _s(t){t.v=0,t.I=-1,t.f&&(0==Vo(t.b).length&&0==t.g.length||(t.b.c.length=0,tr(t.g),t.g.length=0),t.f.qa())}function Es(t,e,n){var r=function(t){return t instanceof uo?co(t):new uo(t,void 0)}(n);if(""!=r.c)e&&ho(r,e+"."+r.c),fo(r,r.h);else{var i=Fn.location;r=function(t,e,n,r){var i=new uo(null,void 0);return t&&lo(i,t),e&&ho(i,e),n&&fo(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ur(t.V,function(t,e){yo(r,e,t)}),n=t.na,(e=t.A)&&n&&yo(r,e,n),yo(r,"VER",t.ha),hs(t,r),r}function Is(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ko(t.Na)).F=t.C,e}function Ts(){}function Os(){if(mr&&!(10<=Number(xr)))throw Error("Environmental error: no available transport.")}function Ss(t,e){ti.call(this),this.a=new is(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!er(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!er(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new As(this)}function xs(t){qi.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Cs(){Ui.call(this),this.status=1}function As(t){this.a=t}(Pn=Ko.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Fi),this.a.onreadystatechange=Gn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void $o(this,o)}t=n||"";var i=new io(this.headers);r&&ro(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Yo,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Fn.FormData&&t instanceof Fn.FormData,!(0<=Jn(Qo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ts(this),0<this.o&&((this.D=function(t){return mr&&Sr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Gn(this.xa,this)):this.m=mi(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){$o(this,o)}},Pn.xa=function(){void 0!==Mn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ei(this,"timeout"),this.abort(8))},Pn.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ei(this,"complete"),ei(this,"abort"),Zo(this))},Pn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Zo(this,!0)),Ko.X.G.call(this)},Pn.za=function(){this.j||(this.A||this.l||this.g?Xo(this):this.Ua())},Pn.Ua=function(){Xo(this)},Pn.W=function(){try{return 2<es(this)?this.a.status:-1}catch(pr){return-1}},Pn.$=function(){try{return this.a?this.a.responseText:""}catch(pr){return""}},Pn.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zo(e)}},Pn.ua=function(){return this.h},Pn.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Pn=is.prototype).ha=8,Pn.v=1,Pn.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Hi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?hr(r=cr(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=fs(this,n,e),yo(i=co(this.B),"RID",t),yo(i,"CVER",22),this.A&&yo(i,"X-HTTP-Session-Id",this.A),hs(this,i),this.i&&r&&ns(i,this.i,r),Mo(this.b,n),this.Ia&&yo(i,"TYPE","init"),this.da?(yo(i,"$req",e),yo(i,"SID","null"),n.U=!0,Wi(n,i,null)):Wi(n,i,e),this.v=2}}else 3==this.v&&(t?ls(this,t):0==this.g.length||Ro(this.b)||ls(this))},Pn.Aa=function(){if(this.j=null,ms(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Di(Gn(this.Ta,this),t)}},Pn.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ji(10),ss(this),ms(this))},Pn.Sa=function(){null!=this.m&&(this.m=null,ss(this),ps(this),ji(19))},Pn.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ji(2)):(this.c.info("Failed to ping google.com"),ji(1))},(Pn=Ts.prototype).ta=function(){},Pn.sa=function(){},Pn.ra=function(){},Pn.qa=function(){},Pn.Ja=function(){},Os.prototype.a=function(t,e){return new Ss(t,e)},Yn(Ss,ti),Ss.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ji(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Es(t,null,t.fa),cs(t)},Ss.prototype.close=function(){os(this.a)},Ss.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,us(this.a,e)}else this.l?((e={}).__data__=ri(t),us(this.a,e)):us(this.a,t)},Ss.prototype.G=function(){this.a.f=null,delete this.f,os(this.a),delete this.a,Ss.X.G.call(this)},Yn(xs,qi),Yn(Cs,Ui),Yn(As,Ts),As.prototype.ta=function(){ei(this.a,"a")},As.prototype.sa=function(t){ei(this.a,new xs(t))},As.prototype.ra=function(t){ei(this.a,new Cs(t))},As.prototype.qa=function(){ei(this.a,"b")},Os.prototype.createWebChannel=Os.prototype.a,Ss.prototype.send=Ss.prototype.h,Ss.prototype.open=Ss.prototype.g,Ss.prototype.close=Ss.prototype.close,Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,Pi.COMPLETE="complete",Mi.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",ti.prototype.listen=ti.prototype.va,Ko.prototype.listenOnce=Ko.prototype.wa,Ko.prototype.getLastError=Ko.prototype.Qa,Ko.prototype.getLastErrorCode=Ko.prototype.ua,Ko.prototype.getStatus=Ko.prototype.W,Ko.prototype.getResponseJson=Ko.prototype.Pa,Ko.prototype.getResponseText=Ko.prototype.$,Ko.prototype.send=Ko.prototype.ba;var ks=Ri,js=Pi,Ns=Oi,Ds=Mi,Rs=Ko,Ps=n("mrSG"),Ls=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ls.o=-1;var Ms=new jn.b("@firebase/firestore");function Fs(){return Ms.logLevel}function Vs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ms.logLevel<=jn.a.DEBUG){var r=e.map(Bs);Ms.debug.apply(Ms,Object(Ps.f)(["Firestore (8.3.1): "+t],r))}}function qs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ms.logLevel<=jn.a.ERROR){var r=e.map(Bs);Ms.error.apply(Ms,Object(Ps.f)(["Firestore (8.3.1): "+t],r))}}function Us(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ms.logLevel<=jn.a.WARN){var r=e.map(Bs);Ms.warn.apply(Ms,Object(Ps.f)(["Firestore (8.3.1): "+t],r))}}function Bs(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Qm){return t}}function Hs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw qs(e),new Error(e)}function zs(t,e){t||Hs()}function Ks(t,e){return t}function Gs(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ws=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Gs(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Qs(t,e){return t<e?-1:t>e?1:0}function Ys(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function $s(t){return t+"\0"}function Js(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ta(t){return null==t}function ea(t){return 0===t&&1/t==-1/0}function na(t){return"number"==typeof t&&Number.isInteger(t)&&!ea(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ra={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ia=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Ps.c)(e,t),e}(Error),oa=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Hs(),void 0===n?n=t.length-e:n>t.length-e&&Hs(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ia(ra.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(oa),aa=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return aa.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ia(ra.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ia(ra.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ia(ra.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ia(ra.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(oa),ca=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(sa.fromString(e))},t.fromName=function(e){return new t(sa.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===sa.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return sa.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new sa(e.slice()))},t}(),la=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Qs(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();la.EMPTY_BYTE_STRING=new la("");var ha=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(t){if(zs(!!t),"string"==typeof t){var e=0,n=ha.exec(t);if(zs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:da(t.seconds),nanos:da(t.nanos)}}function da(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function pa(t){return"string"==typeof t?la.fromBase64String(t):la.fromUint8Array(t)}var ya=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ia(ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ia(ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ia(ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ia(ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Qs(this.nanoseconds,t.nanoseconds):Qs(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function ma(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ga(t){var e=t.mapValue.fields.__previous_value__;return ma(e)?ga(e):e}function va(t){var e=fa(t.mapValue.fields.__local_write_time__.timestampValue);return new ya(e.seconds,e.nanos)}function ba(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ma(t)?4:10:Hs()}function wa(t,e){var n=ba(t);if(n!==ba(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return va(t).isEqual(va(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=fa(t.timestampValue),r=fa(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return pa(t.bytesValue).isEqual(pa(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return da(t.geoPointValue.latitude)===da(e.geoPointValue.latitude)&&da(t.geoPointValue.longitude)===da(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return da(t.integerValue)===da(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=da(t.doubleValue),r=da(e.doubleValue);return n===r?ea(n)===ea(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ys(t.arrayValue.values||[],e.arrayValue.values||[],wa);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Js(n)!==Js(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wa(n[i],r[i])))return!1;return!0}(t,e);default:return Hs()}}function _a(t,e){return void 0!==(t.values||[]).find(function(t){return wa(t,e)})}function Ea(t,e){var n=ba(t),r=ba(e);if(n!==r)return Qs(n,r);switch(n){case 0:return 0;case 1:return Qs(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=da(t.integerValue||t.doubleValue),r=da(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ia(t.timestampValue,e.timestampValue);case 4:return Ia(va(t),va(e));case 5:return Qs(t.stringValue,e.stringValue);case 6:return function(t,e){var n=pa(t),r=pa(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Qs(n[i],r[i]);if(0!==o)return o}return Qs(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Qs(da(t.latitude),da(e.latitude));return 0!==n?n:Qs(da(t.longitude),da(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ea(n[i],r[i]);if(o)return o}return Qs(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Qs(r[s],o[s]);if(0!==a)return a;var u=Ea(n[r[s]],i[o[s]]);if(0!==u)return u}return Qs(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Hs()}}function Ia(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qs(t,e);var n=fa(t),r=fa(e),i=Qs(n.seconds,r.seconds);return 0!==i?i:Qs(n.nanos,r.nanos)}function Ta(t){return Oa(t)}function Oa(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=fa(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?pa(t.bytesValue).toBase64():"referenceValue"in t?ca.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Oa(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Oa(t.fields[o])}return e+"}"}(t.mapValue):Hs();var e}function Sa(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xa(t){return!!t&&"integerValue"in t}function Ca(t){return!!t&&"arrayValue"in t}function Aa(t){return!!t&&"nullValue"in t}function ka(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}var Na=function(t,e){this.key=t,this.version=e},Da=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Ps.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Na),Ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Ps.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Na),Pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Na),La=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ma(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new La(t,e,n,r,i,o,s)}function Fa(t){var e=Ks(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ta(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),ta(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ja(e.startAt)),e.endAt&&(n+="|ub:",n+=Ja(e.endAt)),e.h=n}return e.h}function Va(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Za(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!wa(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eu(t.startAt,e.startAt)&&eu(t.endAt,e.endAt)}function qa(t){return ca.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ua=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Ps.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ba(t,n,r):"array-contains"===n?new Ga(t,r):"in"===n?new Wa(t,r):"not-in"===n?new Qa(t,r):"array-contains-any"===n?new Ya(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ha(t,n):new za(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Ea(e,this.value)):null!==e&&ba(this.value)===ba(e)&&this.m(Ea(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Hs()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ba=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ca.fromName(r.referenceValue),i}return Object(Ps.c)(e,t),e.prototype.matches=function(t){var e=ca.comparator(t.key,this.key);return this.m(e)},e}(Ua),Ha=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ka(0,n),r}return Object(Ps.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ua),za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ka(0,n),r}return Object(Ps.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ua);function Ka(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ca.fromName(t.referenceValue)})}var Ga=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Ps.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ca(e)&&_a(e.arrayValue,this.value)},e}(Ua),Wa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Ps.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&_a(this.value.arrayValue,e)},e}(Ua),Qa=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Ps.c)(e,t),e.prototype.matches=function(t){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!_a(this.value.arrayValue,e)},e}(Ua),Ya=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Ps.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ca(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return _a(e.value.arrayValue,t)})},e}(Ua),$a=function(t,e){this.position=t,this.before=e};function Ja(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ta(t)}).join(",")}var Xa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Za(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function tu(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ca.comparator(ca.fromName(s.referenceValue),n.key):Ea(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function eu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wa(t.position[n],e.position[n]))return!1;return!0}var nu=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function ru(t,e,n,r,i,o,s,a){return new nu(t,e,n,r,i,o,s,a)}function iu(t){return new nu(t)}function ou(t){return!ta(t.limit)&&"F"===t.limitType}function su(t){return!ta(t.limit)&&"L"===t.limitType}function au(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function uu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function cu(t){return null!==t.collectionGroup}function lu(t){var e=Ks(t);if(null===e.p){e.p=[];var n=uu(e),r=au(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Xa(n)),e.p.push(new Xa(ua.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Xa(ua.keyField(),u))}}}return e.p}function hu(t){var e=Ks(t);if(!e.T)if("F"===e.limitType)e.T=Ma(e.path,e.collectionGroup,lu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=lu(e);r<i.length;r++){var o=i[r];n.push(new Xa(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new $a(e.endAt.position,!e.endAt.before):null,a=e.startAt?new $a(e.startAt.position,!e.startAt.before):null;e.T=Ma(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function fu(t,e,n){return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return Va(hu(t),hu(e))&&t.limitType===e.limitType}function pu(t){return Fa(hu(t))+"|lt:"+t.limitType}function yu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ta(e.value);var e}).join(", ")+"]"),ta(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ja(t.startAt)),t.endAt&&(e+=", endAt: "+Ja(t.endAt)),"Target("+e+")"}(hu(t))+"; limitType="+t.limitType+")"}function mu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ca.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!tu(t.startAt,lu(t),e)||t.endAt&&tu(t.endAt,lu(t),e))}(t,e)}function gu(t){return function(e,n){for(var r=!1,i=0,o=lu(t);i<o.length;i++){var s=o[i],a=vu(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function vu(t,e,n){var r=t.field.isKeyField()?ca.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ea(r,i):Hs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Hs()}}var bu=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ya(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),wu=function(){function t(t){this.fields=t,t.sort(ua.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ys(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),_u=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ja(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return wa(this.proto,t.proto)},t}(),Eu=function(){function t(t){void 0===t&&(t=_u.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ba(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(ua.emptyPath(),this.A);return null!=t?new _u(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=ja(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Iu(t){var e=[];return Xs(t.fields||{},function(t,n){var r=new ua([t]);if(ja(n)){var i=Iu(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new wu(e)}function Tu(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ea(e)?"-0":e}}function Ou(t){return{integerValue:""+t}}function Su(t,e){return na(e)?Ou(e):Tu(t,e)}var xu=function(){this._=void 0};function Cu(t,e,n){return t instanceof ju?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nu?Du(t,e):t instanceof Ru?Pu(t,e):function(t,e){var n=ku(t,e),r=Mu(n)+Mu(t.S);return xa(n)&&xa(t.S)?Ou(r):Tu(t.D,r)}(t,e)}function Au(t,e,n){return t instanceof Nu?Du(t,e):t instanceof Ru?Pu(t,e):n}function ku(t,e){return t instanceof Lu?xa(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ju=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e}(xu),Nu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ps.c)(e,t),e}(xu);function Du(t,e){for(var n=Fu(e),r=function(t){n.some(function(e){return wa(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ru=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ps.c)(e,t),e}(xu);function Pu(t,e){for(var n=Fu(e),r=function(t){n=n.filter(function(e){return!wa(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Ps.c)(e,t),e}(xu);function Mu(t){return da(t.integerValue||t.doubleValue)}function Fu(t){return Ca(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Vu=function(t,e){this.field=t,this.transform=e},qu=function(t,e){this.version=t,this.transformResults=e},Uu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Bu(t,e){return void 0!==t.updateTime?e instanceof Da&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Da}var Hu=function(){};function zu(t,e,n){return t instanceof Yu?function(t,e,n){var r=t.value,i=Xu(t.fieldTransforms,e,n.transformResults);return r=tc(t.fieldTransforms,r,i),new Da(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof $u?function(t,e,n){if(!Bu(t.precondition,e))return new Pa(t.key,n.version);var r=Ju(t,e,Xu(t.fieldTransforms,e,n.transformResults));return new Da(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ra(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ku(t,e,n){return t instanceof Yu?function(t,e,n){if(!Bu(t.precondition,e))return e;var r=t.value,i=Zu(t.fieldTransforms,n,e);r=tc(t.fieldTransforms,r,i);var o=Qu(e);return new Da(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof $u?function(t,e,n){if(!Bu(t.precondition,e))return e;var r=Qu(e),i=Ju(t,e,Zu(t.fieldTransforms,n,e));return new Da(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Bu(t.precondition,e)?new Ra(t.key,bu.min()):e}(t,e)}function Gu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Da?e.field(o.field):void 0,a=ku(o.transform,s||null);null!=a&&(n=null==n?(new Eu).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function Wu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ys(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nu&&e instanceof Nu||t instanceof Ru&&e instanceof Ru?Ys(t.elements,e.elements,wa):t instanceof Lu&&e instanceof Lu?wa(t.S,e.S):t instanceof ju&&e instanceof ju}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Qu(t){return t instanceof Da?t.version:bu.min()}var Yu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Ps.c)(e,t),e}(Hu),$u=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Ps.c)(e,t),e}(Hu);function Ju(t,e,n){var r;return r=function(t,e){var n=new Eu(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Da?e.data():_u.empty()),tc(t.fieldTransforms,r,n)}function Xu(t,e,n){var r=[];zs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Da&&(a=e.field(o.field)),r.push(Au(s,a,n[i]))}return r}function Zu(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Da&&(u=n.field(s.field)),r.push(Cu(a,u,e))}return r}function tc(t,e,n){for(var r=new Eu(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var ec,nc,rc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Ps.c)(e,t),e}(Hu),ic=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Ps.c)(e,t),e}(Hu),oc=function(t){this.count=t};function sc(t){switch(t){case ra.OK:return Hs();case ra.CANCELLED:case ra.UNKNOWN:case ra.DEADLINE_EXCEEDED:case ra.RESOURCE_EXHAUSTED:case ra.INTERNAL:case ra.UNAVAILABLE:case ra.UNAUTHENTICATED:return!1;case ra.INVALID_ARGUMENT:case ra.NOT_FOUND:case ra.ALREADY_EXISTS:case ra.PERMISSION_DENIED:case ra.FAILED_PRECONDITION:case ra.ABORTED:case ra.OUT_OF_RANGE:case ra.UNIMPLEMENTED:case ra.DATA_LOSS:return!0;default:return Hs()}}function ac(t){if(void 0===t)return qs("GRPC error has no .code"),ra.UNKNOWN;switch(t){case ec.OK:return ra.OK;case ec.CANCELLED:return ra.CANCELLED;case ec.UNKNOWN:return ra.UNKNOWN;case ec.DEADLINE_EXCEEDED:return ra.DEADLINE_EXCEEDED;case ec.RESOURCE_EXHAUSTED:return ra.RESOURCE_EXHAUSTED;case ec.INTERNAL:return ra.INTERNAL;case ec.UNAVAILABLE:return ra.UNAVAILABLE;case ec.UNAUTHENTICATED:return ra.UNAUTHENTICATED;case ec.INVALID_ARGUMENT:return ra.INVALID_ARGUMENT;case ec.NOT_FOUND:return ra.NOT_FOUND;case ec.ALREADY_EXISTS:return ra.ALREADY_EXISTS;case ec.PERMISSION_DENIED:return ra.PERMISSION_DENIED;case ec.FAILED_PRECONDITION:return ra.FAILED_PRECONDITION;case ec.ABORTED:return ra.ABORTED;case ec.OUT_OF_RANGE:return ra.OUT_OF_RANGE;case ec.UNIMPLEMENTED:return ra.UNIMPLEMENTED;case ec.DATA_LOSS:return ra.DATA_LOSS;default:return Hs()}}(nc=ec||(ec={}))[nc.OK=0]="OK",nc[nc.CANCELLED=1]="CANCELLED",nc[nc.UNKNOWN=2]="UNKNOWN",nc[nc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nc[nc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nc[nc.NOT_FOUND=5]="NOT_FOUND",nc[nc.ALREADY_EXISTS=6]="ALREADY_EXISTS",nc[nc.PERMISSION_DENIED=7]="PERMISSION_DENIED",nc[nc.UNAUTHENTICATED=16]="UNAUTHENTICATED",nc[nc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nc[nc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nc[nc.ABORTED=10]="ABORTED",nc[nc.OUT_OF_RANGE=11]="OUT_OF_RANGE",nc[nc.UNIMPLEMENTED=12]="UNIMPLEMENTED",nc[nc.INTERNAL=13]="INTERNAL",nc[nc.UNAVAILABLE=14]="UNAVAILABLE",nc[nc.DATA_LOSS=15]="DATA_LOSS";var uc=function(){function t(t,e){this.comparator=t,this.root=e||lc.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lc.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lc.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new cc(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new cc(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new cc(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new cc(this.root,t,this.comparator,!0)},t}(),cc=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),lc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Hs();if(this.right.isRed())throw Hs();var t=this.left.check();if(t!==this.right.check())throw Hs();return t+(this.isRed()?0:1)},t}();lc.EMPTY=null,lc.RED=!0,lc.BLACK=!1,lc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Hs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new lc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var hc=function(){function t(t){this.comparator=t,this.data=new uc(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new fc(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new fc(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),fc=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),dc=new uc(ca.comparator);function pc(){return dc}function yc(){return pc()}var mc=new uc(ca.comparator);function gc(){return mc}var vc=new uc(ca.comparator);function bc(){return vc}var wc=new hc(ca.comparator);function _c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ec=new hc(Qs);function Ic(){return Ec}var Tc=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(bu.min(),r,Ic(),pc(),_c())},t}(),Oc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(la.EMPTY_BYTE_STRING,n,_c(),_c(),_c())},t}(),Sc=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},xc=function(t,e){this.targetId=t,this.$=e},Cc=function(t,e,n,r){void 0===n&&(n=la.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ac=function(){function t(){this.F=0,this.O=Nc(),this.k=la.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=_c(),e=_c(),n=_c();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Hs()}}),new Oc(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Nc()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),kc=function(){function t(t){this.X=t,this.Z=new Map,this.tt=pc(),this.et=jc(),this.nt=new hc(Qs)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Da?this.it(r,t.N):t.N instanceof Ra&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Hs()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(qa(i))if(0===n){var o=new ca(i.path);this.rt(e,o,new Ra(o,bu.min()))}else zs(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&qa(o.target)){var s=new ca(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Ra(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=_c();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Tc(t,n,this.nt,this.tt,r);return this.tt=pc(),this.et=jc(),this.nt=new hc(Qs),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Ac,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new hc(Qs),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Vs("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Ac),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function jc(){return new uc(ca.comparator)}function Nc(){return new uc(ca.comparator)}var Dc={asc:"ASCENDING",desc:"DESCENDING"},Rc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pc=function(t,e){this.databaseId=t,this.V=e};function Lc(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mc(t,e){return t.V?e.toBase64():e.toUint8Array()}function Fc(t,e){return Lc(t,e.toTimestamp())}function Vc(t){return zs(!!t),bu.fromTimestamp(function(t){var e=fa(t);return new ya(e.seconds,e.nanos)}(t))}function qc(t,e){return function(t){return new sa(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Uc(t){var e=sa.fromString(t);return zs(hl(e)),e}function Bc(t,e){return qc(t.databaseId,e.path)}function Hc(t,e){var n=Uc(e);if(n.get(1)!==t.databaseId.projectId)throw new ia(ra.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ia(ra.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ca(Wc(n))}function zc(t,e){return qc(t.databaseId,e)}function Kc(t){var e=Uc(t);return 4===e.length?sa.emptyPath():Wc(e)}function Gc(t){return new sa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wc(t){return zs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qc(t,e,n){return{name:Bc(t,e),fields:n.proto.mapValue.fields}}function Yc(t,e,n){var r=Hc(t,e.name),i=Vc(e.updateTime),o=new _u({mapValue:{fields:e.fields}});return new Da(r,i,o,{hasCommittedMutations:!!n})}function $c(t,e){var n;if(e instanceof Yu)n={update:Qc(t,e.key,e.value)};else if(e instanceof rc)n={delete:Bc(t,e.key)};else if(e instanceof $u)n={update:Qc(t,e.key,e.data),updateMask:ll(e.fieldMask)};else{if(!(e instanceof ic))return Hs();n={verify:Bc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof ju)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nu)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ru)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Lu)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Hs()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Fc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Hs()}(t,e.precondition)),n}function Jc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Uu.updateTime(Vc(t.updateTime)):void 0!==t.exists?Uu.exists(t.exists):Uu.none()}(e.currentDocument):Uu.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(zs("REQUEST_TIME"===e.setToServerValue),n=new ju):"appendMissingElements"in e?n=new Nu(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ru(e.removeAllFromArray.values||[]):"increment"in e?n=new Lu(t,e.increment):Hs();var r=ua.fromServerFormat(e.fieldPath);return new Vu(r,n)}(t,e)}):[];if(e.update){var i=Hc(t,e.update.name),o=new _u({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new wu((t.fieldPaths||[]).map(function(t){return ua.fromServerFormat(t)}))}(e.updateMask);return new $u(i,o,s,n,r)}return new Yu(i,o,n,r)}if(e.delete){var a=Hc(t,e.delete);return new rc(a,n)}if(e.verify){var u=Hc(t,e.verify);return new ic(u,n)}return Hs()}function Xc(t,e){return{documents:[zc(t,e.path)]}}function Zc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=zc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=zc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(ka(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(Aa(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ka(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(Aa(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:ol(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:sl(t.field),direction:il(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||ta(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=nl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=nl(e.endAt)),n}function tl(t){var e=Kc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){zs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=el(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Xa(al(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return ta(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=rl(n.startAt));var l=null;return n.endAt&&(l=rl(n.endAt)),ru(e,i,a,s,u,"F",c,l)}function el(t){return t?void 0!==t.unaryFilter?[cl(t)]:void 0!==t.fieldFilter?[ul(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return el(t)}).reduce(function(t,e){return t.concat(e)}):Hs():[]}function nl(t){return{before:t.before,values:t.position}}function rl(t){return new $a(t.values||[],!!t.before)}function il(t){return Dc[t]}function ol(t){return Rc[t]}function sl(t){return{fieldPath:t.canonicalString()}}function al(t){return ua.fromServerFormat(t.fieldPath)}function ul(t){return Ua.create(al(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Hs()}}(t.fieldFilter.op),t.fieldFilter.value)}function cl(t){switch(t.unaryFilter.op){case"IS_NAN":var e=al(t.unaryFilter.field);return Ua.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=al(t.unaryFilter.field);return Ua.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=al(t.unaryFilter.field);return Ua.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=al(t.unaryFilter.field);return Ua.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Hs()}}function ll(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function hl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function fl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=pl(e)),e=dl(t.get(n),e);return pl(e)}function dl(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function pl(t){return t+"\x01\x01"}function yl(t){var e=t.length;if(zs(e>=2),2===e)return zs("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),sa.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Hs(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Hs()}o=s+2}return new sa(r)}var ml=function(t,e){this.seconds=t,this.nanoseconds=e},gl=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};gl.store="owner",gl.key="owner";var vl=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};vl.store="mutationQueues",vl.keyPath="userId";var bl=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};bl.store="mutations",bl.keyPath="batchId",bl.userMutationsIndex="userMutationsIndex",bl.userMutationsKeyPath=["userId","batchId"];var wl=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fl(e)]},t.key=function(t,e,n){return[t,fl(e),n]},t}();wl.store="documentMutations",wl.PLACEHOLDER=new wl;var _l=function(t,e){this.path=t,this.readTime=e},El=function(t,e){this.path=t,this.version=e},Il=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Il.store="remoteDocuments",Il.readTimeIndex="readTimeIndex",Il.readTimeIndexPath="readTime",Il.collectionReadTimeIndex="collectionReadTimeIndex",Il.collectionReadTimeIndexPath=["parentPath","readTime"];var Tl=function(t){this.byteSize=t};Tl.store="remoteDocumentGlobal",Tl.key="remoteDocumentGlobalKey";var Ol=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ol.store="targets",Ol.keyPath="targetId",Ol.queryTargetsIndexName="queryTargetsIndex",Ol.queryTargetsKeyPath=["canonicalId","targetId"];var Sl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Sl.store="targetDocuments",Sl.keyPath=["targetId","path"],Sl.documentTargetsIndex="documentTargetsIndex",Sl.documentTargetsKeyPath=["path","targetId"];var xl=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xl.key="targetGlobalKey",xl.store="targetGlobal";var Cl=function(t,e){this.collectionId=t,this.parent=e};Cl.store="collectionParents",Cl.keyPath=["collectionId","parent"];var Al=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Al.store="clientMetadata",Al.keyPath="clientId";var kl=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};kl.store="bundles",kl.keyPath="bundleId";var jl=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jl.store="namedQueries",jl.keyPath="name";var Nl=Object(Ps.f)(Object(Ps.f)([],Object(Ps.f)(Object(Ps.f)([],Object(Ps.f)(Object(Ps.f)([],Object(Ps.f)(Object(Ps.f)([],[vl.store,bl.store,wl.store,Il.store,Ol.store,gl.store,xl.store,Sl.store]),[Al.store])),[Tl.store])),[Cl.store])),[kl.store,jl.store]),Dl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rl=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Pl=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ll=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Hs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Ml=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Pl,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new ql(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Kl(e.target.error);n.gt.reject(new ql(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ql(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Vs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Bl(e)},t}(),Fl=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Nn.g)())&&qs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Vs("SimpleDb","Removing database:",t),Hl(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Nn.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Vs("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new ql(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ia(ra.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new ql(t,n))},i.onupgradeneeded=function(t){Vs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Vs("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Ps.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Ps.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=Ml.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Ll.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Vs("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Vl=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Hl(this.xt.delete())},t}(),ql=function(t){function e(e,n){var r=this;return(r=t.call(this,ra.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Ps.c)(e,t),e}(ia);function Ul(t){return"IndexedDbTransactionError"===t.name}var Bl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Vs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Vs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Hl(n)},t.prototype.add=function(t){return Vs("SimpleDb","ADD",this.store.name,t,t),Hl(this.store.add(t))},t.prototype.get=function(t){var e=this;return Hl(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Vs("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Vs("SimpleDb","DELETE",this.store.name,t),Hl(this.store.delete(t))},t.prototype.count=function(){return Vs("SimpleDb","COUNT",this.store.name),Hl(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Vs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new Ll(function(n,r){e.onerror=function(t){var e=Kl(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new Ll(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Vl(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ll){var a=s.catch(function(t){return o.done(),Ll.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return Ll.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Hl(t){return new Ll(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Kl(t.target.error);n(e)}})}var zl=!1;function Kl(t){var e=Fl.It(Object(Nn.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ia("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zl||(zl=!0,setTimeout(function(){throw r},0)),r}}return t}var Gl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Ps.c)(e,t),e}(Rl);function Wl(t,e){var n=Ks(t);return Fl.Pt(n.Qt,e)}var Ql=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=zu(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ku(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ku(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},_c())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ys(this.mutations,t.mutations,function(t,e){return Wu(t,e)})&&Ys(this.baseMutations,t.baseMutations,function(t,e){return Wu(t,e)})},t}(),Yl=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){zs(e.mutations.length===r.length);for(var i=bc(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),$l=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=bu.min()),void 0===o&&(o=bu.min()),void 0===s&&(s=la.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Jl=function(t){this.Kt=t};function Xl(t,e){if(e.document)return Yc(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ca.fromSegments(e.noDocument.path),r=rh(e.noDocument.readTime);return new Ra(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ca.fromSegments(e.unknownDocument.path);return r=rh(e.unknownDocument.version),new Pa(i,r)}return Hs()}function Zl(t,e,n){var r=th(n),i=e.key.path.popLast().toArray();if(e instanceof Da){var o=function(t,e){return{name:Bc(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Lc(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new Il(null,null,o,s,r,i)}if(e instanceof Ra){var a=e.key.path.toArray(),u=nh(e.version);return s=e.hasCommittedMutations,new Il(null,new _l(a,u),null,s,r,i)}if(e instanceof Pa){var c=e.key.path.toArray(),l=nh(e.version);return new Il(new El(c,l),null,null,!0,r,i)}return Hs()}function th(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eh(t){var e=new ya(t[0],t[1]);return bu.fromTimestamp(e)}function nh(t){var e=t.toTimestamp();return new ml(e.seconds,e.nanoseconds)}function rh(t){var e=new ya(t.seconds,t.nanoseconds);return bu.fromTimestamp(e)}function ih(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Jc(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Jc(t.Kt,e)}),o=ya.fromMillis(e.localWriteTimeMs);return new Ql(e.batchId,o,n,i)}function oh(t){var e,n,r=rh(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?rh(t.lastLimboFreeSnapshotVersion):bu.min();return void 0!==t.query.documents?(zs(1===(n=t.query).documents.length),e=hu(iu(Kc(n.documents[0])))):e=function(t){return hu(tl(t))}(t.query),new $l(e,t.targetId,0,t.lastListenSequenceNumber,r,i,la.fromBase64String(t.resumeToken))}function sh(t,e){var n,r=nh(e.snapshotVersion),i=nh(e.lastLimboFreeSnapshotVersion);n=qa(e.target)?Xc(t.Kt,e.target):Zc(t.Kt,e.target);var o=e.resumeToken.toBase64();return new Ol(e.targetId,Fa(e.target),r,o,e.sequenceNumber,i,n)}function ah(t){var e=tl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fu(e,e.limit,"L"):e}var uh=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ch(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:rh(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return ch(t).put({bundleId:(n=e).id,createTime:nh(Vc(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return lh(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:ah(e.bundledQuery),readTime:rh(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return lh(t).put(function(t){return{name:t.name,readTime:nh(Vc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ch(t){return Wl(t,kl.store)}function lh(t){return Wl(t,jl.store)}var hh=function(){function t(){this.Wt=new fh}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),Ll.resolve()},t.prototype.getCollectionParents=function(t,e){return Ll.resolve(this.Wt.getEntries(e))},t}(),fh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new hc(sa.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new hc(sa.comparator)).toArray()},t}(),dh=function(){function t(){this.jt=new fh}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:fl(i)};return ph(t).put(o)}return Ll.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[$s(e),""],!1,!0);return ph(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(yl(o.parent))}return n})},t}();function ph(t){return Wl(t,Cl.store)}var yh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mh=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function gh(t,e,n){var r=t.store(bl.store),i=t.store(wl.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){zs(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=wl.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ll.waitFor(o).next(function(){return c})}function vh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Hs();e=t.noDocument}return JSON.stringify(e).length}mh.DEFAULT_COLLECTION_PERCENTILE=10,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mh.DEFAULT=new mh(41943040,mh.DEFAULT_COLLECTION_PERCENTILE,mh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mh.DISABLED=new mh(-1,0,0);var bh=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return zs(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _h(t).qt({index:bl.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Eh(t),s=_h(t);return s.add({}).next(function(a){zs("number"==typeof a);for(var u=new Ql(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return $c(t.Kt,e)}),i=n.mutations.map(function(e){return $c(t.Kt,e)});return new bl(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new hc(function(t,e){return Qs(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=wl.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,wl.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),Ll.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return _h(t).get(e).next(function(t){return t?(zs(t.userId===n.userId),ih(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?Ll.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _h(t).qt({index:bl.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(zs(e.batchId>=r),o=ih(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return _h(t).qt({index:bl.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _h(t).kt(bl.userMutationsIndex,n).next(function(t){return t.map(function(t){return ih(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=wl.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Eh(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=yl(r[1]);if(a===n.userId&&e.path.isEqual(c))return _h(t).get(u).next(function(t){if(!t)throw Hs();zs(t.userId===n.userId),o.push(ih(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hc(Qs),i=[];return e.forEach(function(e){var o=wl.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Eh(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=yl(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Ll.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=wl.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new hc(Qs);return Eh(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=yl(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(_h(t).get(e).next(function(t){if(null===t)throw Hs();zs(t.userId===n.userId),r.push(ih(n.D,t))}))}),Ll.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return gh(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),Ll.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ll.resolve();var r=IDBKeyRange.lowerBound(wl.prefixForUser(e.userId)),i=[];return Eh(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=yl(t[1]);i.push(o)}else r.done()}).next(function(){zs(0===i.length)})})},t.prototype.containsKey=function(t,e){return wh(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return Ih(t).get(this.userId).next(function(t){return t||new vl(e.userId,-1,"")})},t}();function wh(t,e,n){var r=wl.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Eh(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function _h(t){return Wl(t,bl.store)}function Eh(t){return Wl(t,wl.store)}function Ih(t){return Wl(t,vl.store)}var Th=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),Oh=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Th(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return bu.fromTimestamp(new ya(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Sh(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return zs(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Sh(t).qt(function(s,a){var u=oh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Ll.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Sh(t).qt(function(t,n){var r=oh(n);e(r)})},t.prototype.se=function(t){return xh(t).get(xl.key).next(function(t){return zs(null!==t),t})},t.prototype.ie=function(t,e){return xh(t).put(xl.key,e)},t.prototype.re=function(t,e){return Sh(t).put(sh(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Fa(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sh(t).qt({range:r,index:Ol.queryTargetsIndexName},function(t,n,r){var o=oh(n);Va(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Ch(t);return e.forEach(function(e){var s=fl(e.path);i.push(o.put(new Sl(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ll.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Ch(t);return Ll.forEach(e,function(e){var o=fl(e.path);return Ll.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Ch(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ch(t),i=_c();return r.qt({range:n,Bt:!0},function(t,e,n){var r=yl(t[1]),o=new ca(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=fl(e.path),r=IDBKeyRange.bound([n],[$s(n)],!1,!0),i=0;return Ch(t).qt({index:Sl.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return Sh(t).get(e).next(function(t){return t?oh(t):null})},t}();function Sh(t){return Wl(t,Ol.store)}function xh(t){return Wl(t,xl.store)}function Ch(t){return Wl(t,Sl.store)}function Ah(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){if(t.code!==ra.FAILED_PRECONDITION||t.message!==Dl)throw t;return Vs("LocalStore","Unexpectedly lost primary lease"),[2]})})}function kh(t,e){var n=t[1],r=e[1],i=Qs(t[0],e[0]);return 0===i?Qs(n,r):i}var jh=function(){function t(t){this.ce=t,this.buffer=new hc(kh),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();kh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Nh=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Vs("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Ps.b)(e,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ul(e=n.sent())?(Vs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ah(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),Dh=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ll.resolve(Ls.o);var r=new jh(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Vs("LruGarbageCollector","Garbage collection skipped; disabled"),Ll.resolve(yh)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Vs("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),yh):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Vs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Fs()<=jn.a.DEBUG&&Vs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Ll.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Rh=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Dh(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Ph(t,n)},t.prototype.removeReference=function(t,e,n){return Ph(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ph(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return Ih(t).Ut(function(r){return wh(t,r,e).next(function(t){return t&&(n=!0),Ll.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Ch(t).delete([0,fl(s.path)])})});i.push(u)}}).next(function(){return Ll.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ph(t,e)},t.prototype.pe=function(t,e){var n,r=Ch(t),i=Ls.o;return r.qt({index:Sl.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ls.o&&e(new ca(yl(n)),i),i=s,n=o):i=Ls.o}).next(function(){i!==Ls.o&&e(new ca(yl(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ph(t,e){return Ch(t).put(function(t,e){return new Sl(0,fl(t.path),e)}(e,t.currentSequenceNumber))}var Lh=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Xs(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Zs(this.inner)},t}(),Mh=function(){function t(){this.changes=new Lh(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:bu.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ll.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Fh=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Uh(t).put(Bh(e),n)},t.prototype.removeEntry=function(t,e){var n=Uh(t),r=Bh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Uh(t).get(Bh(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Uh(t).get(Bh(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:vh(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=yc();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=yc(),i=new uc(ca.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,vh(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return Ll.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Uh(t).qt({range:r},function(t,e,r){for(var s=ca.fromSegments(t);o&&ca.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=gc(),o=e.path.length+1,s={};if(n.isEqual(bu.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=th(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Il.collectionReadTimeIndex}return Uh(t).qt(s,function(t,n,s){if(t.length===o){var a=Xl(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Da&&mu(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Vh(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return qh(t).get(Tl.key).next(function(t){return zs(!!t),t})},t.prototype.Te=function(t,e){return qh(t).put(Tl.key,e)},t.prototype.Ie=function(t){if(t){var e=Xl(this.D,t);return e instanceof Ra&&e.version.isEqual(bu.min())?null:e}return null},t}(),Vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new Lh(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Ps.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new hc(function(t,e){return Qs(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Zl(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=vh(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Zl(e.Ve.D,new Ra(o,bu.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),Ll.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(Mh);function qh(t){return Wl(t,Tl.store)}function Uh(t){return Wl(t,Il.store)}function Bh(t){return t.path.toArray()}var Hh=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;zs(n<r&&n>=0&&r<=11);var o=new Ml("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(gl.store)}(t),function(t){t.createObjectStore(vl.store,{keyPath:vl.keyPath}),t.createObjectStore(bl.store,{keyPath:bl.keyPath,autoIncrement:!0}).createIndex(bl.userMutationsIndex,bl.userMutationsKeyPath,{unique:!0}),t.createObjectStore(wl.store)}(t),zh(t),function(t){t.createObjectStore(Il.store)}(t));var s=Ll.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Sl.store),t.deleteObjectStore(Ol.store),t.deleteObjectStore(xl.store)}(t),zh(t)),s=s.next(function(){return function(t){var e=t.store(xl.store),n=new xl(0,0,bu.min().toTimestamp(),0);return e.put(xl.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(bl.store).kt().next(function(n){t.deleteObjectStore(bl.store),t.createObjectStore(bl.store,{keyPath:bl.keyPath,autoIncrement:!0}).createIndex(bl.userMutationsIndex,bl.userMutationsKeyPath,{unique:!0});var r=e.store(bl.store),i=n.map(function(t){return r.put(t)});return Ll.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Al.store,{keyPath:Al.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Tl.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Il.store);e.createIndex(Il.readTimeIndex,Il.readTimeIndexPath,{unique:!1}),e.createIndex(Il.collectionReadTimeIndex,Il.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(kl.store,{keyPath:kl.keyPath})}(t),function(t){t.createObjectStore(jl.store,{keyPath:jl.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(Il.store).qt(function(t,n){e+=vh(n)}).next(function(){var n=new Tl(e);return t.store(Tl.store).put(Tl.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(vl.store),r=t.store(bl.store);return n.kt().next(function(n){return Ll.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(bl.userMutationsIndex,i).next(function(r){return Ll.forEach(r,function(r){zs(r.userId===n.userId);var i=ih(e.D,r);return gh(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(Sl.store),n=t.store(Il.store);return t.store(xl.store).get(xl.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new sa(n),s=function(t){return[0,fl(t)]}(o);r.push(e.get(s).next(function(n){return n?Ll.resolve():function(n){return e.put(new Sl(0,fl(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ll.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Cl.store,{keyPath:Cl.keyPath});var n=e.store(Cl.store),r=new fh,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:fl(i)})}};return e.store(Il.store).qt({Bt:!0},function(t,e){var n=new sa(t);return i(n.popLast())}).next(function(){return e.store(wl.store).qt({Bt:!0},function(t,e){var n=yl(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(Ol.store);return n.qt(function(t,r){var i=oh(r),o=sh(e.D,i);return n.put(o)})},t}();function zh(t){t.createObjectStore(Sl.store,{keyPath:Sl.keyPath}).createIndex(Sl.documentTargetsIndex,Sl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ol.store,{keyPath:Ol.keyPath}).createIndex(Ol.queryTargetsIndexName,Ol.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xl.store)}var Kh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Gh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new ia(ra.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Rh(this,i),this.We=n+"main",this.D=new Jl(u),this.je=new Fl(this.We,11,new Hh(this.D)),this.Ge=new Oh(this.referenceDelegate,this.D),this.Gt=new dh,this.ze=function(t,e){return new Fh(t,e)}(this.D,this.Gt),this.He=new uh,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&qs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ia(ra.FAILED_PRECONDITION,Kh);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Ls(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Ps.b)(e,void 0,void 0,function(){return Object(Ps.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Ps.b)(e,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Ps.b)(e,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Qh(e).put(new Al(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Ul(e))return Vs("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Vs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return Wh(t).get(gl.key).next(function(t){return Ll.resolve(e.cn(t))})},t.prototype.an=function(t){return Qh(t).delete(this.clientId)},t.prototype.un=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Wl(t,Al.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ll.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?Ll.resolve(!0):Wh(t).get(gl.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new ia(ra.FAILED_PRECONDITION,Kh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qh(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Vs("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t=this;return Object(Ps.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[gl.store,Al.store],function(e){var n=new Gl(e,Ls.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Qh(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return bh.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Vs("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Nl,function(o){return r=new Gl(o,i.Me?i.Me.next():Ls.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw qs("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new ia(ra.FAILED_PRECONDITION,Dl);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return Wh(t).get(gl.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ia(ra.FAILED_PRECONDITION,Kh)})},t.prototype.on=function(t){var e=new gl(this.clientId,this.allowTabSynchronization,Date.now());return Wh(t).put(gl.key,e)},t.At=function(){return Fl.At()},t.prototype.rn=function(t){var e=this,n=Wh(t);return n.get(gl.key).next(function(t){return e.cn(t)?(Vs("IndexedDbPersistence","Releasing primary lease."),n.delete(gl.key)):Ll.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(qs("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Vs("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return qs("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){qs("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Wh(t){return Wl(t,gl.store)}function Qh(t){return Wl(t,Al.store)}function Yh(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $h=function(t,e){this.progress=t,this.En=e},Jh=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=yc();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=pc();return i.forEach(function(t,e){e||(e=new Ra(t,bu.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ca.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):cu(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new ca(e)).next(function(t){var e=gc();return t instanceof Da&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=gc();return this.Gt.getCollectionParents(t,i).next(function(s){return Ll.forEach(s,function(s){var a=function(t,e){return new nu(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Ku(u,r.get(c),o.localWriteTime);r=l instanceof Da?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){mu(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=_c(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof $u&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Da&&(c=c.insert(t,e))}),c})},t}(),Xh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=_c(),i=_c(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Zh=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(bu.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(ou(e)||su(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(Fs()<=jn.a.DEBUG&&Vs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yu(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new hc(gu(t));return e.forEach(function(e,r){r instanceof Da&&mu(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Fs()<=jn.a.DEBUG&&Vs("QueryEngine","Using full collection scan to execute query:",yu(e)),this.Fn.getDocumentsMatchingQuery(t,e,bu.min())},t}(),tf=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new uc(Qs),this.qn=new Lh(function(t){return Fa(t)},Va),this.Un=bu.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Jh(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function ef(t,e,n,r){return new tf(t,e,n,r)}function nf(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ps.d)(this,function(s){switch(s.label){case 0:return n=Ks(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Jh(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=_c(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function rf(t,e){var n=Ks(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ll.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);zs(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function of(t){var e=Ks(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function sf(t,e){var n=Ks(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return zs(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=pc();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(af(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(bu.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Ll.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function af(t,e,n,r,i){var o=_c();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=pc();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Ra&&s.version.isEqual(bu.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Vs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function uf(t,e){var n=Ks(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function cf(t,e){var n=Ks(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?Ll.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new $l(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function lf(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:r=Ks(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ul(s=a.sent()))throw s;return Vs("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function hf(t,e,n){var r=Ks(t),i=bu.min(),o=_c();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ks(t),i=r.qn.get(n);return void 0!==i?Ll.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,hu(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:bu.min(),n?o:_c())}).next(function(t){return{documents:t,jn:o}})})}function ff(t,e){var n=Ks(t),r=Ks(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function df(t){var e=Ks(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ks(t),i=pc(),o=th(n),s=Uh(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:Il.readTimeIndex,range:a},function(t,e){var n=Xl(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:eh(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function pf(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){return[2,(e=Ks(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Uh(t),n=bu.min();return e.qt({index:Il.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=eh(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function yf(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Ps.d)(this,function(p){switch(p.label){case 0:for(i=Ks(t),o=_c(),s=pc(),a=bc(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,cf(i,function(t){return hu(iu(sa.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return af(t,f,s,bu.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function mf(t,e,n){return void 0===n&&(n=_c()),Object(Ps.b)(this,void 0,void 0,function(){var r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return[4,cf(t,hu(ah(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ks(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Vc(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(la.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var gf=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ll.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Vc(n.createTime)}),Ll.resolve()},t.prototype.getNamedQuery=function(t,e){return Ll.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:ah(t.bundledQuery),readTime:Vc(t.readTime)}}(e)),Ll.resolve()},t}(),vf=function(){function t(){this.Xn=new hc(bf.Zn),this.ts=new hc(bf.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new bf(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new bf(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new ca(new sa([])),r=new bf(n,t),i=new bf(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new ca(new sa([])),n=new bf(e,t),r=new bf(e,t+1),i=_c();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new bf(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),bf=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return ca.comparator(t.key,e.key)||Qs(t.hs,e.hs)},t.es=function(t,e){return Qs(t.hs,e.hs)||ca.comparator(t.key,e.key)},t}(),wf=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new hc(bf.Zn)}return t.prototype.checkEmpty=function(t){return Ll.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new Ql(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new bf(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return Ll.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ll.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return Ll.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ll.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return Ll.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new bf(e,0),i=new bf(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),Ll.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hc(Qs);return e.forEach(function(t){var e=new bf(t,0),i=new bf(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),Ll.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ca.isDocumentKey(i)||(i=i.child(""));var o=new bf(new ca(i),0),s=new hc(Qs);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),Ll.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;zs(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return Ll.forEach(e.mutations,function(i){var o=new bf(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new bf(e,0),r=this.fs.firstAfterOrEqual(n);return Ll.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ll.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),_f=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new uc(ca.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ll.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=yc();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),Ll.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=gc(),i=new ca(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Da&&mu(e,u)&&(r=r.insert(u.key,u))}return Ll.resolve(r)},t.prototype.ps=function(t,e){return Ll.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Ef(this)},t.prototype.getSize=function(t){return Ll.resolve(this.size)},t}(),Ef=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Ps.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),Ll.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(Mh),If=function(){function t(t){this.persistence=t,this.Es=new Lh(function(t){return Fa(t)},Va),this.lastRemoteSnapshotVersion=bu.min(),this.highestTargetId=0,this.Ts=0,this.Is=new vf,this.targetCount=0,this.As=Th.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),Ll.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ll.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ll.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),Ll.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),Ll.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Th(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,Ll.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),Ll.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,Ll.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ll.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ll.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return Ll.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),Ll.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ll.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),Ll.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return Ll.resolve(n)},t.prototype.containsKey=function(t,e){return Ll.resolve(this.Is.containsKey(e))},t}(),Tf=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Ls(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new If(this),this.Gt=new hh,this.ze=function(t,e){return new _f(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new Jl(e),this.He=new gf(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new wf(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Vs("MemoryPersistence","Starting transaction:",t);var i=new Of(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return Ll.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Of=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Ps.c)(e,t),e}(Rl),Sf=function(){function t(t){this.persistence=t,this.Ss=new vf,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Hs()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),Ll.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),Ll.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),Ll.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ll.forEach(this.xs,function(r){var i=ca.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return Ll.or([function(){return Ll.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),xf=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Cf(t,e){return"firestore_clients_"+t+"_"+e}function Af(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function kf(t,e){return"firestore_targets_"+t+"_"+e}xf.UNAUTHENTICATED=new xf(null),xf.GOOGLE_CREDENTIALS=new xf("google-credentials-uid"),xf.FIRST_PARTY=new xf("first-party-uid");var jf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ia(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(qs("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Nf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ia(i.error.code,i.error.message)),o?new t(e,i.state,r):(qs("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Df=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ic(),s=0;i&&s<r.activeTargetIds.length;++s)i=na(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(qs("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Rf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(qs("SharedClientState","Failed to parse online state: "+e),null)},t}(),Pf=function(){function t(){this.activeTargetIds=Ic()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Lf=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new uc(Qs),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Cf(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Pf),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Ps.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Cf(this.persistenceKey,r)))&&(o=Df.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(kf(this.persistenceKey,t));if(n){var r=Nf.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(kf(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Vs("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Vs("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Vs("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Vs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void qs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Ps.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Ps.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Ls.o;if(null!=t)try{var n=JSON.parse(t);zs("number"==typeof n),e=n}catch(t){qs("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ls.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new jf(this.currentUser,t,e,n),i=Af(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Af(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=kf(this.persistenceKey,t),i=new Nf(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Df.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return jf.$s(new xf(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Nf.$s(r,e)},t.prototype.Ys=function(t){return Rf.$s(t)},t.prototype.hi=function(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Vs("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=Ic();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Mf=function(){function t(){this.yi=new Pf,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Pf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ff=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Vf=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Vs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Vs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Uf=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Bf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Ps.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Rs;s.listenOnce(js.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ks.NO_ERROR:var e=s.getResponseJson();Vs("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ks.TIMEOUT:Vs("Connection",'RPC "'+t+'" timed out'),o(new ia(ra.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:var n=s.getStatus();if(Vs("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ra).indexOf(e)>=0?e:ra.UNKNOWN}(r.status);o(new ia(a,r.message))}else o(new ia(ra.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ia(ra.UNAVAILABLE,"Connection failed."));break;default:Hs()}}finally{Vs("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Os,i=xi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Nn.l)()||Object(Nn.n)()||Object(Nn.j)()||Object(Nn.k)()||Object(Nn.o)()||Object(Nn.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Vs("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Uf({vi:function(t){c?Vs("Connection","Not sending because WebChannel is closed:",t):(u||(Vs("Connection","Opening WebChannel transport."),a.open(),u=!0),Vs("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Ds.EventType.OPEN,function(){c||Vs("Connection","WebChannel transport opened.")}),h(a,Ds.EventType.CLOSE,function(){c||(c=!0,Vs("Connection","WebChannel transport closed"),l.$i())}),h(a,Ds.EventType.ERROR,function(t){c||(c=!0,Us("Connection","WebChannel transport errored:",t),l.$i(new ia(ra.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ds.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];zs(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Vs("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=ec[t];if(void 0!==e)return ac(e)}(i),s=r.message;void 0===o&&(o=ra.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new ia(o,s)),a.close()}else Vs("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,Ns.STAT_EVENT,function(t){10===t.stat?Vs("Connection","Detected buffering proxy"):11===t.stat&&Vs("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Vs("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Vs("RestConnection","Received: ",t),t},function(e){throw Us("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+qf[t]},t}());function Hf(){return"undefined"!=typeof window?window:null}function zf(){return"undefined"!=typeof document?document:null}function Kf(t){return new Pc(t,!0)}var Gf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Vs("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Wf=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Gf(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===ra.RESOURCE_EXHAUSTED?(qs(e.toString()),qs("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===ra.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new ia(ra.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Ps.b)(t,void 0,void 0,function(){return Object(Ps.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Vs("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Vs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Qf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Ps.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Hs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(zs(void 0===e||"string"==typeof e),la.fromBase64String(e||"")):(zs(void 0===e||e instanceof Uint8Array),la.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ra.UNKNOWN:ac(t.code);return new ia(e,t.message||"")}(a);n=new Cc(r,i,o,s||null)}else if("documentChange"in e){i=Hc(t,(r=e.documentChange).document.name),o=Vc(r.document.updateTime);var a=new _u({mapValue:{fields:r.document.fields}}),u=(s=new Da(i,o,a,{}),r.targetIds||[]);n=new Sc(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Hc(t,(r=e.documentDelete).document),o=r.readTime?Vc(r.readTime):bu.min(),a=new Ra(i,o),n=new Sc([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Hc(t,(r=e.documentRemove).document),n=new Sc([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Hs();var c=e.filter;i=new oc(r=c.count||0),n=new xc(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return bu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?bu.min():e.readTime?Vc(e.readTime):bu.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Gc(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=qa(r)?{documents:Xc(t,r)}:{query:Zc(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Mc(t,e.resumeToken):e.snapshotVersion.compareTo(bu.min())>0&&(n.readTime=Lc(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Hs()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Gc(this.D),e.removeTarget=t,this.wr(e)},e}(Wf),Yf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(zs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(zs(void 0!==e),t.map(function(t){return function(t,e){var n=Vc(t.updateTime?t.updateTime:e);return n.isEqual(bu.min())&&(n=Vc(e)),new qu(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Vc(t.commitTime);return this.listener.Pr(n,e)}return zs(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Gc(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return $c(e.D,t)})};this.wr(n)},e}(Wf),$f=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Ps.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new ia(ra.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===ra.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===ra.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),Jf=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(qs(e),this.Fr=!1):Vs("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Xf=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Ps.b)(o,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return ad(this)?(Vs("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return(e=Ks(t)).Qr.add(4),[4,td(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,Zf(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new Jf(n,r)};function Zf(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:if(!ad(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function td(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ed(t,e){var n=Ks(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),sd(n)?od(n):Ed(n).ar()&&rd(n,e))}function nd(t,e){var n=Ks(t),r=Ed(n);n.Ur.delete(e),r.ar()&&id(n,e),0===n.Ur.size&&(r.ar()?r.lr():ad(n)&&n.jr.set("Unknown"))}function rd(t,e){t.Gr.H(e.targetId),Ed(t).Ir(e)}function id(t,e){t.Gr.H(e),Ed(t).Ar(e)}function od(t){t.Gr=new kc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),Ed(t).start(),t.jr.Or()}function sd(t){return ad(t)&&!Ed(t).cr()&&t.Ur.size>0}function ad(t){return 0===Ks(t).Qr.size}function ud(t){t.Gr=void 0}function cd(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){return t.Ur.forEach(function(e,n){rd(t,e)}),[2]})})}function ld(t,e){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(n){return ud(t),sd(t)?(t.jr.Lr(e),od(t)):t.jr.set("Unknown"),[2]})})}function hd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ps.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Cc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ps.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Vs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fd(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Sc?t.Gr.st(e):e instanceof xc?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(bu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,of(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(la.EMPTY_BYTE_STRING,n.snapshotVersion)),id(t,e);var r=new $l(n.target,e,1,n.sequenceNumber);rd(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Vs("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fd(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function fd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r=this;return Object(Ps.d)(this,function(i){switch(i.label){case 0:if(!Ul(e))throw e;return t.Qr.add(1),[4,td(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return of(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Ps.b)(r,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return Vs("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,Zf(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function dd(t,e){return e().catch(function(n){return fd(t,n,e)})}function pd(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Ps.d)(this,function(s){switch(s.label){case 0:e=Ks(t),n=Id(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ad(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,uf(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Id(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fd(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return yd(e)&&md(e),[2]}})})}function yd(t){return ad(t)&&!Id(t).cr()&&t.qr.length>0}function md(t){Id(t).start()}function gd(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){return Id(t).Sr(),[2]})})}function vd(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ps.d)(this,function(i){for(e=Id(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function bd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=Yl.from(r,e,n),[4,dd(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,pd(t)];case 2:return o.sent(),[2]}})})}function wd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e&&Id(t).br?[4,function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return sc(r=e.code)&&r!==ra.ABORTED?(n=t.qr.shift(),Id(t).hr(),[4,dd(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,pd(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return yd(t)&&md(t),[2]}})})}function _d(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return n=Ks(t),e?(n.Qr.delete(2),[4,Zf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,td(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Ed(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Ks(t);return r.Cr(),new Qf(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:cd.bind(null,t),Di:ld.bind(null,t),Tr:hd.bind(null,t)}),t.Kr.push(function(n){return Object(Ps.b)(e,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),sd(t)?od(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),ud(t),e.label=3;case 3:return[2]}})})})),t.zr}function Id(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Ks(t);return r.Cr(),new Yf(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:gd.bind(null,t),Di:wd.bind(null,t),Vr:vd.bind(null,t),Pr:bd.bind(null,t)}),t.Kr.push(function(n){return Object(Ps.b)(e,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,pd(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Vs("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var Td=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Pl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ia(ra.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Od(t,e){if(qs("AsyncQueue",e+": "+t),Ul(t))return new ia(ra.UNAVAILABLE,e+": "+t);throw t}var Sd=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ca.comparator(e.key,n.key)}:function(t,e){return ca.comparator(t.key,e.key)},this.keyedMap=gc(),this.sortedSet=new uc(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),xd=function(){function t(){this.Jr=new uc(ca.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Hs():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Cd=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Sd.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&du(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ad=function(){this.Xr=void 0,this.listeners=[]},kd=function(){this.queries=new Lh(function(t){return pu(t)},du),this.onlineState="Unknown",this.Zr=new Set};function jd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ps.d)(this,function(c){switch(c.label){case 0:if(n=Ks(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ad),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Od(a,"Initialization of query '"+yu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&Pd(n),[2]}})})}function Nd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ps.d)(this,function(a){return n=Ks(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Dd(t,e){for(var n=Ks(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&Pd(n)}function Rd(t,e,n){var r=Ks(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Pd(t){t.Zr.forEach(function(t){t.next()})}var Ld=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Cd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Cd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),Md=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),Fd=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Hc(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?Yc(this.D,t.document,!1):new Ra(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return Vc(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new Fd(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||_c()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return[4,yf(this.localStore,new Fd(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,mf(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $h(Object.assign({},this.progress),t))]}})})}}();var Vd=function(t){this.key=t},qd=function(t){this.key=t},Ud=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=_c(),this.mutatedKeys=_c(),this.po=gu(t),this.Eo=new Sd(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new xd,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ou(this.query)&&i.size===this.query.limit?i.last():null,c=su(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Da?e:null;h&&(h=mu(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ou(this.query)||su(this.query))for(;s.size>this.query.limit;){var l=ou(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hs()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Cd(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new xd,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=_c(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new qd(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new Vd(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=_c();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Cd.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Bd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Hd=function(t){this.key=t,this.Co=!1},zd=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new Lh(function(t){return pu(t)},du),this.$o=new Map,this.Fo=new Set,this.Oo=new uc(ca.comparator),this.ko=new Map,this.Mo=new vf,this.Lo={},this.Bo=new Map,this.qo=Th.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Kd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:return n=wp(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,cf(n.localStore,hu(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Gd(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&ed(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Gd(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Ps.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,hf(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(op(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,hf(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Ud(e,i.jn),s=o.Io(i.documents),a=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),op(t,n,u.Po),c=new Bd(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Wd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return n=Ks(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!du(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,lf(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),nd(n.remoteStore,r.targetId),rp(n,r.targetId)}).catch(Ah)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return rp(n,r.targetId),[4,lf(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Qd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:r=_p(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ks(t),i=ya.now(),o=e.reduce(function(t,e){return t.add(e.key)},_c());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Gu(c,n.get(c.key));null!=l&&s.push(new $u(c.key,l,Iu(l.proto.mapValue),Uu.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new uc(Qs)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,up(r,i.changes)];case 3:return a.sent(),[4,pd(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Od(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Yd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:n=Ks(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,sf(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(zs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?zs(r.Co):t.removedDocuments.size>0&&(zs(r.Co),r.Co=!1))}),[4,up(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ah(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function $d(t,e,n){var r=Ks(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ks(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&Pd(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Ps.d)(this,function(c){switch(c.label){case 0:return(r=Ks(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new uc(ca.comparator)).insert(o,new Ra(o,bu.min())),a=_c().add(o),u=new Tc(bu.min(),new Map,new hc(Qs),s,a),[4,Yd(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),ap(r),[3,4];case 2:return[4,lf(r.localStore,e,!1).then(function(){return rp(r,e,n)}).catch(Ah)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Xd(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:n=Ks(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,rf(n.localStore,e)];case 2:return i=o.sent(),np(n,r,null),ep(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,up(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ah(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Zd(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:r=Ks(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ks(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return zs(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),np(r,e,n),ep(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,up(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ah(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function tp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:ad((n=Ks(t)).remoteStore)||Vs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ks(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Od(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function ep(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function np(t,e,n){var r=Ks(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function rp(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||ip(t,e)})}function ip(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(nd(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),ap(t))}function op(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Vd?(t.Mo.addReference(o.key,e),sp(t,o)):o instanceof qd?(Vs("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||ip(t,o.key)):Hs()}}function sp(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Vs("SyncEngine","New document in limbo: "+n),t.Fo.add(r),ap(t))}function ap(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new ca(sa.fromString(e)),r=t.qo.next();t.ko.set(r,new Hd(n)),t.Oo=t.Oo.insert(n,r),ed(t.remoteStore,new $l(hu(iu(n.path)),r,2,Ls.o))}}function up(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:return r=Ks(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Xh.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Ps.d)(this,function(l){switch(l.label){case 0:n=Ks(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ll.forEach(e,function(e){return Ll.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ll.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ul(r=l.sent()))throw r;return Vs("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function cp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return(n=Ks(t)).currentUser.isEqual(e)?[3,3]:(Vs("SyncEngine","User change. New user:",e.toKey()),[4,nf(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new ia(ra.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,up(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function lp(t,e){var n=Ks(t),r=n.ko.get(e);if(r&&r.Co)return _c().add(r.key);var i=_c(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function hp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return[4,hf((n=Ks(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&op(n,e.targetId,i.Po),i)]}})})}function fp(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){return[2,df((e=Ks(t)).localStore).then(function(t){return up(e,t)})]})})}function dp(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o;return Object(Ps.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ks(t),r=Ks(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):Ll.resolve(null)})})}((i=Ks(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,pd(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(np(i,e,r||null),ep(i,e),function(t,e){Ks(Ks(t).Tn).Xt(e)}(i.localStore,e)):Hs(),s.label=4;case 4:return[4,up(i,o)];case 5:return s.sent(),[3,7];case 6:Vs("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function pp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ps.d)(this,function(c){switch(c.label){case 0:return wp(n=Ks(t)),_p(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,yp(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,_d(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)ed(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return rp(n,e),lf(n.localStore,e,!0)}),nd(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,yp(n,a)];case 5:return c.sent(),function(t){var e=Ks(t);e.ko.forEach(function(t,n){nd(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new uc(ca.comparator)}(n),n.Uo=!1,[4,_d(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function yp(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Ps.d)(this,function(y){switch(y.label){case 0:n=Ks(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,cf(n.localStore,hu(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,hp(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ff(n.localStore,a)];case 8:return p=y.sent(),[4,cf(n.localStore,p)];case 9:return u=y.sent(),[4,Gd(n,mp(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function mp(t){return ru(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gp(t){var e=Ks(t);return Ks(Ks(e.localStore).persistence).gn()}function vp(t,e,n,r){return Object(Ps.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ps.d)(this,function(a){switch(a.label){case 0:return(i=Ks(t)).Uo?(Vs("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,df(i.localStore)];case 3:return o=a.sent(),s=Tc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,up(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,lf(i.localStore,e,!0)];case 6:return a.sent(),rp(i,e,r),[3,8];case 7:Hs(),a.label=8;case 8:return[2]}})})}function bp(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Ps.d)(this,function(f){switch(f.label){case 0:if(!(r=wp(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Vs("SyncEngine","Adding an already active target "+s),[3,5]):[4,ff(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,cf(r.localStore,a)];case 3:return u=f.sent(),[4,Gd(r,mp(a),u.targetId,!1)];case 4:f.sent(),ed(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,lf(r.localStore,t,!1).then(function(){nd(r.remoteStore,t),rp(r,t)}).catch(Ah)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function wp(t){var e=Ks(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jd.bind(null,e),e.xo.Tr=Dd.bind(null,e.eventManager),e.xo.Ko=Rd.bind(null,e.eventManager),e}function _p(t){var e=Ks(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zd.bind(null,e),e}var Ep=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return this.D=Kf(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return ef(this.persistence,new Zh,t.initialUser,this.D)},t.prototype.Go=function(t){return new Tf(Sf.Cs,this.D)},t.prototype.jo=function(t){return new Mf},t.prototype.terminate=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Ps.c)(e,t),e.prototype.initialize=function(e){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,pf(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,_p(this.Jo.syncEngine)];case 4:return n.sent(),[4,pd(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return ef(this.persistence,new Zh,t.initialUser,this.D)},e.prototype.zo=function(t){return new Nh(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=Yh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mh.withCacheSize(this.cacheSizeBytes):mh.DEFAULT;return new Gh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Hf(),zf(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new Mf},e}(Ep),Tp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Ps.c)(e,t),e.prototype.initialize=function(e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r=this;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Lf?(this.sharedClientState.syncEngine={wi:dp.bind(null,n),_i:vp.bind(null,n),mi:bp.bind(null,n),gn:gp.bind(null,n),di:fp.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Ps.b)(r,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return[4,pp(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Hf();if(!Lf.At(e))throw new ia(ra.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Yh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Lf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ip),Op=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n=this;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return $d(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cp.bind(null,this.syncEngine),[4,_d(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new kd},t.prototype.createDatastore=function(t){var e=Kf(t.databaseInfo.databaseId),n=new Bf(t.databaseInfo);return function(t,e,n){return new $f(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return $d(s.syncEngine,t,0)},o=Vf.At()?new Vf:new Ff,new Xf(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new zd(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e=Ks(t),Vs("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,td(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Sp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),xp=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Pl,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new Md(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ps.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ia(ra.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Ps.d)(this,function(u){switch(u.label){case 0:return n=Ks(t),r=Gc(n.D)+"/documents",i={documents:e.map(function(t){return Bc(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){zs(!!e.found);var n=Hc(t,e.found.name),r=Vc(e.found.updateTime),i=new _u({mapValue:{fields:e.found.fields}});return new Da(n,r,i,{})}(t,e):"missing"in e?function(t,e){zs(!!e.missing),zs(!!e.readTime);var n=Hc(t,e.missing),r=Vc(e.readTime);return new Ra(n,r)}(t,e):Hs()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());zs(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Ra||t instanceof Da?n.recordVersion(t):Hs()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new rc(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ps.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ca.fromPath(n);e.mutations.push(new ic(r,e.precondition(r)))}),[4,function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return n=Ks(t),r=Gc(n.D)+"/documents",i={writes:e.map(function(t){return $c(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Da)e=t.version;else{if(!(t instanceof Ra))throw Hs();e=bu.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ia(ra.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Uu.updateTime(e):Uu.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(bu.min()))throw new ia(ra.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Uu.updateTime(e)}return Uu.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Cp=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Gf(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Ps.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Ps.d)(this,function(r){return t=new xp(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!ta(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!sc(e)}return!1},t}(),Ap=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=xf.UNAUTHENTICATED,this.clientId=Ws.u(),this.credentialListener=function(){},this.receivedInitialUser=new Pl,this.credentials.setChangeListener(function(t){Vs("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ia(ra.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Pl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Ps.b)(t,void 0,void 0,function(){var t,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Od(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function kp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Vs("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Ps.b)(i,void 0,void 0,function(){return Object(Ps.d)(this,function(t){switch(t.label){case 0:return[4,nf(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function jp(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Np(t)];case 1:return n=i.sent(),Vs("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Ps.b)(this,void 0,void 0,function(){var n,r;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return(n=Ks(t)).asyncQueue.verifyOperationInProgress(),Vs("RemoteStore","RemoteStore received new credentials"),r=ad(n),n.Qr.add(3),[4,td(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,Zf(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Np(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Vs("FirestoreClient","Using default OfflineComponentProvider"),[4,kp(t,new Ep)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Dp(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Vs("FirestoreClient","Using default OnlineComponentProvider"),[4,jp(t,new Op)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Rp(t){return Np(t).then(function(t){return t.persistence})}function Pp(t){return Np(t).then(function(t){return t.localStore})}function Lp(t){return Dp(t).then(function(t){return t.remoteStore})}function Mp(t){return Dp(t).then(function(t){return t.syncEngine})}function Fp(t){return Object(Ps.b)(this,void 0,void 0,function(){var e,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return[4,Dp(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Kd.bind(null,e.syncEngine),n.onUnlisten=Wd.bind(null,e.syncEngine),n)]}})})}function Vp(t,e,n){var r=this;void 0===n&&(n={});var i=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(r,void 0,void 0,function(){var r;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sp({next:function(o){e.enqueueAndForget(function(){return Nd(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ia(ra.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ia(ra.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ld(iu(n.path),o,{includeMetadataChanges:!0,uo:!0});return jd(t,s)},[4,Fp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function qp(t,e,n){var r=this;void 0===n&&(n={});var i=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(r,void 0,void 0,function(){var r;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sp({next:function(n){e.enqueueAndForget(function(){return Nd(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ia(ra.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ld(n,o,{includeMetadataChanges:!0,uo:!0});return jd(t,s)},[4,Fp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Up=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Bp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Hp=new Map,zp=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Kp=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(xf.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Gp=function(){function t(t){var e=this;this.fc=null,this.currentUser=xf.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Vs("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(zs("string"==typeof n.accessToken),new zp(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return zs(null===t||"string"==typeof t),new xf(t)},t}(),Wp=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=xf.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qp=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Wp(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(xf.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Yp(t,e,n){if(!n)throw new ia(ra.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $p(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ia(ra.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Jp(t,e,n,r){if(!0===e&&!0===r)throw new ia(ra.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Xp(t){if(!ca.isDocumentKey(t))throw new ia(ra.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Zp(t){if(ca.isDocumentKey(t))throw new ia(ra.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ty(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Hs()}function ey(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ia(ra.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ty(t);throw new ia(ra.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ny(t,e){if(e<=0)throw new ia(ra.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var ry=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ia(ra.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ia(ra.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Jp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),iy=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new ry({}),this._settingsFrozen=!1,t instanceof Bp?(this._databaseId=t,this._credentials=new Kp):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ia(ra.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bp(t.options.projectId)}(t),this._credentials=new Gp(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ia(ra.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ia(ra.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ry(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Kp;switch(t.type){case"gapi":var e=t.client;return zs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qp(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ia(ra.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Hp.get(this))&&(Vs("ComponentProvider","Removing Datastore"),Hp.delete(this),t.terminate()),Promise.resolve();var t},t}(),oy=function(t){this._delegate=t},sy=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new uy(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ay=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),uy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,iu(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new sy(this.firestore,null,new ca(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ay);function cy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof oy&&(t=t._delegate),Yp("collection","path",e),t instanceof iy)return Zp(n=sa.fromString.apply(sa,Object(Ps.f)([e],r))),new uy(t,null,n);if(!(t instanceof sy||t instanceof uy))throw new ia(ra.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zp(n=sa.fromString.apply(sa,Object(Ps.f)([t.path],r)).child(sa.fromString(e))),new uy(t.firestore,null,n)}function ly(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof oy&&(t=t._delegate),1===arguments.length&&(e=Ws.u()),Yp("doc","path",e),t instanceof iy)return Xp(n=sa.fromString.apply(sa,Object(Ps.f)([e],r))),new sy(t,null,new ca(n));if(!(t instanceof sy||t instanceof uy))throw new ia(ra.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xp(n=t._path.child(sa.fromString.apply(sa,Object(Ps.f)([e],r)))),new sy(t.firestore,t instanceof uy?t._converter:null,new ca(n))}function hy(t,e){return t instanceof oy&&(t=t._delegate),e instanceof oy&&(e=e._delegate),(t instanceof sy||t instanceof uy)&&(e instanceof sy||e instanceof uy)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function fy(t,e){return t instanceof oy&&(t=t._delegate),e instanceof oy&&(e=e._delegate),t instanceof ay&&e instanceof ay&&t.firestore===e.firestore&&du(t._query,e._query)&&t._converter===e._converter}var dy=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Gf(this,"async_queue_retry"),this.bc=function(){var e=zf();e&&Vs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=zf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=zf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ps.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Ul(t=n.sent()))throw t;return Vs("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,qs("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=Td.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Hs()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Ps.b)(this,void 0,void 0,function(){var t;return Object(Ps.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function py(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Pl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var yy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new dy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Ps.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||gy(this),this._firestoreClient.terminate()},e}(iy);function my(t){return t._firestoreClient||gy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gy(t){var e=t._freezeSettings(),n=function(t,e,n){return new Up(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Ap(t._credentials,t._queue,n)}function vy(t,e,n){var r=this,i=new Pl;return t.asyncQueue.enqueue(function(){return Object(Ps.b)(r,void 0,void 0,function(){var r;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,kp(t,n)];case 1:return o.sent(),[4,jp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ra.FAILED_PRECONDITION||t.code===ra.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function by(t){if(t._initialized||t._terminated)throw new ia(ra.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ia(ra.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ua(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),_y=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(la.fromBase64String(e))}catch(e){throw new ia(ra.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(la.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ey=function(t){this._methodName=t},Iy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ia(ra.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ia(ra.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Qs(this._lat,t._lat)||Qs(this._long,t._long)},t}(),Ty=/^__.*__$/,Oy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new $u(t,this.data,this.fieldMask,e,this.fieldTransforms):new Yu(t,this.data,e,this.fieldTransforms)},t}(),Sy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new $u(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function xy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hs()}}var Cy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return Qy(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(xy(this.Fc)&&Ty.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Ay=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Kf(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Cy({Fc:t,methodName:e,Kc:n,path:ua.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function ky(t){var e=t._freezeSettings(),n=Kf(t._databaseId);return new Ay(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);zy("Data must be an object, but it was:",s,r);var a,u,c=By(r,s);if(o.merge)a=new wu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ky(e,f[h],n);if(!s.contains(d))throw new ia(ra.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Yy(l,d)||l.push(d)}a=new wu(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Oy(new _u(c),a,u)}var Ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ey);function Dy(t,e,n){return new Cy({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype._toFieldTransform=function(t){return new Vu(t.path,new ju)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ey),Py=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Ps.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Dy(this,t,!0),n=this.jc.map(function(t){return Uy(t,e)}),r=new Nu(n);return new Vu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ey),Ly=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Ps.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Dy(this,t,!0),n=this.jc.map(function(t){return Uy(t,e)}),r=new Ru(n);return new Vu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ey),My=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Ps.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Lu(t.D,Su(t.D,this.Gc));return new Vu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ey);function Fy(t,e,n,r){var i=t.Wc(1,e,n);zy("Data must be an object, but it was:",i,r);var o=[],s=new Eu;Xs(r,function(t,r){var a=Wy(e,t,n);r instanceof oy&&(r=r._delegate);var u=i.Bc(a);if(r instanceof Ny)o.push(a);else{var c=Uy(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new wu(o);return new Sy(s.v(),a,i.fieldTransforms)}function Vy(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Ky(e,r,n)],u=[i];if(o.length%2!=0)throw new ia(ra.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ky(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Eu,f=a.length-1;f>=0;--f)if(!Yy(l,a[f])){var d=a[f],p=u[f];p instanceof oy&&(p=p._delegate);var y=s.Bc(d);if(p instanceof Ny)l.push(d);else{var m=Uy(p,y);null!=m&&(l.push(d),h.set(d,m))}}var g=new wu(l);return new Sy(h.v(),g,s.fieldTransforms)}function qy(t,e,n,r){return void 0===r&&(r=!1),Uy(n,t.Wc(r?4:3,e))}function Uy(t,e){if(t instanceof oy&&(t=t._delegate),Hy(t))return zy("Unsupported field value:",e,t),By(t,e);if(t instanceof Ey)return function(t,e){if(!xy(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Uy(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof oy&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Su(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ya.fromDate(t);return{timestampValue:Lc(e.D,n)}}if(t instanceof ya)return n=new ya(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Lc(e.D,n)};if(t instanceof Iy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _y)return{bytesValue:Mc(e.D,t._byteString)};if(t instanceof sy){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:qc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+ty(t))}(t,e)}function By(t,e){var n={};return Zs(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,function(t,r){var i=Uy(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Hy(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ya||t instanceof Iy||t instanceof _y||t instanceof sy||t instanceof Ey)}function zy(t,e,n){if(!Hy(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ty(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Ky(t,e,n){if(e instanceof oy&&(e=e._delegate),e instanceof wy)return e._internalPath;if("string"==typeof e)return Wy(t,e);throw Qy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gy=new RegExp("[~\\*/\\[\\]]");function Wy(t,e,n){if(e.search(Gy)>=0)throw Qy("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wy.bind.apply(wy,Object(Ps.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Qy("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Qy(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ia(ra.INVALID_ARGUMENT,(a+=". ")+t+u)}function Yy(t,e){return t.some(function(t){return t.isEqual(e)})}var $y=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new sy(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Xy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}($y);function Xy(t,e){return"string"==typeof e?Wy(t,e):e instanceof oy?e._delegate._internalPath:e._internalPath}var Zy=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tm=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Ps.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new em(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Xy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}($y),em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(tm),nm=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Zy(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new em(n._firestore,n._userDataWriter,r.key,r,new Zy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ia(ra.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new em(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new em(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Zy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:rm(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function rm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hs()}}function im(t,e){return t instanceof tm&&e instanceof tm?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof nm&&e instanceof nm&&t._firestore===e._firestore&&fy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function om(t){if(su(t)&&0===t.explicitOrderBy.length)throw new ia(ra.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sm=function(){};function am(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var um=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Ps.c)(e,t),e.prototype._apply=function(t){var e=ky(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ia(ra.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ym(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(pm(r,t,l[c]));a={arrayValue:{values:u}}}else a=pm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ym(s,o),a=qy(n,"where",s,"in"===o||"not-in"===o);var h=Ua.create(i,o,a);return function(t,e){if(e.g()){var n=uu(t);if(null!==n&&!n.isEqual(e.field))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=au(t);null!==r&&mm(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ia(ra.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new ay(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(sm),cm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Ps.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ia(ra.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ia(ra.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xa(e,n);return function(t,e){if(null===au(t)){var n=uu(t);null!==n&&mm(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new ay(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new nu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(sm),lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Ps.c)(e,t),e.prototype._apply=function(t){return new ay(t.firestore,t._converter,fu(t._query,this.Xc,this.Zc))},e}(sm),hm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Ps.c)(e,t),e.prototype._apply=function(t){var e=dm(t,this.type,this.ta,this.ea);return new ay(t.firestore,t._converter,function(t,e){return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(sm),fm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Ps.c)(e,t),e.prototype._apply=function(t){var e=dm(t,this.type,this.ta,this.ea);return new ay(t.firestore,t._converter,function(t,e){return new nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(sm);function dm(t,e,n,r){if(n[0]instanceof oy&&(n[0]=n[0]._delegate),n[0]instanceof $y)return function(t,e,n,r,i){if(!r)throw new ia(ra.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=lu(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Sa(e,r.key));else{var c=r.field(u.field);if(ma(c))throw new ia(ra.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new ia(ra.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $a(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ky(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ia(ra.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ia(ra.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!cu(t)&&-1!==c.indexOf("/"))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(sa.fromString(c));if(!ca.isDocumentKey(l))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ca(l);a.push(Sa(e,h))}else{var f=qy(n,r,c);a.push(f)}}return new $a(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function pm(t,e,n){if(n instanceof oy&&(n=n._delegate),"string"==typeof n){if(""===n)throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cu(e)&&-1!==n.indexOf("/"))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(sa.fromString(n));if(!ca.isDocumentKey(r))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Sa(t,new ca(r))}if(n instanceof sy)return Sa(t,n._key);throw new ia(ra.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ty(n)+".")}function ym(t,e){if(!Array.isArray(t)||0===t.length)throw new ia(ra.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ia(ra.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function mm(t,e,n){if(!n.isEqual(e))throw new ia(ra.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var gm=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ba(t)){case 0:return null;case 1:return t.booleanValue;case 2:return da(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Hs()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Xs(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Iy(da(t.latitude),da(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ga(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(va(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=fa(t);return new ya(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=sa.fromString(t);zs(hl(n));var r=new Bp(n.get(1),n.get(3)),i=new ca(n.popFirst(5));return r.isEqual(e)||qs("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function vm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ps.c)(e,t),e.prototype.convertBytes=function(t){return new _y(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sy(this.firestore,null,e)},e}(gm),wm=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ky(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=_m(t,this._firestore),i=vm(r._converter,e,n),o=jy(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Uu.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=_m(t,this._firestore);return e instanceof oy&&(e=e._delegate),o="string"==typeof e||e instanceof wy?Vy(this._dataReader,"WriteBatch.update",s._key,e,n,r):Fy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Uu.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=_m(t,this._firestore);return this._mutations=this._mutations.concat(new rc(e._key,Uu.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ia(ra.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function _m(t,e){if(t instanceof oy&&(t=t._delegate),t.firestore!==e)throw new ia(ra.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Em=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ps.c)(e,t),e.prototype.convertBytes=function(t){return new _y(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new sy(this.firestore,null,e)},e}(gm);function Im(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ey(t,sy);var o=ey(t.firestore,yy),s=ky(o);return e instanceof oy&&(e=e._delegate),Om(o,[("string"==typeof e||e instanceof wy?Vy(s,"updateDoc",t._key,e,n,r):Fy(s,"updateDoc",t._key,e)).toMutation(t._key,Uu.exists(!0))])}function Tm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof oy&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||py(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(py(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof sy)c=ey(t.firestore,yy),l=iu(t._key.path),u={next:function(e){i[a]&&i[a](Sm(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=ey(t,ay);c=ey(d.firestore,yy),l=d._query;var p=new Em(c);u={next:function(t){i[a]&&i[a](new nm(c,p,d,t))},error:i[a+1],complete:i[a+2]},om(t._query)}return function(t,e,n,r){var i=this,o=new Sp(r),s=new Ld(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(i,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e=jd,[4,Fp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(i,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e=Nd,[4,Fp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(my(c),l,h,u)}function Om(t,e){return function(t,e){var n=this,r=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var n;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return n=Qd,[4,Mp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(my(t),e)}function Sm(t,e,n){var r=n.docs.get(e._key),i=new Em(t);return new tm(t,i,e._key,r,new Zy(n.hasPendingWrites,n.fromCache),e._converter)}var xm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Ps.c)(e,t),e.prototype.get=function(e){var n=this,r=_m(e,this._firestore),i=new Em(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new tm(n._firestore,i,r._key,t._document,new Zy(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ky(t)}return t.prototype.get=function(t){var e=this,n=_m(t,this._firestore),r=new bm(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Hs();var i=t[0];if(i instanceof Ra)return new $y(e._firestore,r,n._key,null,n._converter);if(i instanceof Da)return new $y(e._firestore,r,i.key,i,n._converter);throw Hs()})},t.prototype.set=function(t,e,n){var r=_m(t,this._firestore),i=vm(r._converter,e,n),o=jy(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=_m(t,this._firestore);return e instanceof oy&&(e=e._delegate),o="string"==typeof e||e instanceof wy?Vy(this._dataReader,"Transaction.update",s._key,e,n,r):Fy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=_m(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Cm(){if("undefined"==typeof Uint8Array)throw new ia(ra.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Am(){if("undefined"==typeof atob)throw new ia(ra.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var km=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.fromBase64String=function(t){return Am(),new e(_y.fromBase64String(t))},e.fromUint8Array=function(t){return Cm(),new e(_y.fromUint8Array(t))},e.prototype.toBase64=function(){return Am(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Cm(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(oy),jm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){by(t=ey(t,yy));var n=my(t),r=t._freezeSettings(),i=new Op;return vy(n,i,new Ip(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){by(t=ey(t,yy));var e=my(t),n=t._freezeSettings(),r=new Op;return vy(e,r,new Tp(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ia(ra.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Pl;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Ps.b)(e,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Ps.b)(this,void 0,void 0,function(){return Object(Ps.d)(this,function(e){switch(e.label){case 0:return Fl.At()?[4,Fl.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Yh(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Bp||(i.sa=e),i}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=ey(t,iy))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Us("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Ps.b)(e,void 0,void 0,function(){var e,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return[4,Rp(t)];case 1:return e=r.sent(),[4,Lp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ks(t);return e.Qr.delete(0),Zf(e)}(n))]}})})})}(my(ey(this._delegate,yy)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Ps.b)(e,void 0,void 0,function(){var e,n;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return[4,Rp(t)];case 1:return e=r.sent(),[4,Lp(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Ps.b)(this,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return(e=Ks(t)).Qr.add(0),[4,td(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(my(ey(this._delegate,yy)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Jp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(e,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(r){switch(r.label){case 0:return e=tp,[4,Mp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(my(ey(this._delegate,yy)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sp(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ks(t).Zr.add(e),e.next()},[4,Fp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var e;return Object(Ps.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ks(t).Zr.delete(e)},[4,Fp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(my(t=ey(t,yy)),py(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new ia(ra.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Gm(this,cy(this._delegate,t))}catch(t){throw Fm(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Mm(this,ly(this._delegate,t))}catch(t){throw Fm(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Hm(this,function(t,e){if(t=ey(t,iy),Yp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ia(ra.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ay(t,null,function(t){return new nu(sa.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Fm(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var n;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Dp(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Cp(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(my(t),function(n){return e(new xm(t,n))})}(this._delegate,function(n){return t(new Rm(e,n))})},e.prototype.batch=function(){var t=this;return my(this._delegate),new Pm(new wm(this._delegate,function(e){return Om(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new ia(ra.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new ia(ra.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(oy),Dm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ps.c)(e,t),e.prototype.convertBytes=function(t){return new km(new _y(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Mm.ia(e,this.firestore,null)},e}(gm),Rm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Dm(e),r}return Object(Ps.c)(e,t),e.prototype.get=function(t){var e=this,n=Wm(t);return this._delegate.get(n).then(function(t){return new Um(e._firestore,new tm(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Wm(t);return n?($p("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wm(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Ps.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Wm(t);return this._delegate.delete(e),this},e}(oy),Pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.set=function(t,e,n){var r=Wm(t);return n?($p("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wm(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Ps.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Wm(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(oy),Lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Ps.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new em(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Bm(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Dm(t),n),i.set(n,o)),o},e}(oy);Lm.oa=new WeakMap;var Mm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Dm(e),r}return Object(Ps.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new ia(ra.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new sy(n._delegate,r,new ca(t)))},e.ia=function(t,n,r){return new e(n,new sy(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Gm(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Gm(this.firestore,cy(this._delegate,t))}catch(t){throw Fm(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof oy&&(t=t._delegate),t instanceof sy&&hy(this._delegate,t)},e.prototype.set=function(t,e){e=$p("DocumentReference.set",e);try{return function(t,e,n){t=ey(t,sy);var r=ey(t.firestore,yy),i=vm(t._converter,e,n);return Om(r,[jy(ky(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Uu.none())])}(this._delegate,t,e)}catch(t){throw Fm(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Im(this._delegate,t):Im.apply(void 0,Object(Ps.f)([this._delegate,t,e],n))}catch(t){throw Fm(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Om(ey((t=this._delegate).firestore,yy),[new rc(t._key,Uu.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vm(e),i=qm(e,function(e){return new Um(t.firestore,new tm(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Tm(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ey(t,sy);var e=ey(t.firestore,yy),n=my(e),r=new Em(e);return function(t,e){var n=this,r=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var n;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i;return Object(Ps.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ks(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Da?n.resolve(i):i instanceof Ra?n.resolve(null):n.reject(new ia(ra.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Od(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Pp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new tm(e,r,t._key,n,new Zy(n instanceof Da&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ey(t,sy);var e=ey(t.firestore,yy);return Vp(my(e),t._key,{source:"server"}).then(function(n){return Sm(e,t,n)})}(this._delegate):function(t){t=ey(t,sy);var e=ey(t.firestore,yy);return Vp(my(e),t._key).then(function(n){return Sm(e,t,n)})}(this._delegate)).then(function(t){return new Um(e.firestore,new tm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Lm.ra(this.firestore,t):null))},e}(oy);function Fm(t,e,n){return t.message=t.message.replace(e,n),t}function Vm(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!py(r))return r}return{}}function qm(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=py(t[0])?t[0]:py(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Um=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Mm(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return im(this._delegate,t._delegate)},e}(oy),Bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Um),Hm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Dm(e),r}return Object(Ps.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,am(this._delegate,function(t,e,n){var r=e,i=Xy("where",t);return new um(i,r,n)}(t,n,r)))}catch(t){throw Fm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,am(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Xy("orderBy",t);return new cm(r,n)}(t,n)))}catch(t){throw Fm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,am(this._delegate,function(t){return ny("limit",t),new lm("limit",t,"F")}(t)))}catch(t){throw Fm(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,am(this._delegate,function(t){return ny("limitToLast",t),new lm("limitToLast",t,"L")}(t)))}catch(t){throw Fm(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Fm(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hm("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Fm(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fm("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Fm(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,am(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fm("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Fm(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return fy(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ey(t,ay);var e=ey(t.firestore,yy),n=my(e),r=new Em(e);return function(t,e){var n=this,r=new Pl;return t.asyncQueue.enqueueAndForget(function(){return Object(Ps.b)(n,void 0,void 0,function(){var n;return Object(Ps.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ps.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Ps.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,hf(t,e,!0)];case 1:return a=u.sent(),r=new Ud(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Od(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Pp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new nm(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ey(t,ay);var e=ey(t.firestore,yy),n=my(e),r=new Em(e);return qp(n,t._query,{source:"server"}).then(function(n){return new nm(e,r,t,n)})}(this._delegate):function(t){t=ey(t,ay);var e=ey(t.firestore,yy),n=my(e),r=new Em(e);return om(t._query),qp(n,t._query).then(function(n){return new nm(e,r,t,n)})}(this._delegate)).then(function(t){return new Km(e.firestore,new nm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vm(e),i=qm(e,function(e){return new Km(t.firestore,new nm(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Tm(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Lm.ra(this.firestore,t):null))},e}(oy),zm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Bm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(oy),Km=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Hm(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Bm(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new zm(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Bm(n._firestore,r))})},e.prototype.isEqual=function(t){return im(this._delegate,t._delegate)},e}(oy),Gm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Ps.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Mm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Mm(this.firestore,void 0===t?ly(this._delegate):ly(this._delegate,t))}catch(t){throw Fm(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ey(t.firestore,yy),r=ly(t),i=vm(t._converter,e);return Om(n,[jy(ky(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Uu.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Mm(e.firestore,t)})},e.prototype.isEqual=function(t){return hy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Lm.ra(this.firestore,t):null))},e}(Hm);function Wm(t){return t instanceof oy&&(t=t._delegate),ey(t,sy)}var Qm,Ym=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(wy.bind.apply(wy,Object(Ps.f)([void 0],e))))||this}return Object(Ps.c)(e,t),e.documentId=function(){return new e(ua.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof oy&&(t=t._delegate),t instanceof wy&&this._delegate._internalPath.isEqual(t._internalPath)},e}(oy),$m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ps.c)(e,t),e.serverTimestamp=function(){var t=new Ry("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ny("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Py("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ly("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new My("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(oy),Jm=n("/6Yf"),Xm={Firestore:Nm,GeoPoint:Iy,Timestamp:ya,Blob:km,Transaction:Rm,WriteBatch:Pm,DocumentReference:Mm,DocumentSnapshot:Um,Query:Hm,QueryDocumentSnapshot:Bm,QuerySnapshot:Km,CollectionReference:Gm,FieldPath:Ym,FieldValue:$m,setLogLevel:function(t){Ms.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Jm.a("firestore",function(t){return function(t,e){return new Nm(t,new yy(t,e),new jm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Xm)))})(Qm=kn.a),Qm.registerVersion("@firebase/firestore","2.2.1");var Zm=n("qgXg"),tg=n("quSY"),eg=n("Ylt2");class ng extends Mt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new rg(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Zt.a;if(this.isStopped||this.hasError?o=tg.a.EMPTY:(this.observers.push(t),o=new eg.a(this,t)),r&&t.add(t=new Cn.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Zm.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class rg{constructor(t,e){this.time=t,this.value=e}}function ig(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new ng(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const og=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function sg(t=null){return e=>e.lift(new ag(t))}class ag{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ug(t,this.defaultValue))}}class ug extends $.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cg(t=fg){return e=>e.lift(new lg(t))}class lg{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new hg(t,this.errorFactory))}}class hg extends $.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Qm){t=Qm}this.destination.error(t)}}}function fg(){return new og}var dg=n("SpAZ");function pg(t,e){return e?_e(()=>t,e):_e(()=>t)}var yg=n("tf+s");const mg=new r.r("angularfire2.auth.use-emulator"),gg=new r.r("angularfire2.auth.settings"),vg=new r.r("angularfire2.auth.tenant-id"),bg=new r.r("angularfire2.auth.langugage-code"),wg=new r.r("angularfire2.auth.use-device-language"),_g=new r.r("angularfire.auth.persistence");let Eg=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new _n.d(i),f=Object(_n.h)(h),p=new Mt.a,y=Object(W.a)(void 0).pipe(Object(Cn.b)(h.outsideAngular),_e(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(tt.a)(()=>Object(_n.g)(t,i,e)),Object(tt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(_n.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),ig({bufferSize:1,refCount:!1}));if(d(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(W.a)(null);else{y.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?J((e,n)=>t(e,n,r)):dg.a,pe(1),n?sg(e):cg(()=>new og))}()).subscribe();const t=y.pipe(_e(t=>t.getRedirectResult().then(t=>t,()=>null)),f,ig({bufferSize:1,refCount:!1})),e=t=>new Q.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=y.pipe(_e(t=>e(t.onAuthStateChanged.bind(t)))),r=y.pipe(_e(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(pg(n),Object(yg.a)(h.outsideAngular),Object(Cn.b)(h.insideAngular)),this.user=t.pipe(pg(r),Object(yg.a)(h.outsideAngular),Object(Cn.b)(h.insideAngular)),this.idToken=this.user.pipe(_e(t=>t?Object(we.a)(t.getIdToken()):Object(W.a)(null))),this.idTokenResult=this.user.pipe(_e(t=>t?Object(we.a)(t.getIdTokenResult()):Object(W.a)(null))),this.credential=Object(ae.a)(t,p,this.authState.pipe(J(t=>!t))).pipe(Object(tt.a)(t=>(null==t?void 0:t.user)?t:null),Object(yg.a)(h.outsideAngular),Object(Cn.b)(h.insideAngular))}return Object(_n.i)(this,y,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>p.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(_n.c),r.Yb(_n.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(mg,8),r.Yb(gg,8),r.Yb(vg,8),r.Yb(bg,8),r.Yb(wg,8),r.Yb(_g,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(_n.c),Object(r.Yb)(_n.b,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(mg,8),Object(r.Yb)(gg,8),Object(r.Yb)(vg,8),Object(r.Yb)(bg,8),Object(r.Yb)(wg,8),Object(r.Yb)(_g,8))},token:t,providedIn:"any"}),t})();function Ig(t,e){return function(t,e=Bt.b){return new Q.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Tg(t,e){return Ig(t,e).pipe(Object(tt.a)(t=>({payload:t,type:"query"})))}function Og(t,e){return Tg(t,e).pipe(ge(void 0),En(),Object(tt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Sg(t,e,n){return Og(t,n).pipe(On((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return xg(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return xg(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xg(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new ve(undefined,undefined)),Object(tt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function xg(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Cg(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(_n.e)(Eg,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Ag{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Og(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(tt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(ge(void 0),En(),J(([t,e])=>e.length>0||!t),Object(tt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(On((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Cg(t);return Sg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Tg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(tt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(we.a)(this.query.get(t)).pipe(Object(Cn.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new kg(this.ref.doc(t),this.afs)}}class kg{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Lg(n,e);return new Ag(r,i,this.afs)}snapshotChanges(){return Ig(this.ref,this.afs.schedulers.outsideAngular).pipe(ge(void 0),En(),Object(tt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(tt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(we.a)(this.ref.get(t)).pipe(Object(Cn.b)(this.afs.schedulers.insideAngular))}}class jg{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Og(this.query,this.afs.schedulers.outsideAngular).pipe(Object(tt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),J(t=>t.length>0),this.afs.keepUnstableUntilFirst):Og(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(On((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Cg(t);return Sg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Tg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(tt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(we.a)(this.query.get(t)).pipe(Object(Cn.b)(this.afs.schedulers.insideAngular))}}const Ng=new r.r("angularfire2.enableFirestorePersistence"),Dg=new r.r("angularfire2.firestore.persistenceSettings"),Rg=new r.r("angularfire2.firestore.settings"),Pg=new r.r("angularfire2.firestore.use-emulator");function Lg(t,e=(t=>t)){return{query:e(t),ref:t}}let Mg=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new _n.d(o),this.keepUnstableUntilFirst=Object(_n.h)(this.schedulers);const c=Object(_n.g)(t,o,e);!An.a.auth&&u&&Object(_n.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(_n.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!d(i)){const e=()=>{try{return Object(we.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Qm){return"undefined"!=typeof console&&console.warn(Qm),Object(W.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(W.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Lg(n,e),o=this.schedulers.ngZone.run(()=>r);return new Ag(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new jg(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new kg(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(_n.c),r.Yb(_n.b,8),r.Yb(Ng,8),r.Yb(Rg,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Dg,8),r.Yb(Pg,8),r.Yb(mg,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(_n.c),Object(r.Yb)(_n.b,8),Object(r.Yb)(Ng,8),Object(r.Yb)(Rg,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Dg,8),Object(r.Yb)(Pg,8),Object(r.Yb)(mg,8))},token:t,providedIn:"any"}),t})(),Fg=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Ng,useValue:!0},{provide:Dg,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[Mg]}),t})();const Vg={apiKey:"AIzaSyDvoK8xNki9xglDT_iNBonCGKbdCogMY6o",authDomain:"huaweiexporter.firebaseapp.com",databaseURL:"https://huaweiexporter-default-rtdb.firebaseio.com",projectId:"huaweiexporter",storageBucket:"huaweiexporter.appspot.com",messagingSenderId:"420687984337",appId:"1:420687984337:web:f6ec3e21f266d02bde77f0",measurementId:"G-18FH7EVG9J"};n("EQ5u"),n("x+ZX");let qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t,bootstrap:[Pt]}),t.\u0275inj=r.Jb({providers:[Dt],imports:[[B,wn,_n.a.initializeApp(Vg),Fg,Nt]]}),t})();Object(r.T)(),q().bootstrapModule(qg).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);